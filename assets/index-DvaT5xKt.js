(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function HA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var By={exports:{}},$c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function oD(){if(Eb)return $c;Eb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return $c.Fragment=e,$c.jsx=t,$c.jsxs=t,$c}var Tb;function lD(){return Tb||(Tb=1,By.exports=oD()),By.exports}var w=lD(),Fy={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb;function uD(){if(wb)return Re;wb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=b&&k[b]||k["@@iterator"],typeof k=="function"?k:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,F={};function ee(k,q,oe){this.props=k,this.context=q,this.refs=F,this.updater=oe||M}ee.prototype.isReactComponent={},ee.prototype.setState=function(k,q){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,q,"setState")},ee.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function te(){}te.prototype=ee.prototype;function X(k,q,oe){this.props=k,this.context=q,this.refs=F,this.updater=oe||M}var ge=X.prototype=new te;ge.constructor=X,z(ge,ee.prototype),ge.isPureReactComponent=!0;var fe=Array.isArray;function de(){}var x={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(k,q,oe){var me=oe.ref;return{$$typeof:n,type:k,key:q,ref:me!==void 0?me:null,props:oe}}function P(k,q){return C(k.type,q,k.props)}function O(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function L(k){var q={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(oe){return q[oe]})}var N=/\/+/g;function He(k,q){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):q.toString(36)}function bt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(de,de):(k.status="pending",k.then(function(q){k.status==="pending"&&(k.status="fulfilled",k.value=q)},function(q){k.status==="pending"&&(k.status="rejected",k.reason=q)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function j(k,q,oe,me,Ae){var De=typeof k;(De==="undefined"||De==="boolean")&&(k=null);var Fe=!1;if(k===null)Fe=!0;else switch(De){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(k.$$typeof){case n:case e:Fe=!0;break;case _:return Fe=k._init,j(Fe(k._payload),q,oe,me,Ae)}}if(Fe)return Ae=Ae(k),Fe=me===""?"."+He(k,0):me,fe(Ae)?(oe="",Fe!=null&&(oe=Fe.replace(N,"$&/")+"/"),j(Ae,q,oe,"",function(Sa){return Sa})):Ae!=null&&(O(Ae)&&(Ae=P(Ae,oe+(Ae.key==null||k&&k.key===Ae.key?"":(""+Ae.key).replace(N,"$&/")+"/")+Fe)),q.push(Ae)),1;Fe=0;var Xt=me===""?".":me+":";if(fe(k))for(var mt=0;mt<k.length;mt++)me=k[mt],De=Xt+He(me,mt),Fe+=j(me,q,oe,De,Ae);else if(mt=R(k),typeof mt=="function")for(k=mt.call(k),mt=0;!(me=k.next()).done;)me=me.value,De=Xt+He(me,mt++),Fe+=j(me,q,oe,De,Ae);else if(De==="object"){if(typeof k.then=="function")return j(bt(k),q,oe,me,Ae);throw q=String(k),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function le(k,q,oe){if(k==null)return k;var me=[],Ae=0;return j(k,me,"","",function(De){return q.call(oe,De,Ae++)}),me}function Te(k){if(k._status===-1){var q=k._result;q=q(),q.then(function(oe){(k._status===0||k._status===-1)&&(k._status=1,k._result=oe)},function(oe){(k._status===0||k._status===-1)&&(k._status=2,k._result=oe)}),k._status===-1&&(k._status=0,k._result=q)}if(k._status===1)return k._result.default;throw k._result}var Oe=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Qe={map:le,forEach:function(k,q,oe){le(k,function(){q.apply(this,arguments)},oe)},count:function(k){var q=0;return le(k,function(){q++}),q},toArray:function(k){return le(k,function(q){return q})||[]},only:function(k){if(!O(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Re.Activity=v,Re.Children=Qe,Re.Component=ee,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=X,Re.StrictMode=r,Re.Suspense=m,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Re.__COMPILER_RUNTIME={__proto__:null,c:function(k){return x.H.useMemoCache(k)}},Re.cache=function(k){return function(){return k.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(k,q,oe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var me=z({},k.props),Ae=k.key;if(q!=null)for(De in q.key!==void 0&&(Ae=""+q.key),q)!S.call(q,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&q.ref===void 0||(me[De]=q[De]);var De=arguments.length-2;if(De===1)me.children=oe;else if(1<De){for(var Fe=Array(De),Xt=0;Xt<De;Xt++)Fe[Xt]=arguments[Xt+2];me.children=Fe}return C(k.type,Ae,me)},Re.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Re.createElement=function(k,q,oe){var me,Ae={},De=null;if(q!=null)for(me in q.key!==void 0&&(De=""+q.key),q)S.call(q,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ae[me]=q[me]);var Fe=arguments.length-2;if(Fe===1)Ae.children=oe;else if(1<Fe){for(var Xt=Array(Fe),mt=0;mt<Fe;mt++)Xt[mt]=arguments[mt+2];Ae.children=Xt}if(k&&k.defaultProps)for(me in Fe=k.defaultProps,Fe)Ae[me]===void 0&&(Ae[me]=Fe[me]);return C(k,De,Ae)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(k){return{$$typeof:d,render:k}},Re.isValidElement=O,Re.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:Te}},Re.memo=function(k,q){return{$$typeof:g,type:k,compare:q===void 0?null:q}},Re.startTransition=function(k){var q=x.T,oe={};x.T=oe;try{var me=k(),Ae=x.S;Ae!==null&&Ae(oe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(de,Oe)}catch(De){Oe(De)}finally{q!==null&&oe.types!==null&&(q.types=oe.types),x.T=q}},Re.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Re.use=function(k){return x.H.use(k)},Re.useActionState=function(k,q,oe){return x.H.useActionState(k,q,oe)},Re.useCallback=function(k,q){return x.H.useCallback(k,q)},Re.useContext=function(k){return x.H.useContext(k)},Re.useDebugValue=function(){},Re.useDeferredValue=function(k,q){return x.H.useDeferredValue(k,q)},Re.useEffect=function(k,q){return x.H.useEffect(k,q)},Re.useEffectEvent=function(k){return x.H.useEffectEvent(k)},Re.useId=function(){return x.H.useId()},Re.useImperativeHandle=function(k,q,oe){return x.H.useImperativeHandle(k,q,oe)},Re.useInsertionEffect=function(k,q){return x.H.useInsertionEffect(k,q)},Re.useLayoutEffect=function(k,q){return x.H.useLayoutEffect(k,q)},Re.useMemo=function(k,q){return x.H.useMemo(k,q)},Re.useOptimistic=function(k,q){return x.H.useOptimistic(k,q)},Re.useReducer=function(k,q,oe){return x.H.useReducer(k,q,oe)},Re.useRef=function(k){return x.H.useRef(k)},Re.useState=function(k){return x.H.useState(k)},Re.useSyncExternalStore=function(k,q,oe){return x.H.useSyncExternalStore(k,q,oe)},Re.useTransition=function(){return x.H.useTransition()},Re.version="19.2.4",Re}var bb;function sv(){return bb||(bb=1,Fy.exports=uD()),Fy.exports}var B=sv();const cD=HA(B);var qy={exports:{}},Qc={},Hy={exports:{}},Gy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function hD(){return Ib||(Ib=1,(function(n){function e(j,le){var Te=j.length;j.push(le);e:for(;0<Te;){var Oe=Te-1>>>1,Qe=j[Oe];if(0<a(Qe,le))j[Oe]=le,j[Te]=Qe,Te=Oe;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var le=j[0],Te=j.pop();if(Te!==le){j[0]=Te;e:for(var Oe=0,Qe=j.length,k=Qe>>>1;Oe<k;){var q=2*(Oe+1)-1,oe=j[q],me=q+1,Ae=j[me];if(0>a(oe,Te))me<Qe&&0>a(Ae,oe)?(j[Oe]=Ae,j[me]=Te,Oe=me):(j[Oe]=oe,j[q]=Te,Oe=q);else if(me<Qe&&0>a(Ae,Te))j[Oe]=Ae,j[me]=Te,Oe=me;else break e}}return le}function a(j,le){var Te=j.sortIndex-le.sortIndex;return Te!==0?Te:j.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,v=null,b=3,R=!1,M=!1,z=!1,F=!1,ee=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function ge(j){for(var le=t(g);le!==null;){if(le.callback===null)r(g);else if(le.startTime<=j)r(g),le.sortIndex=le.expirationTime,e(m,le);else break;le=t(g)}}function fe(j){if(z=!1,ge(j),!M)if(t(m)!==null)M=!0,de||(de=!0,L());else{var le=t(g);le!==null&&bt(fe,le.startTime-j)}}var de=!1,x=-1,S=5,C=-1;function P(){return F?!0:!(n.unstable_now()-C<S)}function O(){if(F=!1,de){var j=n.unstable_now();C=j;var le=!0;try{e:{M=!1,z&&(z=!1,te(x),x=-1),R=!0;var Te=b;try{t:{for(ge(j),v=t(m);v!==null&&!(v.expirationTime>j&&P());){var Oe=v.callback;if(typeof Oe=="function"){v.callback=null,b=v.priorityLevel;var Qe=Oe(v.expirationTime<=j);if(j=n.unstable_now(),typeof Qe=="function"){v.callback=Qe,ge(j),le=!0;break t}v===t(m)&&r(m),ge(j)}else r(m);v=t(m)}if(v!==null)le=!0;else{var k=t(g);k!==null&&bt(fe,k.startTime-j),le=!1}}break e}finally{v=null,b=Te,R=!1}le=void 0}}finally{le?L():de=!1}}}var L;if(typeof X=="function")L=function(){X(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,He=N.port2;N.port1.onmessage=O,L=function(){He.postMessage(null)}}else L=function(){ee(O,0)};function bt(j,le){x=ee(function(){j(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(j){switch(b){case 1:case 2:case 3:var le=3;break;default:le=b}var Te=b;b=le;try{return j()}finally{b=Te}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(j,le){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Te=b;b=j;try{return le()}finally{b=Te}},n.unstable_scheduleCallback=function(j,le,Te){var Oe=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Oe+Te:Oe):Te=Oe,j){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Te+Qe,j={id:_++,callback:le,priorityLevel:j,startTime:Te,expirationTime:Qe,sortIndex:-1},Te>Oe?(j.sortIndex=Te,e(g,j),t(m)===null&&j===t(g)&&(z?(te(x),x=-1):z=!0,bt(fe,Te-Oe))):(j.sortIndex=Qe,e(m,j),M||R||(M=!0,de||(de=!0,L()))),j},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(j){var le=b;return function(){var Te=b;b=le;try{return j.apply(this,arguments)}finally{b=Te}}}})(Gy)),Gy}var Ab;function dD(){return Ab||(Ab=1,Hy.exports=hD()),Hy.exports}var Ky={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function fD(){if(Sb)return vn;Sb=1;var n=sv();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},vn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},vn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},vn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},vn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,v=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:R}):_==="script"&&r.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},vn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},vn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,v=d(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},vn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},vn.requestFormReset=function(m){r.d.r(m)},vn.unstable_batchedUpdates=function(m,g){return m(g)},vn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},vn.version="19.2.4",vn}var Rb;function mD(){if(Rb)return Ky.exports;Rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ky.exports=fD(),Ky.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function pD(){if(xb)return Qc;xb=1;var n=dD(),e=sv(),t=mD();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),i;if(p===u)return m(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var E=!1,I=f.child;I;){if(I===o){E=!0,o=f,u=p;break}if(I===u){E=!0,u=f,o=p;break}I=I.sibling}if(!E){for(I=p.child;I;){if(I===o){E=!0,o=p,u=f;break}if(I===u){E=!0,u=p,o=f;break}I=I.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),X=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function He(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case ee:return"Profiler";case F:return"StrictMode";case fe:return"Suspense";case de:return"SuspenseList";case C:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case M:return"Portal";case X:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case ge:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return s=i.displayName||null,s!==null?s:He(i.type)||"Memo";case S:s=i._payload,i=i._init;try{return He(i(s))}catch{}}return null}var bt=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Oe=[],Qe=-1;function k(i){return{current:i}}function q(i){0>Qe||(i.current=Oe[Qe],Oe[Qe]=null,Qe--)}function oe(i,s){Qe++,Oe[Qe]=i.current,i.current=s}var me=k(null),Ae=k(null),De=k(null),Fe=k(null);function Xt(i,s){switch(oe(De,s),oe(Ae,i),oe(me,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?q0(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=q0(s),i=H0(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(me),oe(me,i)}function mt(){q(me),q(Ae),q(De)}function Sa(i){i.memoizedState!==null&&oe(Fe,i);var s=me.current,o=H0(s,i.type);s!==o&&(oe(Ae,i),oe(me,o))}function $o(i){Ae.current===i&&(q(me),q(Ae)),Fe.current===i&&(q(Fe),qc._currentValue=Te)}var Qo,Yo;function Hr(i){if(Qo===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Qo=s&&s[1]||"",Yo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qo+i+Yo}var qu=!1;function Ra(i,s){if(!i||qu)return"";qu=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(J){var Q=J}Reflect.construct(i,[],re)}else{try{re.call()}catch(J){Q=J}i.call(re.prototype)}}else{try{throw Error()}catch(J){Q=J}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],I=p[1];if(E&&I){var D=E.split(`
`),$=I.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===$.length)for(u=D.length-1,f=$.length-1;1<=u&&0<=f&&D[u]!==$[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==$[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==$[f]){var Z=`
`+D[u].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=u&&0<=f);break}}}finally{qu=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Hr(o):""}function Hu(i,s){switch(i.tag){case 26:case 27:case 5:return Hr(i.type);case 16:return Hr("Lazy");case 13:return i.child!==s&&s!==null?Hr("Suspense Fallback"):Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 15:return Ra(i.type,!1);case 11:return Ra(i.type.render,!1);case 1:return Ra(i.type,!0);case 31:return Hr("Activity");default:return""}}function Gu(i){try{var s="",o=null;do s+=Hu(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var jt=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,fs=n.unstable_cancelCallback,qp=n.unstable_shouldYield,bd=n.unstable_requestPaint,An=n.unstable_now,xa=n.unstable_getCurrentPriorityLevel,Ku=n.unstable_ImmediatePriority,$u=n.unstable_UserBlockingPriority,ms=n.unstable_NormalPriority,Hp=n.unstable_LowPriority,Id=n.unstable_IdlePriority,Ad=n.log,Sd=n.unstable_setDisableYieldValue,Ar=null,un=null;function or(i){if(typeof Ad=="function"&&Sd(i),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Ar,i)}catch{}}var Pt=Math.clz32?Math.clz32:xd,Rd=Math.log,Wo=Math.LN2;function xd(i){return i>>>=0,i===0?32:31-(Rd(i)/Wo|0)|0}var Gr=256,Ca=262144,zt=4194304;function Kr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function $r(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~p,u!==0?f=Kr(u):(E&=I,E!==0?f=Kr(E):o||(o=I&~i,o!==0&&(f=Kr(o))))):(I=u&~p,I!==0?f=Kr(I):E!==0?f=Kr(E):o||(o=u&~i,o!==0&&(f=Kr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Sr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Gp(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cd(){var i=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),i}function Qr(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Na(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Kp(i,s,o,u,f,p){var E=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var I=i.entanglements,D=i.expirationTimes,$=i.hiddenUpdates;for(o=E&~o;0<o;){var Z=31-Pt(o),re=1<<Z;I[Z]=0,D[Z]=-1;var Q=$[Z];if(Q!==null)for($[Z]=null,Z=0;Z<Q.length;Z++){var J=Q[Z];J!==null&&(J.lane&=-536870913)}o&=~re}u!==0&&Da(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(E&~s))}function Da(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Pt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function Qu(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Pt(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Yu(i,s){var o=s&-s;return o=(o&42)!==0?1:Pa(o),(o&(i.suspendedLanes|s))!==0?0:o}function Pa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ci(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Nd(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:fb(i.type))}function Rr(i,s){var o=le.p;try{return le.p=i,s()}finally{le.p=o}}var xr=Math.random().toString(36).slice(2),Bt="__reactFiber$"+xr,nn="__reactProps$"+xr,Yr="__reactContainer$"+xr,Xo="__reactEvents$"+xr,$p="__reactListeners$"+xr,Dd="__reactHandles$"+xr,Pd="__reactResources$"+xr,Wr="__reactMarker$"+xr;function Jo(i){delete i[Bt],delete i[nn],delete i[Xo],delete i[$p],delete i[Dd]}function Xr(i){var s=i[Bt];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Yr]||o[Bt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=X0(i);i!==null;){if(o=i[Bt])return o;i=X0(i)}return s}i=o,o=i.parentNode}return null}function lr(i){if(i=i[Bt]||i[Yr]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Kn(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Jr(i){var s=i[Pd];return s||(s=i[Pd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ft(i){i[Wr]=!0}var Wu=new Set,Xu={};function Zr(i,s){ei(i,s),ei(i+"Capture",s)}function ei(i,s){for(Xu[i]=s,i=0;i<s.length;i++)Wu.add(s[i])}var Ju=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zu={},ec={};function Od(i){return jt.call(ec,i)?!0:jt.call(Zu,i)?!1:Ju.test(i)?ec[i]=!0:(Zu[i]=!0,!1)}function Zo(i,s,o){if(Od(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function $n(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function qt(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function rn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ps(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tc(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){o=""+E,p.call(this,E)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Je(i){if(!i._valueTracker){var s=ps(i)?"checked":"value";i._valueTracker=tc(i,s,""+i[s])}}function Oa(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=ps(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function ti(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Va=/[\n"\\]/g;function Vn(i){return i.replace(Va,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function el(i,s,o,u,f,p,E,I){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),s!=null?E==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+rn(s)):i.value!==""+rn(s)&&(i.value=""+rn(s)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),s!=null?nc(i,E,rn(s)):o!=null?nc(i,E,rn(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+rn(I):i.removeAttribute("name")}function Vd(i,s,o,u,f,p,E,I){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){Je(i);return}o=o!=null?""+rn(o):"",s=s!=null?""+rn(s):o,I||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),Je(i)}function nc(i,s,o){s==="number"&&ti(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function gs(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+rn(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function kd(i,s,o){if(s!=null&&(s=""+rn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+rn(o):""}function ys(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(bt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=rn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),Je(i)}function kn(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Md=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rc(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Md.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function ic(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&rc(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&rc(i,p,s[p])}function tl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nl(i){return _s.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Cr(){}var sc=null;function ur(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vs=null,ni=null;function ka(i){var s=lr(i);if(s&&(i=s.stateNode)){var o=i[nn]||null;e:switch(i=s.stateNode,s.type){case"input":if(el(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Vn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[nn]||null;if(!f)throw Error(r(90));el(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Oa(u)}break e;case"textarea":kd(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&gs(i,!!o.multiple,s,!1)}}}var rl=!1;function Es(i,s,o){if(rl)return i(s,o);rl=!0;try{var u=i(s);return u}finally{if(rl=!1,(vs!==null||ni!==null)&&(Df(),vs&&(s=vs,i=ni,ni=vs=null,ka(s),i)))for(s=0;s<i.length;s++)ka(i[s])}}function Nr(i,s){var o=i.stateNode;if(o===null)return null;var u=o[nn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=!1;if(cr)try{var it={};Object.defineProperty(it,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Ma=!1}var ri=null,ac=null,La=null;function oc(){if(La)return La;var i,s=ac,o=s.length,u,f="value"in ri?ri.value:ri.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var E=o-i;for(u=1;u<=E&&s[o-u]===f[p-u];u++);return La=f.slice(i,1<u?1-u:void 0)}function Ua(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Ni(){return!0}function Dr(){return!1}function cn(i){function s(o,u,f,p,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(o=i[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ni:Dr,this.isPropagationStopped=Dr,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),s}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ii=cn(Di),Ts=v({},Di,{view:0,detail:0}),lc=cn(Ts),ws,il,si,sl=v({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==si&&(si&&i.type==="mousemove"?(ws=i.screenX-si.screenX,il=i.screenY-si.screenY):il=ws=0,si=i),ws)},movementY:function(i){return"movementY"in i?i.movementY:il}}),uc=cn(sl),ja=v({},sl,{dataTransfer:0}),Ud=cn(ja),jd=v({},Ts,{relatedTarget:0}),za=cn(jd),cc=v({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),zd=cn(cc),al=v({},Di,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Bd=cn(al),Fd=v({},Di,{data:0}),ai=cn(Fd),qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Gd[i])?!!s[i]:!1}function bs(){return Kd}var Sn=v({},Ts,{key:function(i){if(i.key){var s=qd[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ua(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Hd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(i){return i.type==="keypress"?Ua(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ua(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$d=cn(Sn),Qd=v({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pi=cn(Qd),h=v({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),y=cn(h),T=v({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=cn(T),G=v({},sl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),W=cn(G),ue=v({},Di,{newState:0,oldState:0}),xe=cn(ue),Ot=[9,13,27,32],Ye=cr&&"CompositionEvent"in window,pt=null;cr&&"documentMode"in document&&(pt=document.documentMode);var hr=cr&&"TextEvent"in window&&!pt,oi=cr&&(!Ye||pt&&8<pt&&11>=pt),Pr=" ",Or=!1;function Ba(i,s){switch(i){case"keyup":return Ot.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ol(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ll=!1;function DC(i,s){switch(i){case"compositionend":return ol(s);case"keypress":return s.which!==32?null:(Or=!0,Pr);case"textInput":return i=s.data,i===Pr&&Or?null:i;default:return null}}function PC(i,s){if(ll)return i==="compositionend"||!Ye&&Ba(i,s)?(i=oc(),La=ac=ri=null,ll=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return oi&&s.locale!=="ko"?null:s.data;default:return null}}var OC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eT(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!OC[i.type]:s==="textarea"}function tT(i,s,o,u){vs?ni?ni.push(u):ni=[u]:vs=u,s=Uf(s,"onChange"),0<s.length&&(o=new ii("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var hc=null,dc=null;function VC(i){L0(i,0)}function Yd(i){var s=Kn(i);if(Oa(s))return i}function nT(i,s){if(i==="change")return s}var rT=!1;if(cr){var Qp;if(cr){var Yp="oninput"in document;if(!Yp){var iT=document.createElement("div");iT.setAttribute("oninput","return;"),Yp=typeof iT.oninput=="function"}Qp=Yp}else Qp=!1;rT=Qp&&(!document.documentMode||9<document.documentMode)}function sT(){hc&&(hc.detachEvent("onpropertychange",aT),dc=hc=null)}function aT(i){if(i.propertyName==="value"&&Yd(dc)){var s=[];tT(s,dc,i,ur(i)),Es(VC,s)}}function kC(i,s,o){i==="focusin"?(sT(),hc=s,dc=o,hc.attachEvent("onpropertychange",aT)):i==="focusout"&&sT()}function MC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yd(dc)}function LC(i,s){if(i==="click")return Yd(s)}function UC(i,s){if(i==="input"||i==="change")return Yd(s)}function jC(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Qn=typeof Object.is=="function"?Object.is:jC;function fc(i,s){if(Qn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!jt.call(s,f)||!Qn(i[f],s[f]))return!1}return!0}function oT(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function lT(i,s){var o=oT(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=oT(o)}}function uT(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?uT(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function cT(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=ti(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=ti(i.document)}return s}function Wp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var zC=cr&&"documentMode"in document&&11>=document.documentMode,ul=null,Xp=null,mc=null,Jp=!1;function hT(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jp||ul==null||ul!==ti(u)||(u=ul,"selectionStart"in u&&Wp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mc&&fc(mc,u)||(mc=u,u=Uf(Xp,"onSelect"),0<u.length&&(s=new ii("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=ul)))}function Fa(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var cl={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},Zp={},dT={};cr&&(dT=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function qa(i){if(Zp[i])return Zp[i];if(!cl[i])return i;var s=cl[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in dT)return Zp[i]=s[o];return i}var fT=qa("animationend"),mT=qa("animationiteration"),pT=qa("animationstart"),BC=qa("transitionrun"),FC=qa("transitionstart"),qC=qa("transitioncancel"),gT=qa("transitionend"),yT=new Map,eg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eg.push("scrollEnd");function Vr(i,s){yT.set(i,s),Zr(s,[i])}var Wd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},dr=[],hl=0,tg=0;function Xd(){for(var i=hl,s=tg=hl=0;s<i;){var o=dr[s];dr[s++]=null;var u=dr[s];dr[s++]=null;var f=dr[s];dr[s++]=null;var p=dr[s];if(dr[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}p!==0&&_T(o,f,p)}}function Jd(i,s,o,u){dr[hl++]=i,dr[hl++]=s,dr[hl++]=o,dr[hl++]=u,tg|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function ng(i,s,o,u){return Jd(i,s,o,u),Zd(i)}function Ha(i,s){return Jd(i,null,null,s),Zd(i)}function _T(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Pt(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Zd(i){if(50<Mc)throw Mc=0,hy=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var dl={};function HC(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(i,s,o,u){return new HC(i,s,o,u)}function rg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Oi(i,s){var o=i.alternate;return o===null?(o=Yn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function vT(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ef(i,s,o,u,f,p){var E=0;if(u=i,typeof i=="function")rg(i)&&(E=1);else if(typeof i=="string")E=YN(i,o,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case C:return i=Yn(31,o,s,f),i.elementType=C,i.lanes=p,i;case z:return Ga(o.children,f,p,s);case F:E=8,f|=24;break;case ee:return i=Yn(12,o,s,f|2),i.elementType=ee,i.lanes=p,i;case fe:return i=Yn(13,o,s,f),i.elementType=fe,i.lanes=p,i;case de:return i=Yn(19,o,s,f),i.elementType=de,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case X:E=10;break e;case te:E=9;break e;case ge:E=11;break e;case x:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Yn(E,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function Ga(i,s,o,u){return i=Yn(7,i,u,s),i.lanes=o,i}function ig(i,s,o){return i=Yn(6,i,null,s),i.lanes=o,i}function ET(i){var s=Yn(18,null,null,0);return s.stateNode=i,s}function sg(i,s,o){return s=Yn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var TT=new WeakMap;function fr(i,s){if(typeof i=="object"&&i!==null){var o=TT.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Gu(s)},TT.set(i,s),s)}return{value:i,source:s,stack:Gu(s)}}var fl=[],ml=0,tf=null,pc=0,mr=[],pr=0,Is=null,li=1,ui="";function Vi(i,s){fl[ml++]=pc,fl[ml++]=tf,tf=i,pc=s}function wT(i,s,o){mr[pr++]=li,mr[pr++]=ui,mr[pr++]=Is,Is=i;var u=li;i=ui;var f=32-Pt(u)-1;u&=~(1<<f),o+=1;var p=32-Pt(s)+f;if(30<p){var E=f-f%5;p=(u&(1<<E)-1).toString(32),u>>=E,f-=E,li=1<<32-Pt(s)+f|o<<f|u,ui=p+i}else li=1<<p|o<<f|u,ui=i}function ag(i){i.return!==null&&(Vi(i,1),wT(i,1,0))}function og(i){for(;i===tf;)tf=fl[--ml],fl[ml]=null,pc=fl[--ml],fl[ml]=null;for(;i===Is;)Is=mr[--pr],mr[pr]=null,ui=mr[--pr],mr[pr]=null,li=mr[--pr],mr[pr]=null}function bT(i,s){mr[pr++]=li,mr[pr++]=ui,mr[pr++]=Is,li=s.id,ui=s.overflow,Is=i}var hn=null,ht=null,Be=!1,As=null,gr=!1,lg=Error(r(519));function Ss(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gc(fr(s,i)),lg}function IT(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Bt]=i,s[nn]=u,o){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(o=0;o<Uc.length;o++)ke(Uc[o],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),Vd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),ys(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||B0(s.textContent,o)?(u.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),u.onScroll!=null&&ke("scroll",s),u.onScrollEnd!=null&&ke("scrollend",s),u.onClick!=null&&(s.onclick=Cr),s=!0):s=!1,s||Ss(i,!0)}function AT(i){for(hn=i.return;hn;)switch(hn.tag){case 5:case 31:case 13:gr=!1;return;case 27:case 3:gr=!0;return;default:hn=hn.return}}function pl(i){if(i!==hn)return!1;if(!Be)return AT(i),Be=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Sy(i.type,i.memoizedProps)),o=!o),o&&ht&&Ss(i),AT(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ht=W0(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ht=W0(i)}else s===27?(s=ht,zs(i.type)?(i=Dy,Dy=null,ht=i):ht=s):ht=hn?_r(i.stateNode.nextSibling):null;return!0}function Ka(){ht=hn=null,Be=!1}function ug(){var i=As;return i!==null&&(jn===null?jn=i:jn.push.apply(jn,i),As=null),i}function gc(i){As===null?As=[i]:As.push(i)}var cg=k(null),$a=null,ki=null;function Rs(i,s,o){oe(cg,s._currentValue),s._currentValue=o}function Mi(i){i._currentValue=cg.current,q(cg)}function hg(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function dg(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var I=p;p=f;for(var D=0;D<s.length;D++)if(I.context===s[D]){p.lanes|=o,I=p.alternate,I!==null&&(I.lanes|=o),hg(p.return,o,i),u||(E=null);break e}p=I.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),hg(E,o,i),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===i){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function gl(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var I=f.type;Qn(f.pendingProps.value,E.value)||(i!==null?i.push(I):i=[I])}}else if(f===Fe.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(qc):i=[qc])}f=f.return}i!==null&&dg(s,i,o,u),s.flags|=262144}function nf(i){for(i=i.firstContext;i!==null;){if(!Qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Qa(i){$a=i,ki=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dn(i){return ST($a,i)}function rf(i,s){return $a===null&&Qa(i),ST(i,s)}function ST(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ki===null){if(i===null)throw Error(r(308));ki=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ki=ki.next=s;return o}var GC=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},KC=n.unstable_scheduleCallback,$C=n.unstable_NormalPriority,Ht={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fg(){return{controller:new GC,data:new Map,refCount:0}}function yc(i){i.refCount--,i.refCount===0&&KC($C,function(){i.controller.abort()})}var _c=null,mg=0,yl=0,_l=null;function QC(i,s){if(_c===null){var o=_c=[];mg=0,yl=yy(),_l={status:"pending",value:void 0,then:function(u){o.push(u)}}}return mg++,s.then(RT,RT),s}function RT(){if(--mg===0&&_c!==null){_l!==null&&(_l.status="fulfilled");var i=_c;_c=null,yl=0,_l=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function YC(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var xT=j.S;j.S=function(i,s){h0=An(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&QC(i,s),xT!==null&&xT(i,s)};var Ya=k(null);function pg(){var i=Ya.current;return i!==null?i:lt.pooledCache}function sf(i,s){s===null?oe(Ya,Ya.current):oe(Ya,s.pool)}function CT(){var i=pg();return i===null?null:{parent:Ht._currentValue,pool:i}}var vl=Error(r(460)),gg=Error(r(474)),af=Error(r(542)),of={then:function(){}};function NT(i){return i=i.status,i==="fulfilled"||i==="rejected"}function DT(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Cr,Cr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,OT(i),i;default:if(typeof s.status=="string")s.then(Cr,Cr);else{if(i=lt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,OT(i),i}throw Xa=s,vl}}function Wa(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Xa=o,vl):o}}var Xa=null;function PT(){if(Xa===null)throw Error(r(459));var i=Xa;return Xa=null,i}function OT(i){if(i===vl||i===af)throw Error(r(483))}var El=null,vc=0;function lf(i){var s=vc;return vc+=1,El===null&&(El=[]),DT(El,i,s)}function Ec(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function uf(i,s){throw s.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function VT(i){function s(U,V){if(i){var K=U.deletions;K===null?(U.deletions=[V],U.flags|=16):K.push(V)}}function o(U,V){if(!i)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function u(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function f(U,V){return U=Oi(U,V),U.index=0,U.sibling=null,U}function p(U,V,K){return U.index=K,i?(K=U.alternate,K!==null?(K=K.index,K<V?(U.flags|=67108866,V):K):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function E(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function I(U,V,K,ne){return V===null||V.tag!==6?(V=ig(K,U.mode,ne),V.return=U,V):(V=f(V,K),V.return=U,V)}function D(U,V,K,ne){var we=K.type;return we===z?Z(U,V,K.props.children,ne,K.key):V!==null&&(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===S&&Wa(we)===V.type)?(V=f(V,K.props),Ec(V,K),V.return=U,V):(V=ef(K.type,K.key,K.props,null,U.mode,ne),Ec(V,K),V.return=U,V)}function $(U,V,K,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==K.containerInfo||V.stateNode.implementation!==K.implementation?(V=sg(K,U.mode,ne),V.return=U,V):(V=f(V,K.children||[]),V.return=U,V)}function Z(U,V,K,ne,we){return V===null||V.tag!==7?(V=Ga(K,U.mode,ne,we),V.return=U,V):(V=f(V,K),V.return=U,V)}function re(U,V,K){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=ig(""+V,U.mode,K),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case R:return K=ef(V.type,V.key,V.props,null,U.mode,K),Ec(K,V),K.return=U,K;case M:return V=sg(V,U.mode,K),V.return=U,V;case S:return V=Wa(V),re(U,V,K)}if(bt(V)||L(V))return V=Ga(V,U.mode,K,null),V.return=U,V;if(typeof V.then=="function")return re(U,lf(V),K);if(V.$$typeof===X)return re(U,rf(U,V),K);uf(U,V)}return null}function Q(U,V,K,ne){var we=V!==null?V.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:I(U,V,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return K.key===we?D(U,V,K,ne):null;case M:return K.key===we?$(U,V,K,ne):null;case S:return K=Wa(K),Q(U,V,K,ne)}if(bt(K)||L(K))return we!==null?null:Z(U,V,K,ne,null);if(typeof K.then=="function")return Q(U,V,lf(K),ne);if(K.$$typeof===X)return Q(U,V,rf(U,K),ne);uf(U,K)}return null}function J(U,V,K,ne,we){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return U=U.get(K)||null,I(V,U,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case R:return U=U.get(ne.key===null?K:ne.key)||null,D(V,U,ne,we);case M:return U=U.get(ne.key===null?K:ne.key)||null,$(V,U,ne,we);case S:return ne=Wa(ne),J(U,V,K,ne,we)}if(bt(ne)||L(ne))return U=U.get(K)||null,Z(V,U,ne,we,null);if(typeof ne.then=="function")return J(U,V,K,lf(ne),we);if(ne.$$typeof===X)return J(U,V,K,rf(V,ne),we);uf(V,ne)}return null}function ye(U,V,K,ne){for(var we=null,Ge=null,ve=V,Pe=V=0,je=null;ve!==null&&Pe<K.length;Pe++){ve.index>Pe?(je=ve,ve=null):je=ve.sibling;var Ke=Q(U,ve,K[Pe],ne);if(Ke===null){ve===null&&(ve=je);break}i&&ve&&Ke.alternate===null&&s(U,ve),V=p(Ke,V,Pe),Ge===null?we=Ke:Ge.sibling=Ke,Ge=Ke,ve=je}if(Pe===K.length)return o(U,ve),Be&&Vi(U,Pe),we;if(ve===null){for(;Pe<K.length;Pe++)ve=re(U,K[Pe],ne),ve!==null&&(V=p(ve,V,Pe),Ge===null?we=ve:Ge.sibling=ve,Ge=ve);return Be&&Vi(U,Pe),we}for(ve=u(ve);Pe<K.length;Pe++)je=J(ve,U,Pe,K[Pe],ne),je!==null&&(i&&je.alternate!==null&&ve.delete(je.key===null?Pe:je.key),V=p(je,V,Pe),Ge===null?we=je:Ge.sibling=je,Ge=je);return i&&ve.forEach(function(Gs){return s(U,Gs)}),Be&&Vi(U,Pe),we}function Ie(U,V,K,ne){if(K==null)throw Error(r(151));for(var we=null,Ge=null,ve=V,Pe=V=0,je=null,Ke=K.next();ve!==null&&!Ke.done;Pe++,Ke=K.next()){ve.index>Pe?(je=ve,ve=null):je=ve.sibling;var Gs=Q(U,ve,Ke.value,ne);if(Gs===null){ve===null&&(ve=je);break}i&&ve&&Gs.alternate===null&&s(U,ve),V=p(Gs,V,Pe),Ge===null?we=Gs:Ge.sibling=Gs,Ge=Gs,ve=je}if(Ke.done)return o(U,ve),Be&&Vi(U,Pe),we;if(ve===null){for(;!Ke.done;Pe++,Ke=K.next())Ke=re(U,Ke.value,ne),Ke!==null&&(V=p(Ke,V,Pe),Ge===null?we=Ke:Ge.sibling=Ke,Ge=Ke);return Be&&Vi(U,Pe),we}for(ve=u(ve);!Ke.done;Pe++,Ke=K.next())Ke=J(ve,U,Pe,Ke.value,ne),Ke!==null&&(i&&Ke.alternate!==null&&ve.delete(Ke.key===null?Pe:Ke.key),V=p(Ke,V,Pe),Ge===null?we=Ke:Ge.sibling=Ke,Ge=Ke);return i&&ve.forEach(function(aD){return s(U,aD)}),Be&&Vi(U,Pe),we}function ot(U,V,K,ne){if(typeof K=="object"&&K!==null&&K.type===z&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case R:e:{for(var we=K.key;V!==null;){if(V.key===we){if(we=K.type,we===z){if(V.tag===7){o(U,V.sibling),ne=f(V,K.props.children),ne.return=U,U=ne;break e}}else if(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===S&&Wa(we)===V.type){o(U,V.sibling),ne=f(V,K.props),Ec(ne,K),ne.return=U,U=ne;break e}o(U,V);break}else s(U,V);V=V.sibling}K.type===z?(ne=Ga(K.props.children,U.mode,ne,K.key),ne.return=U,U=ne):(ne=ef(K.type,K.key,K.props,null,U.mode,ne),Ec(ne,K),ne.return=U,U=ne)}return E(U);case M:e:{for(we=K.key;V!==null;){if(V.key===we)if(V.tag===4&&V.stateNode.containerInfo===K.containerInfo&&V.stateNode.implementation===K.implementation){o(U,V.sibling),ne=f(V,K.children||[]),ne.return=U,U=ne;break e}else{o(U,V);break}else s(U,V);V=V.sibling}ne=sg(K,U.mode,ne),ne.return=U,U=ne}return E(U);case S:return K=Wa(K),ot(U,V,K,ne)}if(bt(K))return ye(U,V,K,ne);if(L(K)){if(we=L(K),typeof we!="function")throw Error(r(150));return K=we.call(K),Ie(U,V,K,ne)}if(typeof K.then=="function")return ot(U,V,lf(K),ne);if(K.$$typeof===X)return ot(U,V,rf(U,K),ne);uf(U,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,V!==null&&V.tag===6?(o(U,V.sibling),ne=f(V,K),ne.return=U,U=ne):(o(U,V),ne=ig(K,U.mode,ne),ne.return=U,U=ne),E(U)):o(U,V)}return function(U,V,K,ne){try{vc=0;var we=ot(U,V,K,ne);return El=null,we}catch(ve){if(ve===vl||ve===af)throw ve;var Ge=Yn(29,ve,null,U.mode);return Ge.lanes=ne,Ge.return=U,Ge}finally{}}}var Ja=VT(!0),kT=VT(!1),xs=!1;function yg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _g(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Cs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ns(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Zd(i),_T(i,null,o),s}return Jd(i,u,s,o),Zd(i)}function Tc(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qu(i,o)}}function vg(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Eg=!1;function wc(){if(Eg){var i=_l;if(i!==null)throw i}}function bc(i,s,o,u){Eg=!1;var f=i.updateQueue;xs=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var D=I,$=D.next;D.next=null,E===null?p=$:E.next=$,E=D;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==E&&(I===null?Z.firstBaseUpdate=$:I.next=$,Z.lastBaseUpdate=D))}if(p!==null){var re=f.baseState;E=0,Z=$=D=null,I=p;do{var Q=I.lane&-536870913,J=Q!==I.lane;if(J?(Ue&Q)===Q:(u&Q)===Q){Q!==0&&Q===yl&&(Eg=!0),Z!==null&&(Z=Z.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ye=i,Ie=I;Q=s;var ot=o;switch(Ie.tag){case 1:if(ye=Ie.payload,typeof ye=="function"){re=ye.call(ot,re,Q);break e}re=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ie.payload,Q=typeof ye=="function"?ye.call(ot,re,Q):ye,Q==null)break e;re=v({},re,Q);break e;case 2:xs=!0}}Q=I.callback,Q!==null&&(i.flags|=64,J&&(i.flags|=8192),J=f.callbacks,J===null?f.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?($=Z=J,D=re):Z=Z.next=J,E|=Q;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;J=I,I=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);Z===null&&(D=re),f.baseState=D,f.firstBaseUpdate=$,f.lastBaseUpdate=Z,p===null&&(f.shared.lanes=0),ks|=E,i.lanes=E,i.memoizedState=re}}function MT(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function LT(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)MT(o[i],s)}var Tl=k(null),cf=k(0);function UT(i,s){i=Gi,oe(cf,i),oe(Tl,s),Gi=i|s.baseLanes}function Tg(){oe(cf,Gi),oe(Tl,Tl.current)}function wg(){Gi=cf.current,q(Tl),q(cf)}var Wn=k(null),yr=null;function Ds(i){var s=i.alternate;oe(Vt,Vt.current&1),oe(Wn,i),yr===null&&(s===null||Tl.current!==null||s.memoizedState!==null)&&(yr=i)}function bg(i){oe(Vt,Vt.current),oe(Wn,i),yr===null&&(yr=i)}function jT(i){i.tag===22?(oe(Vt,Vt.current),oe(Wn,i),yr===null&&(yr=i)):Ps()}function Ps(){oe(Vt,Vt.current),oe(Wn,Wn.current)}function Xn(i){q(Wn),yr===i&&(yr=null),q(Vt)}var Vt=k(0);function hf(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Cy(o)||Ny(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Li=0,Ce=null,st=null,Gt=null,df=!1,wl=!1,Za=!1,ff=0,Ic=0,bl=null,WC=0;function St(){throw Error(r(321))}function Ig(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Qn(i[o],s[o]))return!1;return!0}function Ag(i,s,o,u,f,p){return Li=p,Ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,j.H=i===null||i.memoizedState===null?ww:zg,Za=!1,p=o(u,f),Za=!1,wl&&(p=BT(s,o,u,f)),zT(i),p}function zT(i){j.H=Rc;var s=st!==null&&st.next!==null;if(Li=0,Gt=st=Ce=null,df=!1,Ic=0,bl=null,s)throw Error(r(300));i===null||Kt||(i=i.dependencies,i!==null&&nf(i)&&(Kt=!0))}function BT(i,s,o,u){Ce=i;var f=0;do{if(wl&&(bl=null),Ic=0,wl=!1,25<=f)throw Error(r(301));if(f+=1,Gt=st=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}j.H=bw,p=s(o,u)}while(wl);return p}function XC(){var i=j.H,s=i.useState()[0];return s=typeof s.then=="function"?Ac(s):s,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(Ce.flags|=1024),s}function Sg(){var i=ff!==0;return ff=0,i}function Rg(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function xg(i){if(df){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}df=!1}Li=0,Gt=st=Ce=null,wl=!1,Ic=ff=0,bl=null}function Rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ce.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function kt(){if(st===null){var i=Ce.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var s=Gt===null?Ce.memoizedState:Gt.next;if(s!==null)Gt=s,st=i;else{if(i===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Gt===null?Ce.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(i){var s=Ic;return Ic+=1,bl===null&&(bl=[]),i=DT(bl,i,s),s=Ce,(Gt===null?s.memoizedState:Gt.next)===null&&(s=s.alternate,j.H=s===null||s.memoizedState===null?ww:zg),i}function pf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ac(i);if(i.$$typeof===X)return dn(i)}throw Error(r(438,String(i)))}function Cg(i){var s=null,o=Ce.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=mf(),Ce.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=P;return s.index++,o}function Ui(i,s){return typeof s=="function"?s(i):s}function gf(i){var s=kt();return Ng(s,st,i)}function Ng(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var I=E=null,D=null,$=s,Z=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(Ue&re)===re:(Li&re)===re){var Q=$.revertLane;if(Q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===yl&&(Z=!0);else if((Li&Q)===Q){$=$.next,Q===yl&&(Z=!0);continue}else re={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(I=D=re,E=p):D=D.next=re,Ce.lanes|=Q,ks|=Q;re=$.action,Za&&o(p,re),p=$.hasEagerState?$.eagerState:o(p,re)}else Q={lane:re,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(I=D=Q,E=p):D=D.next=Q,Ce.lanes|=re,ks|=re;$=$.next}while($!==null&&$!==s);if(D===null?E=p:D.next=I,!Qn(p,i.memoizedState)&&(Kt=!0,Z&&(o=_l,o!==null)))throw o;i.memoizedState=p,i.baseState=E,i.baseQueue=D,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Dg(i){var s=kt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do p=i(p,E.action),E=E.next;while(E!==f);Qn(p,s.memoizedState)||(Kt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function FT(i,s,o){var u=Ce,f=kt(),p=Be;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var E=!Qn((st||f).memoizedState,o);if(E&&(f.memoizedState=o,Kt=!0),f=f.queue,Vg(GT.bind(null,u,f,i),[i]),f.getSnapshot!==s||E||Gt!==null&&Gt.memoizedState.tag&1){if(u.flags|=2048,Il(9,{destroy:void 0},HT.bind(null,u,f,o,s),null),lt===null)throw Error(r(349));p||(Li&127)!==0||qT(u,s,o)}return o}function qT(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Ce.updateQueue,s===null?(s=mf(),Ce.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function HT(i,s,o,u){s.value=o,s.getSnapshot=u,KT(s)&&$T(i)}function GT(i,s,o){return o(function(){KT(s)&&$T(i)})}function KT(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Qn(i,o)}catch{return!0}}function $T(i){var s=Ha(i,2);s!==null&&zn(s,i,2)}function Pg(i){var s=Rn();if(typeof i=="function"){var o=i;if(i=o(),Za){or(!0);try{o()}finally{or(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:i},s}function QT(i,s,o,u){return i.baseState=o,Ng(i,st,typeof u=="function"?u:Ui)}function JC(i,s,o,u,f){if(vf(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};j.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,YT(s,p)):(p.next=o.next,s.pending=o.next=p)}}function YT(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=j.T,E={};j.T=E;try{var I=o(f,u),D=j.S;D!==null&&D(E,I),WT(i,s,I)}catch($){Og(i,s,$)}finally{p!==null&&E.types!==null&&(p.types=E.types),j.T=p}}else try{p=o(f,u),WT(i,s,p)}catch($){Og(i,s,$)}}function WT(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){XT(i,s,u)},function(u){return Og(i,s,u)}):XT(i,s,o)}function XT(i,s,o){s.status="fulfilled",s.value=o,JT(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,YT(i,o)))}function Og(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,JT(s),s=s.next;while(s!==u)}i.action=null}function JT(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function ZT(i,s){return s}function ew(i,s){if(Be){var o=lt.formState;if(o!==null){e:{var u=Ce;if(Be){if(ht){t:{for(var f=ht,p=gr;f.nodeType!==8;){if(!p){f=null;break t}if(f=_r(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){ht=_r(f.nextSibling),u=f.data==="F!";break e}}Ss(u)}u=!1}u&&(s=o[0])}}return o=Rn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZT,lastRenderedState:s},o.queue=u,o=vw.bind(null,Ce,u),u.dispatch=o,u=Pg(!1),p=jg.bind(null,Ce,!1,u.queue),u=Rn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=JC.bind(null,Ce,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function tw(i){var s=kt();return nw(s,st,i)}function nw(i,s,o){if(s=Ng(i,s,ZT)[0],i=gf(Ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ac(s)}catch(E){throw E===vl?af:E}else u=s;s=kt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Ce.flags|=2048,Il(9,{destroy:void 0},ZC.bind(null,f,o),null)),[u,p,i]}function ZC(i,s){i.action=s}function rw(i){var s=kt(),o=st;if(o!==null)return nw(s,o,i);kt(),s=s.memoizedState,o=kt();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Il(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Ce.updateQueue,s===null&&(s=mf(),Ce.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function iw(){return kt().memoizedState}function yf(i,s,o,u){var f=Rn();Ce.flags|=i,f.memoizedState=Il(1|s,{destroy:void 0},o,u===void 0?null:u)}function _f(i,s,o,u){var f=kt();u=u===void 0?null:u;var p=f.memoizedState.inst;st!==null&&u!==null&&Ig(u,st.memoizedState.deps)?f.memoizedState=Il(s,p,o,u):(Ce.flags|=i,f.memoizedState=Il(1|s,p,o,u))}function sw(i,s){yf(8390656,8,i,s)}function Vg(i,s){_f(2048,8,i,s)}function eN(i){Ce.flags|=4;var s=Ce.updateQueue;if(s===null)s=mf(),Ce.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function aw(i){var s=kt().memoizedState;return eN({ref:s,nextImpl:i}),function(){if((We&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function ow(i,s){return _f(4,2,i,s)}function lw(i,s){return _f(4,4,i,s)}function uw(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function cw(i,s,o){o=o!=null?o.concat([i]):null,_f(4,4,uw.bind(null,s,i),o)}function kg(){}function hw(i,s){var o=kt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Ig(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function dw(i,s){var o=kt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Ig(s,u[1]))return u[0];if(u=i(),Za){or(!0);try{i()}finally{or(!1)}}return o.memoizedState=[u,s],u}function Mg(i,s,o){return o===void 0||(Li&1073741824)!==0&&(Ue&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=f0(),Ce.lanes|=i,ks|=i,o)}function fw(i,s,o,u){return Qn(o,s)?o:Tl.current!==null?(i=Mg(i,o,u),Qn(i,s)||(Kt=!0),i):(Li&42)===0||(Li&1073741824)!==0&&(Ue&261930)===0?(Kt=!0,i.memoizedState=o):(i=f0(),Ce.lanes|=i,ks|=i,s)}function mw(i,s,o,u,f){var p=le.p;le.p=p!==0&&8>p?p:8;var E=j.T,I={};j.T=I,jg(i,!1,s,o);try{var D=f(),$=j.S;if($!==null&&$(I,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=YC(D,u);Sc(i,s,Z,er(i))}else Sc(i,s,u,er(i))}catch(re){Sc(i,s,{then:function(){},status:"rejected",reason:re},er())}finally{le.p=p,E!==null&&I.types!==null&&(E.types=I.types),j.T=E}}function tN(){}function Lg(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=pw(i).queue;mw(i,f,s,Te,o===null?tN:function(){return gw(i),o(u)})}function pw(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:Te},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function gw(i){var s=pw(i);s.next===null&&(s=i.alternate.memoizedState),Sc(i,s.next.queue,{},er())}function Ug(){return dn(qc)}function yw(){return kt().memoizedState}function _w(){return kt().memoizedState}function nN(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=er();i=Cs(o);var u=Ns(s,i,o);u!==null&&(zn(u,s,o),Tc(u,s,o)),s={cache:fg()},i.payload=s;return}s=s.return}}function rN(i,s,o){var u=er();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},vf(i)?Ew(s,o):(o=ng(i,s,o,u),o!==null&&(zn(o,i,u),Tw(o,s,u)))}function vw(i,s,o){var u=er();Sc(i,s,o,u)}function Sc(i,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(vf(i))Ew(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,I=p(E,o);if(f.hasEagerState=!0,f.eagerState=I,Qn(I,E))return Jd(i,s,f,0),lt===null&&Xd(),!1}catch{}finally{}if(o=ng(i,s,f,u),o!==null)return zn(o,i,u),Tw(o,s,u),!0}return!1}function jg(i,s,o,u){if(u={lane:2,revertLane:yy(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},vf(i)){if(s)throw Error(r(479))}else s=ng(i,o,u,2),s!==null&&zn(s,i,2)}function vf(i){var s=i.alternate;return i===Ce||s!==null&&s===Ce}function Ew(i,s){wl=df=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function Tw(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qu(i,o)}}var Rc={readContext:dn,use:pf,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Rc.useEffectEvent=St;var ww={readContext:dn,use:pf,useCallback:function(i,s){return Rn().memoizedState=[i,s===void 0?null:s],i},useContext:dn,useEffect:sw,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,yf(4194308,4,uw.bind(null,s,i),o)},useLayoutEffect:function(i,s){return yf(4194308,4,i,s)},useInsertionEffect:function(i,s){yf(4,2,i,s)},useMemo:function(i,s){var o=Rn();s=s===void 0?null:s;var u=i();if(Za){or(!0);try{i()}finally{or(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Rn();if(o!==void 0){var f=o(s);if(Za){or(!0);try{o(s)}finally{or(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=rN.bind(null,Ce,i),[u.memoizedState,i]},useRef:function(i){var s=Rn();return i={current:i},s.memoizedState=i},useState:function(i){i=Pg(i);var s=i.queue,o=vw.bind(null,Ce,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:kg,useDeferredValue:function(i,s){var o=Rn();return Mg(o,i,s)},useTransition:function(){var i=Pg(!1);return i=mw.bind(null,Ce,i.queue,!0,!1),Rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Ce,f=Rn();if(Be){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),lt===null)throw Error(r(349));(Ue&127)!==0||qT(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,sw(GT.bind(null,u,p,i),[i]),u.flags|=2048,Il(9,{destroy:void 0},HT.bind(null,u,p,o,s),null),o},useId:function(){var i=Rn(),s=lt.identifierPrefix;if(Be){var o=ui,u=li;o=(u&~(1<<32-Pt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=ff++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=WC++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Ug,useFormState:ew,useActionState:ew,useOptimistic:function(i){var s=Rn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=jg.bind(null,Ce,!0,o),o.dispatch=s,[i,s]},useMemoCache:Cg,useCacheRefresh:function(){return Rn().memoizedState=nN.bind(null,Ce)},useEffectEvent:function(i){var s=Rn(),o={impl:i};return s.memoizedState=o,function(){if((We&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},zg={readContext:dn,use:pf,useCallback:hw,useContext:dn,useEffect:Vg,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:lw,useMemo:dw,useReducer:gf,useRef:iw,useState:function(){return gf(Ui)},useDebugValue:kg,useDeferredValue:function(i,s){var o=kt();return fw(o,st.memoizedState,i,s)},useTransition:function(){var i=gf(Ui)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:Ac(i),s]},useSyncExternalStore:FT,useId:yw,useHostTransitionStatus:Ug,useFormState:tw,useActionState:tw,useOptimistic:function(i,s){var o=kt();return QT(o,st,i,s)},useMemoCache:Cg,useCacheRefresh:_w};zg.useEffectEvent=aw;var bw={readContext:dn,use:pf,useCallback:hw,useContext:dn,useEffect:Vg,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:lw,useMemo:dw,useReducer:Dg,useRef:iw,useState:function(){return Dg(Ui)},useDebugValue:kg,useDeferredValue:function(i,s){var o=kt();return st===null?Mg(o,i,s):fw(o,st.memoizedState,i,s)},useTransition:function(){var i=Dg(Ui)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:Ac(i),s]},useSyncExternalStore:FT,useId:yw,useHostTransitionStatus:Ug,useFormState:rw,useActionState:rw,useOptimistic:function(i,s){var o=kt();return st!==null?QT(o,st,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Cg,useCacheRefresh:_w};bw.useEffectEvent=aw;function Bg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Fg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=er(),f=Cs(u);f.payload=s,o!=null&&(f.callback=o),s=Ns(i,f,u),s!==null&&(zn(s,i,u),Tc(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=er(),f=Cs(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ns(i,f,u),s!==null&&(zn(s,i,u),Tc(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=er(),u=Cs(o);u.tag=2,s!=null&&(u.callback=s),s=Ns(i,u,o),s!==null&&(zn(s,i,o),Tc(s,i,o))}};function Iw(i,s,o,u,f,p,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,E):s.prototype&&s.prototype.isPureReactComponent?!fc(o,u)||!fc(f,p):!0}function Aw(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&Fg.enqueueReplaceState(s,s.state,null)}function eo(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=v({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function Sw(i){Wd(i)}function Rw(i){console.error(i)}function xw(i){Wd(i)}function Ef(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Cw(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qg(i,s,o){return o=Cs(o),o.tag=3,o.payload={element:null},o.callback=function(){Ef(i,s)},o}function Nw(i){return i=Cs(i),i.tag=3,i}function Dw(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){Cw(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Cw(s,o,u),typeof f!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function iN(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&gl(s,o,f,!0),o=Wn.current,o!==null){switch(o.tag){case 31:case 13:return yr===null?Pf():o.alternate===null&&Rt===0&&(Rt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===of?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),my(i,u,f)),!1;case 22:return o.flags|=65536,u===of?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),my(i,u,f)),!1}throw Error(r(435,o.tag))}return my(i,u,f),Pf(),!1}if(Be)return s=Wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==lg&&(i=Error(r(422),{cause:u}),gc(fr(i,o)))):(u!==lg&&(s=Error(r(423),{cause:u}),gc(fr(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=fr(u,o),f=qg(i.stateNode,u,f),vg(i,f),Rt!==4&&(Rt=2)),!1;var p=Error(r(520),{cause:u});if(p=fr(p,o),kc===null?kc=[p]:kc.push(p),Rt!==4&&(Rt=2),s===null)return!0;u=fr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=qg(o.stateNode,u,i),vg(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ms===null||!Ms.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Nw(f),Dw(f,i,o,u),vg(o,f),!1}o=o.return}while(o!==null);return!1}var Hg=Error(r(461)),Kt=!1;function fn(i,s,o,u){s.child=i===null?kT(s,null,o,u):Ja(s,i.child,o,u)}function Pw(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var E={};for(var I in u)I!=="ref"&&(E[I]=u[I])}else E=u;return Qa(s),u=Ag(i,s,o,E,p,f),I=Sg(),i!==null&&!Kt?(Rg(i,s,f),ji(i,s,f)):(Be&&I&&ag(s),s.flags|=1,fn(i,s,u,f),s.child)}function Ow(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!rg(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,Vw(i,s,p,u,f)):(i=ef(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Jg(i,f)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:fc,o(E,u)&&i.ref===s.ref)return ji(i,s,f)}return s.flags|=1,i=Oi(p,u),i.ref=s.ref,i.return=s,s.child=i}function Vw(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(fc(p,u)&&i.ref===s.ref)if(Kt=!1,s.pendingProps=u=p,Jg(i,f))(i.flags&131072)!==0&&(Kt=!0);else return s.lanes=i.lanes,ji(i,s,f)}return Gg(i,s,o,u,f)}function kw(i,s,o,u){var f=u.children,p=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,i!==null){for(u=s.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,s.child=null;return Mw(i,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&sf(s,p!==null?p.cachePool:null),p!==null?UT(s,p):Tg(),jT(s);else return u=s.lanes=536870912,Mw(i,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(sf(s,p.cachePool),UT(s,p),Ps(),s.memoizedState=null):(i!==null&&sf(s,null),Tg(),Ps());return fn(i,s,f,o),s.child}function xc(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Mw(i,s,o,u,f){var p=pg();return p=p===null?null:{parent:Ht._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},i!==null&&sf(s,null),Tg(),jT(s),i!==null&&gl(i,s,u,!0),s.childLanes=f,null}function Tf(i,s){return s=bf({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Lw(i,s,o){return Ja(s,i.child,null,o),i=Tf(s,s.pendingProps),i.flags|=2,Xn(s),s.memoizedState=null,i}function sN(i,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Be){if(u.mode==="hidden")return i=Tf(s,u),s.lanes=536870912,xc(null,i);if(bg(s),(i=ht)?(i=Y0(i,gr),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Is!==null?{id:li,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},o=ET(i),o.return=s,s.child=o,hn=s,ht=null)):i=null,i===null)throw Ss(s);return s.lanes=536870912,null}return Tf(s,u)}var p=i.memoizedState;if(p!==null){var E=p.dehydrated;if(bg(s),f)if(s.flags&256)s.flags&=-257,s=Lw(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Kt||gl(i,s,o,!1),f=(o&i.childLanes)!==0,Kt||f){if(u=lt,u!==null&&(E=Yu(u,o),E!==0&&E!==p.retryLane))throw p.retryLane=E,Ha(i,E),zn(u,i,E),Hg;Pf(),s=Lw(i,s,o)}else i=p.treeContext,ht=_r(E.nextSibling),hn=s,Be=!0,As=null,gr=!1,i!==null&&bT(s,i),s=Tf(s,u),s.flags|=4096;return s}return i=Oi(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function wf(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Gg(i,s,o,u,f){return Qa(s),o=Ag(i,s,o,u,void 0,f),u=Sg(),i!==null&&!Kt?(Rg(i,s,f),ji(i,s,f)):(Be&&u&&ag(s),s.flags|=1,fn(i,s,o,f),s.child)}function Uw(i,s,o,u,f,p){return Qa(s),s.updateQueue=null,o=BT(s,u,o,f),zT(i),u=Sg(),i!==null&&!Kt?(Rg(i,s,p),ji(i,s,p)):(Be&&u&&ag(s),s.flags|=1,fn(i,s,o,p),s.child)}function jw(i,s,o,u,f){if(Qa(s),s.stateNode===null){var p=dl,E=o.contextType;typeof E=="object"&&E!==null&&(p=dn(E)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Fg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},yg(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?dn(E):dl,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Bg(s,o,E,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Fg.enqueueReplaceState(p,p.state,null),bc(s,u,p,f),wc(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var I=s.memoizedProps,D=eo(o,I);p.props=D;var $=p.context,Z=o.contextType;E=dl,typeof Z=="object"&&Z!==null&&(E=dn(Z));var re=o.getDerivedStateFromProps;Z=typeof re=="function"||typeof p.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(I||$!==E)&&Aw(s,p,u,E),xs=!1;var Q=s.memoizedState;p.state=Q,bc(s,u,p,f),wc(),$=s.memoizedState,I||Q!==$||xs?(typeof re=="function"&&(Bg(s,o,re,u),$=s.memoizedState),(D=xs||Iw(s,o,D,u,Q,$,E))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=$),p.props=u,p.state=$,p.context=E,u=D):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,_g(i,s),E=s.memoizedProps,Z=eo(o,E),p.props=Z,re=s.pendingProps,Q=p.context,$=o.contextType,D=dl,typeof $=="object"&&$!==null&&(D=dn($)),I=o.getDerivedStateFromProps,($=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==re||Q!==D)&&Aw(s,p,u,D),xs=!1,Q=s.memoizedState,p.state=Q,bc(s,u,p,f),wc();var J=s.memoizedState;E!==re||Q!==J||xs||i!==null&&i.dependencies!==null&&nf(i.dependencies)?(typeof I=="function"&&(Bg(s,o,I,u),J=s.memoizedState),(Z=xs||Iw(s,o,Z,u,Q,J,D)||i!==null&&i.dependencies!==null&&nf(i.dependencies))?($||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,J,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,J,D)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=J),p.props=u,p.state=J,p.context=D,u=Z):(typeof p.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,wf(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=Ja(s,i.child,null,f),s.child=Ja(s,null,o,f)):fn(i,s,o,f),s.memoizedState=p.state,i=s.child):i=ji(i,s,f),i}function zw(i,s,o,u){return Ka(),s.flags|=256,fn(i,s,o,u),s.child}var Kg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $g(i){return{baseLanes:i,cachePool:CT()}}function Qg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=Zn),i}function Bw(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=i!==null&&i.memoizedState===null?!1:(Vt.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,i===null){if(Be){if(f?Ds(s):Ps(),(i=ht)?(i=Y0(i,gr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Is!==null?{id:li,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},o=ET(i),o.return=s,s.child=o,hn=s,ht=null)):i=null,i===null)throw Ss(s);return Ny(i)?s.lanes=32:s.lanes=536870912,null}var I=u.children;return u=u.fallback,f?(Ps(),f=s.mode,I=bf({mode:"hidden",children:I},f),u=Ga(u,f,o,null),I.return=s,u.return=s,I.sibling=u,s.child=I,u=s.child,u.memoizedState=$g(o),u.childLanes=Qg(i,E,o),s.memoizedState=Kg,xc(null,u)):(Ds(s),Yg(s,I))}var D=i.memoizedState;if(D!==null&&(I=D.dehydrated,I!==null)){if(p)s.flags&256?(Ds(s),s.flags&=-257,s=Wg(i,s,o)):s.memoizedState!==null?(Ps(),s.child=i.child,s.flags|=128,s=null):(Ps(),I=u.fallback,f=s.mode,u=bf({mode:"visible",children:u.children},f),I=Ga(I,f,o,null),I.flags|=2,u.return=s,I.return=s,u.sibling=I,s.child=u,Ja(s,i.child,null,o),u=s.child,u.memoizedState=$g(o),u.childLanes=Qg(i,E,o),s.memoizedState=Kg,s=xc(null,u));else if(Ds(s),Ny(I)){if(E=I.nextSibling&&I.nextSibling.dataset,E)var $=E.dgst;E=$,u=Error(r(419)),u.stack="",u.digest=E,gc({value:u,source:null,stack:null}),s=Wg(i,s,o)}else if(Kt||gl(i,s,o,!1),E=(o&i.childLanes)!==0,Kt||E){if(E=lt,E!==null&&(u=Yu(E,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Ha(i,u),zn(E,i,u),Hg;Cy(I)||Pf(),s=Wg(i,s,o)}else Cy(I)?(s.flags|=192,s.child=i.child,s=null):(i=D.treeContext,ht=_r(I.nextSibling),hn=s,Be=!0,As=null,gr=!1,i!==null&&bT(s,i),s=Yg(s,u.children),s.flags|=4096);return s}return f?(Ps(),I=u.fallback,f=s.mode,D=i.child,$=D.sibling,u=Oi(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,$!==null?I=Oi($,I):(I=Ga(I,f,o,null),I.flags|=2),I.return=s,u.return=s,u.sibling=I,s.child=u,xc(null,u),u=s.child,I=i.child.memoizedState,I===null?I=$g(o):(f=I.cachePool,f!==null?(D=Ht._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=CT(),I={baseLanes:I.baseLanes|o,cachePool:f}),u.memoizedState=I,u.childLanes=Qg(i,E,o),s.memoizedState=Kg,xc(i.child,u)):(Ds(s),o=i.child,i=o.sibling,o=Oi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(E=s.deletions,E===null?(s.deletions=[i],s.flags|=16):E.push(i)),s.child=o,s.memoizedState=null,o)}function Yg(i,s){return s=bf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function bf(i,s){return i=Yn(22,i,null,s),i.lanes=0,i}function Wg(i,s,o){return Ja(s,i.child,null,o),i=Yg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Fw(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),hg(i.return,s,o)}function Xg(i,s,o,u,f,p){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=o,E.tailMode=f,E.treeForkCount=p)}function qw(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var E=Vt.current,I=(E&2)!==0;if(I?(E=E&1|2,s.flags|=128):E&=1,oe(Vt,E),fn(i,s,u,o),u=Be?pc:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fw(i,o,s);else if(i.tag===19)Fw(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&hf(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Xg(s,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&hf(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Xg(s,!0,o,null,p,u);break;case"together":Xg(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ji(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),ks|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(gl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Oi(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Oi(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Jg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&nf(i)))}function aN(i,s,o){switch(s.tag){case 3:Xt(s,s.stateNode.containerInfo),Rs(s,Ht,i.memoizedState.cache),Ka();break;case 27:case 5:Sa(s);break;case 4:Xt(s,s.stateNode.containerInfo);break;case 10:Rs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,bg(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ds(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Bw(i,s,o):(Ds(s),i=ji(i,s,o),i!==null?i.sibling:null);Ds(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(gl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return qw(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Vt,Vt.current),u)break;return null;case 22:return s.lanes=0,kw(i,s,o,s.pendingProps);case 24:Rs(s,Ht,i.memoizedState.cache)}return ji(i,s,o)}function Hw(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Kt=!0;else{if(!Jg(i,o)&&(s.flags&128)===0)return Kt=!1,aN(i,s,o);Kt=(i.flags&131072)!==0}else Kt=!1,Be&&(s.flags&1048576)!==0&&wT(s,pc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=Wa(s.elementType),s.type=i,typeof i=="function")rg(i)?(u=eo(i,u),s.tag=1,s=jw(null,s,i,u,o)):(s.tag=0,s=Gg(null,s,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===ge){s.tag=11,s=Pw(null,s,i,u,o);break e}else if(f===x){s.tag=14,s=Ow(null,s,i,u,o);break e}}throw s=He(i)||i,Error(r(306,s,""))}}return s;case 0:return Gg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=eo(u,s.pendingProps),jw(i,s,u,f,o);case 3:e:{if(Xt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,_g(i,s),bc(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Rs(s,Ht,u),u!==p.cache&&dg(s,[Ht],o,!0),wc(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=zw(i,s,u,o);break e}else if(u!==f){f=fr(Error(r(424)),s),gc(f),s=zw(i,s,u,o);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ht=_r(i.firstChild),hn=s,Be=!0,As=null,gr=!0,o=kT(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ka(),u===f){s=ji(i,s,o);break e}fn(i,s,u,o)}s=s.child}return s;case 26:return wf(i,s),i===null?(o=tb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Be||(o=s.type,i=s.pendingProps,u=jf(De.current).createElement(o),u[Bt]=s,u[nn]=i,mn(u,o,i),Ft(u),s.stateNode=u):s.memoizedState=tb(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Sa(s),i===null&&Be&&(u=s.stateNode=J0(s.type,s.pendingProps,De.current),hn=s,gr=!0,f=ht,zs(s.type)?(Dy=f,ht=_r(u.firstChild)):ht=f),fn(i,s,s.pendingProps.children,o),wf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Be&&((f=u=ht)&&(u=MN(u,s.type,s.pendingProps,gr),u!==null?(s.stateNode=u,hn=s,ht=_r(u.firstChild),gr=!1,f=!0):f=!1),f||Ss(s)),Sa(s),f=s.type,p=s.pendingProps,E=i!==null?i.memoizedProps:null,u=p.children,Sy(f,p)?u=null:E!==null&&Sy(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=Ag(i,s,XC,null,null,o),qc._currentValue=f),wf(i,s),fn(i,s,u,o),s.child;case 6:return i===null&&Be&&((i=o=ht)&&(o=LN(o,s.pendingProps,gr),o!==null?(s.stateNode=o,hn=s,ht=null,i=!0):i=!1),i||Ss(s)),null;case 13:return Bw(i,s,o);case 4:return Xt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ja(s,null,u,o):fn(i,s,u,o),s.child;case 11:return Pw(i,s,s.type,s.pendingProps,o);case 7:return fn(i,s,s.pendingProps,o),s.child;case 8:return fn(i,s,s.pendingProps.children,o),s.child;case 12:return fn(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Rs(s,s.type,u.value),fn(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Qa(s),f=dn(f),u=u(f),s.flags|=1,fn(i,s,u,o),s.child;case 14:return Ow(i,s,s.type,s.pendingProps,o);case 15:return Vw(i,s,s.type,s.pendingProps,o);case 19:return qw(i,s,o);case 31:return sN(i,s,o);case 22:return kw(i,s,o,s.pendingProps);case 24:return Qa(s),u=dn(Ht),i===null?(f=pg(),f===null&&(f=lt,p=fg(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},yg(s),Rs(s,Ht,f)):((i.lanes&o)!==0&&(_g(i,s),bc(s,null,null,o),wc()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Rs(s,Ht,u)):(u=p.cache,Rs(s,Ht,u),u!==f.cache&&dg(s,[Ht],o,!0))),fn(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function zi(i){i.flags|=4}function Zg(i,s,o,u,f){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(y0())i.flags|=8192;else throw Xa=of,gg}else i.flags&=-16777217}function Gw(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ab(s))if(y0())i.flags|=8192;else throw Xa=of,gg}function If(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Cd():536870912,i.lanes|=s,xl|=s)}function Cc(i,s){if(!Be)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function dt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function oN(i,s,o){var u=s.pendingProps;switch(og(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(s),null;case 1:return dt(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Mi(Ht),mt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(pl(s)?zi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ug())),dt(s),null;case 26:var f=s.type,p=s.memoizedState;return i===null?(zi(s),p!==null?(dt(s),Gw(s,p)):(dt(s),Zg(s,f,null,u,o))):p?p!==i.memoizedState?(zi(s),dt(s),Gw(s,p)):(dt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&zi(s),dt(s),Zg(s,f,i,u,o)),null;case 27:if($o(s),o=De.current,f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&zi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return dt(s),null}i=me.current,pl(s)?IT(s):(i=J0(f,u,o),s.stateNode=i,zi(s))}return dt(s),null;case 5:if($o(s),f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&zi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return dt(s),null}if(p=me.current,pl(s))IT(s);else{var E=jf(De.current);switch(p){case 1:p=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=E.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?E.createElement(f,{is:u.is}):E.createElement(f)}}p[Bt]=s,p[nn]=u;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)p.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=p;e:switch(mn(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&zi(s)}}return dt(s),Zg(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&zi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=De.current,pl(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=hn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Bt]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||B0(i.nodeValue,o)),i||Ss(s,!0)}else i=jf(i).createTextNode(u),i[Bt]=s,s.stateNode=i}return dt(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=pl(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Bt]=s}else Ka(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),i=!1}else o=ug(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(Xn(s),s):(Xn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return dt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=pl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Bt]=s}else Ka(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),f=!1}else f=ug(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Xn(s),s):(Xn(s),null)}return Xn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),If(s,s.updateQueue),dt(s),null);case 4:return mt(),i===null&&Ty(s.stateNode.containerInfo),dt(s),null;case 10:return Mi(s.type),dt(s),null;case 19:if(q(Vt),u=s.memoizedState,u===null)return dt(s),null;if(f=(s.flags&128)!==0,p=u.rendering,p===null)if(f)Cc(u,!1);else{if(Rt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=hf(i),p!==null){for(s.flags|=128,Cc(u,!1),i=p.updateQueue,s.updateQueue=i,If(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)vT(o,i),o=o.sibling;return oe(Vt,Vt.current&1|2),Be&&Vi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&An()>Cf&&(s.flags|=128,f=!0,Cc(u,!1),s.lanes=4194304)}else{if(!f)if(i=hf(p),i!==null){if(s.flags|=128,f=!0,i=i.updateQueue,s.updateQueue=i,If(s,i),Cc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Be)return dt(s),null}else 2*An()-u.renderingStartTime>Cf&&o!==536870912&&(s.flags|=128,f=!0,Cc(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(i=u.last,i!==null?i.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=An(),i.sibling=null,o=Vt.current,oe(Vt,f?o&1|2:o&1),Be&&Vi(s,u.treeForkCount),i):(dt(s),null);case 22:case 23:return Xn(s),wg(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(dt(s),s.subtreeFlags&6&&(s.flags|=8192)):dt(s),o=s.updateQueue,o!==null&&If(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&q(Ya),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Mi(Ht),dt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function lN(i,s){switch(og(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Mi(Ht),mt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return $o(s),null;case 31:if(s.memoizedState!==null){if(Xn(s),s.alternate===null)throw Error(r(340));Ka()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Xn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ka()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return q(Vt),null;case 4:return mt(),null;case 10:return Mi(s.type),null;case 22:case 23:return Xn(s),wg(),i!==null&&q(Ya),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Mi(Ht),null;case 25:return null;default:return null}}function Kw(i,s){switch(og(s),s.tag){case 3:Mi(Ht),mt();break;case 26:case 27:case 5:$o(s);break;case 4:mt();break;case 31:s.memoizedState!==null&&Xn(s);break;case 13:Xn(s);break;case 19:q(Vt);break;case 10:Mi(s.type);break;case 22:case 23:Xn(s),wg(),i!==null&&q(Ya);break;case 24:Mi(Ht)}}function Nc(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==f)}}catch(I){et(s,s.return,I)}}function Os(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var E=u.inst,I=E.destroy;if(I!==void 0){E.destroy=void 0,f=s;var D=o,$=I;try{$()}catch(Z){et(f,D,Z)}}}u=u.next}while(u!==p)}}catch(Z){et(s,s.return,Z)}}function $w(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{LT(s,o)}catch(u){et(i,i.return,u)}}}function Qw(i,s,o){o.props=eo(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){et(i,s,u)}}function Dc(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){et(i,s,f)}}function ci(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){et(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){et(i,s,f)}else o.current=null}function Yw(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){et(i,i.return,f)}}function ey(i,s,o){try{var u=i.stateNode;NN(u,i.type,o,s),u[nn]=s}catch(f){et(i,i.return,f)}}function Ww(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&zs(i.type)||i.tag===4}function ty(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ww(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ny(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Cr));else if(u!==4&&(u===27&&zs(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(ny(i,s,o),i=i.sibling;i!==null;)ny(i,s,o),i=i.sibling}function Af(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&zs(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Af(i,s,o),i=i.sibling;i!==null;)Af(i,s,o),i=i.sibling}function Xw(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);mn(s,u,o),s[Bt]=i,s[nn]=o}catch(p){et(i,i.return,p)}}var Bi=!1,$t=!1,ry=!1,Jw=typeof WeakSet=="function"?WeakSet:Set,sn=null;function uN(i,s){if(i=i.containerInfo,Iy=Kf,i=cT(i),Wp(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,I=-1,D=-1,$=0,Z=0,re=i,Q=null;t:for(;;){for(var J;re!==o||f!==0&&re.nodeType!==3||(I=E+f),re!==p||u!==0&&re.nodeType!==3||(D=E+u),re.nodeType===3&&(E+=re.nodeValue.length),(J=re.firstChild)!==null;)Q=re,re=J;for(;;){if(re===i)break t;if(Q===o&&++$===f&&(I=E),Q===p&&++Z===u&&(D=E),(J=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=J}o=I===-1||D===-1?null:{start:I,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ay={focusedElem:i,selectionRange:o},Kf=!1,sn=s;sn!==null;)if(s=sn,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,sn=i;else for(;sn!==null;){switch(s=sn,p=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var ye=eo(o.type,f);i=u.getSnapshotBeforeUpdate(ye,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){et(o,o.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)xy(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":xy(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,sn=i;break}sn=s.return}}function Zw(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:qi(i,o),u&4&&Nc(5,o);break;case 1:if(qi(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(E){et(o,o.return,E)}else{var f=eo(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(E){et(o,o.return,E)}}u&64&&$w(o),u&512&&Dc(o,o.return);break;case 3:if(qi(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{LT(i,s)}catch(E){et(o,o.return,E)}}break;case 27:s===null&&u&4&&Xw(o);case 26:case 5:qi(i,o),s===null&&u&4&&Yw(o),u&512&&Dc(o,o.return);break;case 12:qi(i,o);break;case 31:qi(i,o),u&4&&n0(i,o);break;case 13:qi(i,o),u&4&&r0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=_N.bind(null,o),UN(i,o))));break;case 22:if(u=o.memoizedState!==null||Bi,!u){s=s!==null&&s.memoizedState!==null||$t,f=Bi;var p=$t;Bi=u,($t=s)&&!p?Hi(i,o,(o.subtreeFlags&8772)!==0):qi(i,o),Bi=f,$t=p}break;case 30:break;default:qi(i,o)}}function e0(i){var s=i.alternate;s!==null&&(i.alternate=null,e0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Jo(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var gt=null,Mn=!1;function Fi(i,s,o){for(o=o.child;o!==null;)t0(i,s,o),o=o.sibling}function t0(i,s,o){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Ar,o)}catch{}switch(o.tag){case 26:$t||ci(o,s),Fi(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:$t||ci(o,s);var u=gt,f=Mn;zs(o.type)&&(gt=o.stateNode,Mn=!1),Fi(i,s,o),zc(o.stateNode),gt=u,Mn=f;break;case 5:$t||ci(o,s);case 6:if(u=gt,f=Mn,gt=null,Fi(i,s,o),gt=u,Mn=f,gt!==null)if(Mn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(p){et(o,s,p)}else try{gt.removeChild(o.stateNode)}catch(p){et(o,s,p)}break;case 18:gt!==null&&(Mn?(i=gt,$0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Ml(i)):$0(gt,o.stateNode));break;case 4:u=gt,f=Mn,gt=o.stateNode.containerInfo,Mn=!0,Fi(i,s,o),gt=u,Mn=f;break;case 0:case 11:case 14:case 15:Os(2,o,s),$t||Os(4,o,s),Fi(i,s,o);break;case 1:$t||(ci(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Qw(o,s,u)),Fi(i,s,o);break;case 21:Fi(i,s,o);break;case 22:$t=(u=$t)||o.memoizedState!==null,Fi(i,s,o),$t=u;break;default:Fi(i,s,o)}}function n0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ml(i)}catch(o){et(s,s.return,o)}}}function r0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ml(i)}catch(o){et(s,s.return,o)}}function cN(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Jw),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Jw),s;default:throw Error(r(435,i.tag))}}function Sf(i,s){var o=cN(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=vN.bind(null,i,u);u.then(f,f)}})}function Ln(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,E=s,I=E;e:for(;I!==null;){switch(I.tag){case 27:if(zs(I.type)){gt=I.stateNode,Mn=!1;break e}break;case 5:gt=I.stateNode,Mn=!1;break e;case 3:case 4:gt=I.stateNode.containerInfo,Mn=!0;break e}I=I.return}if(gt===null)throw Error(r(160));t0(p,E,f),gt=null,Mn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)i0(s,i),s=s.sibling}var kr=null;function i0(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ln(s,i),Un(i),u&4&&(Os(3,i,i.return),Nc(3,i),Os(5,i,i.return));break;case 1:Ln(s,i),Un(i),u&512&&($t||o===null||ci(o,o.return)),u&64&&Bi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=kr;if(Ln(s,i),Un(i),u&512&&($t||o===null||ci(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Wr]||p[Bt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),mn(p,u,o),p[Bt]=i,Ft(p),u=p;break e;case"link":var E=ib("link","href",f).get(u+(o.href||""));if(E){for(var I=0;I<E.length;I++)if(p=E[I],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(I,1);break t}}p=f.createElement(u),mn(p,u,o),f.head.appendChild(p);break;case"meta":if(E=ib("meta","content",f).get(u+(o.content||""))){for(I=0;I<E.length;I++)if(p=E[I],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(I,1);break t}}p=f.createElement(u),mn(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Bt]=i,Ft(p),u=p}i.stateNode=u}else sb(f,i.type,i.stateNode);else i.stateNode=rb(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?sb(f,i.type,i.stateNode):rb(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&ey(i,i.memoizedProps,o.memoizedProps)}break;case 27:Ln(s,i),Un(i),u&512&&($t||o===null||ci(o,o.return)),o!==null&&u&4&&ey(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Ln(s,i),Un(i),u&512&&($t||o===null||ci(o,o.return)),i.flags&32){f=i.stateNode;try{kn(f,"")}catch(ye){et(i,i.return,ye)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,ey(i,f,o!==null?o.memoizedProps:f)),u&1024&&(ry=!0);break;case 6:if(Ln(s,i),Un(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(ye){et(i,i.return,ye)}}break;case 3:if(Ff=null,f=kr,kr=zf(s.containerInfo),Ln(s,i),kr=f,Un(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ml(s.containerInfo)}catch(ye){et(i,i.return,ye)}ry&&(ry=!1,s0(i));break;case 4:u=kr,kr=zf(i.stateNode.containerInfo),Ln(s,i),Un(i),kr=u;break;case 12:Ln(s,i),Un(i);break;case 31:Ln(s,i),Un(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sf(i,u)));break;case 13:Ln(s,i),Un(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(xf=An()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sf(i,u)));break;case 22:f=i.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,$=Bi,Z=$t;if(Bi=$||f,$t=Z||D,Ln(s,i),$t=Z,Bi=$,Un(i),u&8192)e:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||D||Bi||$t||to(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(p=D.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{I=D.stateNode;var re=D.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ye){et(D,D.return,ye)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(ye){et(D,D.return,ye)}}}else if(s.tag===18){if(o===null){D=s;try{var J=D.stateNode;f?Q0(J,!0):Q0(D.stateNode,!1)}catch(ye){et(D,D.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Sf(i,o))));break;case 19:Ln(s,i),Un(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sf(i,u)));break;case 30:break;case 21:break;default:Ln(s,i),Un(i)}}function Un(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(Ww(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=ty(i);Af(i,p,f);break;case 5:var E=o.stateNode;o.flags&32&&(kn(E,""),o.flags&=-33);var I=ty(i);Af(i,I,E);break;case 3:case 4:var D=o.stateNode.containerInfo,$=ty(i);ny(i,$,D);break;default:throw Error(r(161))}}catch(Z){et(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function s0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;s0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function qi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Zw(i,s.alternate,s),s=s.sibling}function to(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Os(4,s,s.return),to(s);break;case 1:ci(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Qw(s,s.return,o),to(s);break;case 27:zc(s.stateNode);case 26:case 5:ci(s,s.return),to(s);break;case 22:s.memoizedState===null&&to(s);break;case 30:to(s);break;default:to(s)}i=i.sibling}}function Hi(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:Hi(f,p,o),Nc(4,p);break;case 1:if(Hi(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){et(u,u.return,$)}if(u=p,f=u.updateQueue,f!==null){var I=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)MT(D[f],I)}catch($){et(u,u.return,$)}}o&&E&64&&$w(p),Dc(p,p.return);break;case 27:Xw(p);case 26:case 5:Hi(f,p,o),o&&u===null&&E&4&&Yw(p),Dc(p,p.return);break;case 12:Hi(f,p,o);break;case 31:Hi(f,p,o),o&&E&4&&n0(f,p);break;case 13:Hi(f,p,o),o&&E&4&&r0(f,p);break;case 22:p.memoizedState===null&&Hi(f,p,o),Dc(p,p.return);break;case 30:break;default:Hi(f,p,o)}s=s.sibling}}function iy(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&yc(o))}function sy(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&yc(i))}function Mr(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)a0(i,s,o,u),s=s.sibling}function a0(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Mr(i,s,o,u),f&2048&&Nc(9,s);break;case 1:Mr(i,s,o,u);break;case 3:Mr(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&yc(i)));break;case 12:if(f&2048){Mr(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,E=p.id,I=p.onPostCommit;typeof I=="function"&&I(E,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){et(s,s.return,D)}}else Mr(i,s,o,u);break;case 31:Mr(i,s,o,u);break;case 13:Mr(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?Mr(i,s,o,u):Pc(i,s):p._visibility&2?Mr(i,s,o,u):(p._visibility|=2,Al(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&iy(E,s);break;case 24:Mr(i,s,o,u),f&2048&&sy(s.alternate,s);break;default:Mr(i,s,o,u)}}function Al(i,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=i,E=s,I=o,D=u,$=E.flags;switch(E.tag){case 0:case 11:case 15:Al(p,E,I,D,f),Nc(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Al(p,E,I,D,f):Pc(p,E):(Z._visibility|=2,Al(p,E,I,D,f)),f&&$&2048&&iy(E.alternate,E);break;case 24:Al(p,E,I,D,f),f&&$&2048&&sy(E.alternate,E);break;default:Al(p,E,I,D,f)}s=s.sibling}}function Pc(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:Pc(o,u),f&2048&&iy(u.alternate,u);break;case 24:Pc(o,u),f&2048&&sy(u.alternate,u);break;default:Pc(o,u)}s=s.sibling}}var Oc=8192;function Sl(i,s,o){if(i.subtreeFlags&Oc)for(i=i.child;i!==null;)o0(i,s,o),i=i.sibling}function o0(i,s,o){switch(i.tag){case 26:Sl(i,s,o),i.flags&Oc&&i.memoizedState!==null&&WN(o,kr,i.memoizedState,i.memoizedProps);break;case 5:Sl(i,s,o);break;case 3:case 4:var u=kr;kr=zf(i.stateNode.containerInfo),Sl(i,s,o),kr=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Oc,Oc=16777216,Sl(i,s,o),Oc=u):Sl(i,s,o));break;default:Sl(i,s,o)}}function l0(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Vc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,c0(u,i)}l0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)u0(i),i=i.sibling}function u0(i){switch(i.tag){case 0:case 11:case 15:Vc(i),i.flags&2048&&Os(9,i,i.return);break;case 3:Vc(i);break;case 12:Vc(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Rf(i)):Vc(i);break;default:Vc(i)}}function Rf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,c0(u,i)}l0(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Os(8,s,s.return),Rf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Rf(s));break;default:Rf(s)}i=i.sibling}}function c0(i,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:Os(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:yc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=i;sn!==null;){u=sn;var f=u.sibling,p=u.return;if(e0(u),u===o){sn=null;break e}if(f!==null){f.return=p,sn=f;break e}sn=p}}}var hN={getCacheForType:function(i){var s=dn(Ht),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return dn(Ht).controller.signal}},dN=typeof WeakMap=="function"?WeakMap:Map,We=0,lt=null,Ve=null,Ue=0,Ze=0,Jn=null,Vs=!1,Rl=!1,ay=!1,Gi=0,Rt=0,ks=0,no=0,oy=0,Zn=0,xl=0,kc=null,jn=null,ly=!1,xf=0,h0=0,Cf=1/0,Nf=null,Ms=null,Zt=0,Ls=null,Cl=null,Ki=0,uy=0,cy=null,d0=null,Mc=0,hy=null;function er(){return(We&2)!==0&&Ue!==0?Ue&-Ue:j.T!==null?yy():Nd()}function f0(){if(Zn===0)if((Ue&536870912)===0||Be){var i=Ca;Ca<<=1,(Ca&3932160)===0&&(Ca=262144),Zn=i}else Zn=536870912;return i=Wn.current,i!==null&&(i.flags|=32),Zn}function zn(i,s,o){(i===lt&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(Nl(i,0),Us(i,Ue,Zn,!1)),Na(i,o),((We&2)===0||i!==lt)&&(i===lt&&((We&2)===0&&(no|=o),Rt===4&&Us(i,Ue,Zn,!1)),hi(i))}function m0(i,s,o){if((We&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||Sr(i,s),f=u?pN(i,s):fy(i,s,!0),p=u;do{if(f===0){Rl&&!u&&Us(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!fN(o)){f=fy(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var I=i;f=kc;var D=I.current.memoizedState.isDehydrated;if(D&&(Nl(I,E).flags|=256),E=fy(I,E,!1),E!==2){if(ay&&!D){I.errorRecoveryDisabledLanes|=p,no|=p,f=4;break e}p=jn,jn=f,p!==null&&(jn===null?jn=p:jn.push.apply(jn,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){Nl(i,0),Us(i,s,0,!0);break}e:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Us(u,s,Zn,!Vs);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=xf+300-An(),10<f)){if(Us(u,s,Zn,!Vs),$r(u,0,!0)!==0)break e;Ki=s,u.timeoutHandle=G0(p0.bind(null,u,o,jn,Nf,ly,s,Zn,no,xl,Vs,p,"Throttled",-0,0),f);break e}p0(u,o,jn,Nf,ly,s,Zn,no,xl,Vs,p,null,-0,0)}}break}while(!0);hi(i)}function p0(i,s,o,u,f,p,E,I,D,$,Z,re,Q,J){if(i.timeoutHandle=-1,re=s.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cr},o0(s,p,re);var ye=(p&62914560)===p?xf-An():(p&4194048)===p?h0-An():0;if(ye=XN(re,ye),ye!==null){Ki=p,i.cancelPendingCommit=ye(b0.bind(null,i,s,p,o,u,f,E,I,D,Z,re,null,Q,J)),Us(i,p,E,!$);return}}b0(i,s,p,o,u,f,E,I,D)}function fN(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Qn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Us(i,s,o,u){s&=~oy,s&=~no,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Pt(f),E=1<<p;u[p]=-1,f&=~E}o!==0&&Da(i,o,s)}function Df(){return(We&6)===0?(Lc(0),!1):!0}function dy(){if(Ve!==null){if(Ze===0)var i=Ve.return;else i=Ve,ki=$a=null,xg(i),El=null,vc=0,i=Ve;for(;i!==null;)Kw(i.alternate,i),i=i.return;Ve=null}}function Nl(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,ON(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Ki=0,dy(),lt=i,Ve=o=Oi(i.current,null),Ue=s,Ze=0,Jn=null,Vs=!1,Rl=Sr(i,s),ay=!1,xl=Zn=oy=no=ks=Rt=0,jn=kc=null,ly=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Pt(u),p=1<<f;s|=i[f],u&=~p}return Gi=s,Xd(),o}function g0(i,s){Ce=null,j.H=Rc,s===vl||s===af?(s=PT(),Ze=3):s===gg?(s=PT(),Ze=4):Ze=s===Hg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jn=s,Ve===null&&(Rt=1,Ef(i,fr(s,i.current)))}function y0(){var i=Wn.current;return i===null?!0:(Ue&4194048)===Ue?yr===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?i===yr:!1}function _0(){var i=j.H;return j.H=Rc,i===null?Rc:i}function v0(){var i=j.A;return j.A=hN,i}function Pf(){Rt=4,Vs||(Ue&4194048)!==Ue&&Wn.current!==null||(Rl=!0),(ks&134217727)===0&&(no&134217727)===0||lt===null||Us(lt,Ue,Zn,!1)}function fy(i,s,o){var u=We;We|=2;var f=_0(),p=v0();(lt!==i||Ue!==s)&&(Nf=null,Nl(i,s)),s=!1;var E=Rt;e:do try{if(Ze!==0&&Ve!==null){var I=Ve,D=Jn;switch(Ze){case 8:dy(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(s=!0);var $=Ze;if(Ze=0,Jn=null,Dl(i,I,D,$),o&&Rl){E=0;break e}break;default:$=Ze,Ze=0,Jn=null,Dl(i,I,D,$)}}mN(),E=Rt;break}catch(Z){g0(i,Z)}while(!0);return s&&i.shellSuspendCounter++,ki=$a=null,We=u,j.H=f,j.A=p,Ve===null&&(lt=null,Ue=0,Xd()),E}function mN(){for(;Ve!==null;)E0(Ve)}function pN(i,s){var o=We;We|=2;var u=_0(),f=v0();lt!==i||Ue!==s?(Nf=null,Cf=An()+500,Nl(i,s)):Rl=Sr(i,s);e:do try{if(Ze!==0&&Ve!==null){s=Ve;var p=Jn;t:switch(Ze){case 1:Ze=0,Jn=null,Dl(i,s,p,1);break;case 2:case 9:if(NT(p)){Ze=0,Jn=null,T0(s);break}s=function(){Ze!==2&&Ze!==9||lt!==i||(Ze=7),hi(i)},p.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:NT(p)?(Ze=0,Jn=null,T0(s)):(Ze=0,Jn=null,Dl(i,s,p,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var I=Ve;if(E?ab(E):I.stateNode.complete){Ze=0,Jn=null;var D=I.sibling;if(D!==null)Ve=D;else{var $=I.return;$!==null?(Ve=$,Of($)):Ve=null}break t}}Ze=0,Jn=null,Dl(i,s,p,5);break;case 6:Ze=0,Jn=null,Dl(i,s,p,6);break;case 8:dy(),Rt=6;break e;default:throw Error(r(462))}}gN();break}catch(Z){g0(i,Z)}while(!0);return ki=$a=null,j.H=u,j.A=f,We=o,Ve!==null?0:(lt=null,Ue=0,Xd(),Rt)}function gN(){for(;Ve!==null&&!qp();)E0(Ve)}function E0(i){var s=Hw(i.alternate,i,Gi);i.memoizedProps=i.pendingProps,s===null?Of(i):Ve=s}function T0(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=Uw(o,s,s.pendingProps,s.type,void 0,Ue);break;case 11:s=Uw(o,s,s.pendingProps,s.type.render,s.ref,Ue);break;case 5:xg(s);default:Kw(o,s),s=Ve=vT(s,Gi),s=Hw(o,s,Gi)}i.memoizedProps=i.pendingProps,s===null?Of(i):Ve=s}function Dl(i,s,o,u){ki=$a=null,xg(s),El=null,vc=0;var f=s.return;try{if(iN(i,f,s,o,Ue)){Rt=1,Ef(i,fr(o,i.current)),Ve=null;return}}catch(p){if(f!==null)throw Ve=f,p;Rt=1,Ef(i,fr(o,i.current)),Ve=null;return}s.flags&32768?(Be||u===1?i=!0:Rl||(Ue&536870912)!==0?i=!1:(Vs=i=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),w0(s,i)):Of(s)}function Of(i){var s=i;do{if((s.flags&32768)!==0){w0(s,Vs);return}i=s.return;var o=oN(s.alternate,s,Gi);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=i}while(s!==null);Rt===0&&(Rt=5)}function w0(i,s){do{var o=lN(i.alternate,i);if(o!==null){o.flags&=32767,Ve=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=o}while(i!==null);Rt=6,Ve=null}function b0(i,s,o,u,f,p,E,I,D){i.cancelPendingCommit=null;do Vf();while(Zt!==0);if((We&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=tg,Kp(i,o,p,E,I,D),i===lt&&(Ve=lt=null,Ue=0),Cl=s,Ls=i,Ki=o,uy=p,cy=f,d0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,EN(ms,function(){return x0(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,f=le.p,le.p=2,E=We,We|=4;try{uN(i,s,o)}finally{We=E,le.p=f,j.T=u}}Zt=1,I0(),A0(),S0()}}function I0(){if(Zt===1){Zt=0;var i=Ls,s=Cl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=j.T,j.T=null;var u=le.p;le.p=2;var f=We;We|=4;try{i0(s,i);var p=Ay,E=cT(i.containerInfo),I=p.focusedElem,D=p.selectionRange;if(E!==I&&I&&I.ownerDocument&&uT(I.ownerDocument.documentElement,I)){if(D!==null&&Wp(I)){var $=D.start,Z=D.end;if(Z===void 0&&(Z=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(Z,I.value.length);else{var re=I.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),ye=I.textContent.length,Ie=Math.min(D.start,ye),ot=D.end===void 0?Ie:Math.min(D.end,ye);!J.extend&&Ie>ot&&(E=ot,ot=Ie,Ie=E);var U=lT(I,Ie),V=lT(I,ot);if(U&&V&&(J.rangeCount!==1||J.anchorNode!==U.node||J.anchorOffset!==U.offset||J.focusNode!==V.node||J.focusOffset!==V.offset)){var K=re.createRange();K.setStart(U.node,U.offset),J.removeAllRanges(),Ie>ot?(J.addRange(K),J.extend(V.node,V.offset)):(K.setEnd(V.node,V.offset),J.addRange(K))}}}}for(re=[],J=I;J=J.parentNode;)J.nodeType===1&&re.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<re.length;I++){var ne=re[I];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Kf=!!Iy,Ay=Iy=null}finally{We=f,le.p=u,j.T=o}}i.current=s,Zt=2}}function A0(){if(Zt===2){Zt=0;var i=Ls,s=Cl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=j.T,j.T=null;var u=le.p;le.p=2;var f=We;We|=4;try{Zw(i,s.alternate,s)}finally{We=f,le.p=u,j.T=o}}Zt=3}}function S0(){if(Zt===4||Zt===3){Zt=0,bd();var i=Ls,s=Cl,o=Ki,u=d0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,Cl=Ls=null,R0(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Ms=null),Ci(o),s=s.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Ar,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=j.T,f=le.p,le.p=2,j.T=null;try{for(var p=i.onRecoverableError,E=0;E<u.length;E++){var I=u[E];p(I.value,{componentStack:I.stack})}}finally{j.T=s,le.p=f}}(Ki&3)!==0&&Vf(),hi(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===hy?Mc++:(Mc=0,hy=i):Mc=0,Lc(0)}}function R0(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,yc(s)))}function Vf(){return I0(),A0(),S0(),x0()}function x0(){if(Zt!==5)return!1;var i=Ls,s=uy;uy=0;var o=Ci(Ki),u=j.T,f=le.p;try{le.p=32>o?32:o,j.T=null,o=cy,cy=null;var p=Ls,E=Ki;if(Zt=0,Cl=Ls=null,Ki=0,(We&6)!==0)throw Error(r(331));var I=We;if(We|=4,u0(p.current),a0(p,p.current,E,o),We=I,Lc(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Ar,p)}catch{}return!0}finally{le.p=f,j.T=u,R0(i,s)}}function C0(i,s,o){s=fr(o,s),s=qg(i.stateNode,s,2),i=Ns(i,s,2),i!==null&&(Na(i,2),hi(i))}function et(i,s,o){if(i.tag===3)C0(i,i,o);else for(;s!==null;){if(s.tag===3){C0(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ms===null||!Ms.has(u))){i=fr(o,i),o=Nw(2),u=Ns(s,o,2),u!==null&&(Dw(o,u,s,i),Na(u,2),hi(u));break}}s=s.return}}function my(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new dN;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(ay=!0,f.add(o),i=yN.bind(null,i,s,o),s.then(i,i))}function yN(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,lt===i&&(Ue&o)===o&&(Rt===4||Rt===3&&(Ue&62914560)===Ue&&300>An()-xf?(We&2)===0&&Nl(i,0):oy|=o,xl===Ue&&(xl=0)),hi(i)}function N0(i,s){s===0&&(s=Cd()),i=Ha(i,s),i!==null&&(Na(i,s),hi(i))}function _N(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),N0(i,o)}function vN(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),N0(i,o)}function EN(i,s){return Jt(i,s)}var kf=null,Pl=null,py=!1,Mf=!1,gy=!1,js=0;function hi(i){i!==Pl&&i.next===null&&(Pl===null?kf=Pl=i:Pl=Pl.next=i),Mf=!0,py||(py=!0,wN())}function Lc(i,s){if(!gy&&Mf){gy=!0;do for(var o=!1,u=kf;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var E=u.suspendedLanes,I=u.pingedLanes;p=(1<<31-Pt(42|i)+1)-1,p&=f&~(E&~I),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,V0(u,p))}else p=Ue,p=$r(u,u===lt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Sr(u,p)||(o=!0,V0(u,p));u=u.next}while(o);gy=!1}}function TN(){D0()}function D0(){Mf=py=!1;var i=0;js!==0&&PN()&&(i=js);for(var s=An(),o=null,u=kf;u!==null;){var f=u.next,p=P0(u,s);p===0?(u.next=null,o===null?kf=f:o.next=f,f===null&&(Pl=o)):(o=u,(i!==0||(p&3)!==0)&&(Mf=!0)),u=f}Zt!==0&&Zt!==5||Lc(i),js!==0&&(js=0)}function P0(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var E=31-Pt(p),I=1<<E,D=f[E];D===-1?((I&o)===0||(I&u)!==0)&&(f[E]=Gp(I,s)):D<=s&&(i.expiredLanes|=I),p&=~I}if(s=lt,o=Ue,o=$r(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&fs(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Sr(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&fs(u),Ci(o)){case 2:case 8:o=$u;break;case 32:o=ms;break;case 268435456:o=Id;break;default:o=ms}return u=O0.bind(null,i),o=Jt(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&fs(u),i.callbackPriority=2,i.callbackNode=null,2}function O0(i,s){if(Zt!==0&&Zt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Vf()&&i.callbackNode!==o)return null;var u=Ue;return u=$r(i,i===lt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(m0(i,u,s),P0(i,An()),i.callbackNode!=null&&i.callbackNode===o?O0.bind(null,i):null)}function V0(i,s){if(Vf())return null;m0(i,s,!0)}function wN(){VN(function(){(We&6)!==0?Jt(Ku,TN):D0()})}function yy(){if(js===0){var i=yl;i===0&&(i=Gr,Gr<<=1,(Gr&261888)===0&&(Gr=256)),js=i}return js}function k0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:nl(""+i)}function M0(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function bN(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=k0((f[nn]||null).action),E=u.submitter;E&&(s=(s=E[nn]||null)?k0(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var I=new ii("action","action",null,u,f);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(js!==0){var D=E?M0(f,E):new FormData(f);Lg(o,{pending:!0,data:D,method:f.method,action:p},null,D)}}else typeof p=="function"&&(I.preventDefault(),D=E?M0(f,E):new FormData(f),Lg(o,{pending:!0,data:D,method:f.method,action:p},p,D))},currentTarget:f}]})}}for(var _y=0;_y<eg.length;_y++){var vy=eg[_y],IN=vy.toLowerCase(),AN=vy[0].toUpperCase()+vy.slice(1);Vr(IN,"on"+AN)}Vr(fT,"onAnimationEnd"),Vr(mT,"onAnimationIteration"),Vr(pT,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(BC,"onTransitionRun"),Vr(FC,"onTransitionStart"),Vr(qC,"onTransitionCancel"),Vr(gT,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function L0(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var E=u.length-1;0<=E;E--){var I=u[E],D=I.instance,$=I.currentTarget;if(I=I.listener,D!==p&&f.isPropagationStopped())break e;p=I,f.currentTarget=$;try{p(f)}catch(Z){Wd(Z)}f.currentTarget=null,p=D}else for(E=0;E<u.length;E++){if(I=u[E],D=I.instance,$=I.currentTarget,I=I.listener,D!==p&&f.isPropagationStopped())break e;p=I,f.currentTarget=$;try{p(f)}catch(Z){Wd(Z)}f.currentTarget=null,p=D}}}}function ke(i,s){var o=s[Xo];o===void 0&&(o=s[Xo]=new Set);var u=i+"__bubble";o.has(u)||(U0(s,i,2,!1),o.add(u))}function Ey(i,s,o){var u=0;s&&(u|=4),U0(o,i,u,s)}var Lf="_reactListening"+Math.random().toString(36).slice(2);function Ty(i){if(!i[Lf]){i[Lf]=!0,Wu.forEach(function(o){o!=="selectionchange"&&(SN.has(o)||Ey(o,!1,i),Ey(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Lf]||(s[Lf]=!0,Ey("selectionchange",!1,s))}}function U0(i,s,o,u){switch(fb(s)){case 2:var f=eD;break;case 8:f=tD;break;default:f=My}o=f.bind(null,s,o,i),f=void 0,!Ma||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function wy(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var I=u.stateNode.containerInfo;if(I===f)break;if(E===4)for(E=u.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;I!==null;){if(E=Xr(I),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){u=p=E;continue e}I=I.parentNode}}u=u.return}Es(function(){var $=p,Z=ur(o),re=[];e:{var Q=yT.get(i);if(Q!==void 0){var J=ii,ye=i;switch(i){case"keypress":if(Ua(o)===0)break e;case"keydown":case"keyup":J=$d;break;case"focusin":ye="focus",J=za;break;case"focusout":ye="blur",J=za;break;case"beforeblur":case"afterblur":J=za;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=y;break;case fT:case mT:case pT:J=zd;break;case gT:J=A;break;case"scroll":case"scrollend":J=lc;break;case"wheel":J=W;break;case"copy":case"cut":case"paste":J=Bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Pi;break;case"toggle":case"beforetoggle":J=xe}var Ie=(s&4)!==0,ot=!Ie&&(i==="scroll"||i==="scrollend"),U=Ie?Q!==null?Q+"Capture":null:Q;Ie=[];for(var V=$,K;V!==null;){var ne=V;if(K=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||K===null||U===null||(ne=Nr(V,U),ne!=null&&Ie.push(jc(V,ne,K))),ot)break;V=V.return}0<Ie.length&&(Q=new J(Q,ye,null,o,Z),re.push({event:Q,listeners:Ie}))}}if((s&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Q&&o!==sc&&(ye=o.relatedTarget||o.fromElement)&&(Xr(ye)||ye[Yr]))break e;if((J||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(ye=o.relatedTarget||o.toElement,J=$,ye=ye?Xr(ye):null,ye!==null&&(ot=l(ye),Ie=ye.tag,ye!==ot||Ie!==5&&Ie!==27&&Ie!==6)&&(ye=null)):(J=null,ye=$),J!==ye)){if(Ie=uc,ne="onMouseLeave",U="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=Pi,ne="onPointerLeave",U="onPointerEnter",V="pointer"),ot=J==null?Q:Kn(J),K=ye==null?Q:Kn(ye),Q=new Ie(ne,V+"leave",J,o,Z),Q.target=ot,Q.relatedTarget=K,ne=null,Xr(Z)===$&&(Ie=new Ie(U,V+"enter",ye,o,Z),Ie.target=K,Ie.relatedTarget=ot,ne=Ie),ot=ne,J&&ye)t:{for(Ie=RN,U=J,V=ye,K=0,ne=U;ne;ne=Ie(ne))K++;ne=0;for(var we=V;we;we=Ie(we))ne++;for(;0<K-ne;)U=Ie(U),K--;for(;0<ne-K;)V=Ie(V),ne--;for(;K--;){if(U===V||V!==null&&U===V.alternate){Ie=U;break t}U=Ie(U),V=Ie(V)}Ie=null}else Ie=null;J!==null&&j0(re,Q,J,Ie,!1),ye!==null&&ot!==null&&j0(re,ot,ye,Ie,!0)}}e:{if(Q=$?Kn($):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Ge=nT;else if(eT(Q))if(rT)Ge=UC;else{Ge=MC;var ve=kC}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&tl($.elementType)&&(Ge=nT):Ge=LC;if(Ge&&(Ge=Ge(i,$))){tT(re,Ge,o,Z);break e}ve&&ve(i,Q,$),i==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&nc(Q,"number",Q.value)}switch(ve=$?Kn($):window,i){case"focusin":(eT(ve)||ve.contentEditable==="true")&&(ul=ve,Xp=$,mc=null);break;case"focusout":mc=Xp=ul=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,hT(re,o,Z);break;case"selectionchange":if(zC)break;case"keydown":case"keyup":hT(re,o,Z)}var Pe;if(Ye)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else ll?Ba(i,o)&&(je="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(je="onCompositionStart");je&&(oi&&o.locale!=="ko"&&(ll||je!=="onCompositionStart"?je==="onCompositionEnd"&&ll&&(Pe=oc()):(ri=Z,ac="value"in ri?ri.value:ri.textContent,ll=!0)),ve=Uf($,je),0<ve.length&&(je=new ai(je,i,null,o,Z),re.push({event:je,listeners:ve}),Pe?je.data=Pe:(Pe=ol(o),Pe!==null&&(je.data=Pe)))),(Pe=hr?DC(i,o):PC(i,o))&&(je=Uf($,"onBeforeInput"),0<je.length&&(ve=new ai("onBeforeInput","beforeinput",null,o,Z),re.push({event:ve,listeners:je}),ve.data=Pe)),bN(re,i,$,o,Z)}L0(re,s)})}function jc(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Uf(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Nr(i,o),f!=null&&u.unshift(jc(i,f,p)),f=Nr(i,s),f!=null&&u.push(jc(i,f,p))),i.tag===3)return u;i=i.return}return[]}function RN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function j0(i,s,o,u,f){for(var p=s._reactName,E=[];o!==null&&o!==u;){var I=o,D=I.alternate,$=I.stateNode;if(I=I.tag,D!==null&&D===u)break;I!==5&&I!==26&&I!==27||$===null||(D=$,f?($=Nr(o,p),$!=null&&E.unshift(jc(o,$,D))):f||($=Nr(o,p),$!=null&&E.push(jc(o,$,D)))),o=o.return}E.length!==0&&i.push({event:s,listeners:E})}var xN=/\r\n?/g,CN=/\u0000|\uFFFD/g;function z0(i){return(typeof i=="string"?i:""+i).replace(xN,`
`).replace(CN,"")}function B0(i,s){return s=z0(s),z0(i)===s}function at(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||kn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&kn(i,""+u);break;case"className":$n(i,"class",u);break;case"tabIndex":$n(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(i,o,u);break;case"style":ic(i,u,p);break;case"data":if(s!=="object"){$n(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=nl(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&at(i,s,"name",f.name,f,null),at(i,s,"formEncType",f.formEncType,f,null),at(i,s,"formMethod",f.formMethod,f,null),at(i,s,"formTarget",f.formTarget,f,null)):(at(i,s,"encType",f.encType,f,null),at(i,s,"method",f.method,f,null),at(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=nl(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Cr);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=nl(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":ke("beforetoggle",i),ke("toggle",i),Zo(i,"popover",u);break;case"xlinkActuate":qt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ld.get(o)||o,Zo(i,o,u))}}function by(i,s,o,u,f,p){switch(o){case"style":ic(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?kn(i,u):(typeof u=="number"||typeof u=="bigint")&&kn(i,""+u);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[nn]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Zo(i,o,u)}}}function mn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:at(i,s,p,E,o,null)}}f&&at(i,s,"srcSet",o.srcSet,o,null),u&&at(i,s,"src",o.src,o,null);return;case"input":ke("invalid",i);var I=p=E=f=null,D=null,$=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":E=Z;break;case"checked":D=Z;break;case"defaultChecked":$=Z;break;case"value":p=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:at(i,s,u,Z,o,null)}}Vd(i,p,I,D,$,E,f,!1);return;case"select":ke("invalid",i),u=E=p=null;for(f in o)if(o.hasOwnProperty(f)&&(I=o[f],I!=null))switch(f){case"value":p=I;break;case"defaultValue":E=I;break;case"multiple":u=I;default:at(i,s,f,I,o,null)}s=p,o=E,i.multiple=!!u,s!=null?gs(i,!!u,s,!1):o!=null&&gs(i,!!u,o,!0);return;case"textarea":ke("invalid",i),p=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(I=o[E],I!=null))switch(E){case"value":u=I;break;case"defaultValue":f=I;break;case"children":p=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:at(i,s,E,I,o,null)}ys(i,u,f,p);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:at(i,s,D,u,o,null)}return;case"dialog":ke("beforetoggle",i),ke("toggle",i),ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(u=0;u<Uc.length;u++)ke(Uc[u],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(u=o[$],u!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:at(i,s,$,u,o,null)}return;default:if(tl(s)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&by(i,s,Z,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&at(i,s,I,u,o,null))}function NN(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,I=null,D=null,$=null,Z=null;for(J in o){var re=o[J];if(o.hasOwnProperty(J)&&re!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":D=re;default:u.hasOwnProperty(J)||at(i,s,J,null,u,re)}}for(var Q in u){var J=u[Q];if(re=o[Q],u.hasOwnProperty(Q)&&(J!=null||re!=null))switch(Q){case"type":p=J;break;case"name":f=J;break;case"checked":$=J;break;case"defaultChecked":Z=J;break;case"value":E=J;break;case"defaultValue":I=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:J!==re&&at(i,s,Q,J,u,re)}}el(i,E,I,D,$,Z,p,f);return;case"select":J=E=I=Q=null;for(p in o)if(D=o[p],o.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":J=D;default:u.hasOwnProperty(p)||at(i,s,p,null,u,D)}for(f in u)if(p=u[f],D=o[f],u.hasOwnProperty(f)&&(p!=null||D!=null))switch(f){case"value":Q=p;break;case"defaultValue":I=p;break;case"multiple":E=p;default:p!==D&&at(i,s,f,p,u,D)}s=I,o=E,u=J,Q!=null?gs(i,!!o,Q,!1):!!u!=!!o&&(s!=null?gs(i,!!o,s,!0):gs(i,!!o,o?[]:"",!1));return;case"textarea":J=Q=null;for(I in o)if(f=o[I],o.hasOwnProperty(I)&&f!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:at(i,s,I,null,u,f)}for(E in u)if(f=u[E],p=o[E],u.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":Q=f;break;case"defaultValue":J=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&at(i,s,E,f,u,p)}kd(i,Q,J);return;case"option":for(var ye in o)if(Q=o[ye],o.hasOwnProperty(ye)&&Q!=null&&!u.hasOwnProperty(ye))switch(ye){case"selected":i.selected=!1;break;default:at(i,s,ye,null,u,Q)}for(D in u)if(Q=u[D],J=o[D],u.hasOwnProperty(D)&&Q!==J&&(Q!=null||J!=null))switch(D){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:at(i,s,D,Q,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)Q=o[Ie],o.hasOwnProperty(Ie)&&Q!=null&&!u.hasOwnProperty(Ie)&&at(i,s,Ie,null,u,Q);for($ in u)if(Q=u[$],J=o[$],u.hasOwnProperty($)&&Q!==J&&(Q!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:at(i,s,$,Q,u,J)}return;default:if(tl(s)){for(var ot in o)Q=o[ot],o.hasOwnProperty(ot)&&Q!==void 0&&!u.hasOwnProperty(ot)&&by(i,s,ot,void 0,u,Q);for(Z in u)Q=u[Z],J=o[Z],!u.hasOwnProperty(Z)||Q===J||Q===void 0&&J===void 0||by(i,s,Z,Q,u,J);return}}for(var U in o)Q=o[U],o.hasOwnProperty(U)&&Q!=null&&!u.hasOwnProperty(U)&&at(i,s,U,null,u,Q);for(re in u)Q=u[re],J=o[re],!u.hasOwnProperty(re)||Q===J||Q==null&&J==null||at(i,s,re,Q,u,J)}function F0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,E=f.initiatorType,I=f.duration;if(p&&I&&F0(E)){for(E=0,I=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],$=D.startTime;if($>I)break;var Z=D.transferSize,re=D.initiatorType;Z&&F0(re)&&(D=D.responseEnd,E+=Z*(D<I?1:(I-$)/(D-$)))}if(--u,s+=8*(p+E)/(f.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Iy=null,Ay=null;function jf(i){return i.nodeType===9?i:i.ownerDocument}function q0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H0(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Sy(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ry=null;function PN(){var i=window.event;return i&&i.type==="popstate"?i===Ry?!1:(Ry=i,!0):(Ry=null,!1)}var G0=typeof setTimeout=="function"?setTimeout:void 0,ON=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,VN=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(i){return K0.resolve(null).then(i).catch(kN)}:G0;function kN(i){setTimeout(function(){throw i})}function zs(i){return i==="head"}function $0(i,s){var o=s,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),Ml(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")zc(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,zc(o);for(var p=o.firstChild;p;){var E=p.nextSibling,I=p.nodeName;p[Wr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=E}}else o==="body"&&zc(i.ownerDocument.body);o=f}while(o);Ml(s)}function Q0(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function xy(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":xy(o),Jo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function MN(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Wr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=_r(i.nextSibling),i===null)break}return null}function LN(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=_r(i.nextSibling),i===null))return null;return i}function Y0(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=_r(i.nextSibling),i===null))return null;return i}function Cy(i){return i.data==="$?"||i.data==="$~"}function Ny(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function UN(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function _r(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Dy=null;function W0(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return _r(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function X0(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function J0(i,s,o){switch(s=jf(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function zc(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Jo(i)}var vr=new Map,Z0=new Set;function zf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var $i=le.d;le.d={f:jN,r:zN,D:BN,C:FN,L:qN,m:HN,X:KN,S:GN,M:$N};function jN(){var i=$i.f(),s=Df();return i||s}function zN(i){var s=lr(i);s!==null&&s.tag===5&&s.type==="form"?gw(s):$i.r(i)}var Ol=typeof document>"u"?null:document;function eb(i,s,o){var u=Ol;if(u&&typeof s=="string"&&s){var f=Vn(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Z0.has(f)||(Z0.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),mn(s,"link",i),Ft(s),u.head.appendChild(s)))}}function BN(i){$i.D(i),eb("dns-prefetch",i,null)}function FN(i,s){$i.C(i,s),eb("preconnect",i,s)}function qN(i,s,o){$i.L(i,s,o);var u=Ol;if(u&&i&&s){var f='link[rel="preload"][as="'+Vn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Vn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Vn(o.imageSizes)+'"]')):f+='[href="'+Vn(i)+'"]';var p=f;switch(s){case"style":p=Vl(i);break;case"script":p=kl(i)}vr.has(p)||(i=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),vr.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(Bc(p))||s==="script"&&u.querySelector(Fc(p))||(s=u.createElement("link"),mn(s,"link",i),Ft(s),u.head.appendChild(s)))}}function HN(i,s){$i.m(i,s);var o=Ol;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Vn(u)+'"][href="'+Vn(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=kl(i)}if(!vr.has(p)&&(i=v({rel:"modulepreload",href:i},s),vr.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fc(p)))return}u=o.createElement("link"),mn(u,"link",i),Ft(u),o.head.appendChild(u)}}}function GN(i,s,o){$i.S(i,s,o);var u=Ol;if(u&&i){var f=Jr(u).hoistableStyles,p=Vl(i);s=s||"default";var E=f.get(p);if(!E){var I={loading:0,preload:null};if(E=u.querySelector(Bc(p)))I.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},o),(o=vr.get(p))&&Py(i,o);var D=E=u.createElement("link");Ft(D),mn(D,"link",i),D._p=new Promise(function($,Z){D.onload=$,D.onerror=Z}),D.addEventListener("load",function(){I.loading|=1}),D.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Bf(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:I},f.set(p,E)}}}function KN(i,s){$i.X(i,s);var o=Ol;if(o&&i){var u=Jr(o).hoistableScripts,f=kl(i),p=u.get(f);p||(p=o.querySelector(Fc(f)),p||(i=v({src:i,async:!0},s),(s=vr.get(f))&&Oy(i,s),p=o.createElement("script"),Ft(p),mn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function $N(i,s){$i.M(i,s);var o=Ol;if(o&&i){var u=Jr(o).hoistableScripts,f=kl(i),p=u.get(f);p||(p=o.querySelector(Fc(f)),p||(i=v({src:i,async:!0,type:"module"},s),(s=vr.get(f))&&Oy(i,s),p=o.createElement("script"),Ft(p),mn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function tb(i,s,o,u){var f=(f=De.current)?zf(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Vl(o.href),o=Jr(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Vl(o.href);var p=Jr(f).hoistableStyles,E=p.get(i);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,E),(p=f.querySelector(Bc(i)))&&!p._p&&(E.instance=p,E.state.loading=5),vr.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},vr.set(i,o),p||QN(f,i,o,E.state))),s&&u===null)throw Error(r(528,""));return E}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=kl(o),o=Jr(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Vl(i){return'href="'+Vn(i)+'"'}function Bc(i){return'link[rel="stylesheet"]['+i+"]"}function nb(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function QN(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),mn(s,"link",o),Ft(s),i.head.appendChild(s))}function kl(i){return'[src="'+Vn(i)+'"]'}function Fc(i){return"script[async]"+i}function rb(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Vn(o.href)+'"]');if(u)return s.instance=u,Ft(u),u;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ft(u),mn(u,"style",f),Bf(u,o.precedence,i),s.instance=u;case"stylesheet":f=Vl(o.href);var p=i.querySelector(Bc(f));if(p)return s.state.loading|=4,s.instance=p,Ft(p),p;u=nb(o),(f=vr.get(f))&&Py(u,f),p=(i.ownerDocument||i).createElement("link"),Ft(p);var E=p;return E._p=new Promise(function(I,D){E.onload=I,E.onerror=D}),mn(p,"link",u),s.state.loading|=4,Bf(p,o.precedence,i),s.instance=p;case"script":return p=kl(o.src),(f=i.querySelector(Fc(p)))?(s.instance=f,Ft(f),f):(u=o,(f=vr.get(p))&&(u=v({},o),Oy(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Ft(f),mn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Bf(u,o.precedence,i));return s.instance}function Bf(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,E=0;E<u.length;E++){var I=u[E];if(I.dataset.precedence===s)p=I;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Py(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Oy(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Ff=null;function ib(i,s,o){if(Ff===null){var u=new Map,f=Ff=new Map;f.set(o,u)}else f=Ff,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[Wr]||p[Bt]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=i+E;var I=u.get(E);I?I.push(p):u.set(E,[p])}}return u}function sb(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function YN(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ab(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function WN(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Vl(u.href),p=s.querySelector(Bc(f));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=qf.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=p,Ft(p);return}p=s.ownerDocument||s,u=nb(u),(f=vr.get(f))&&Py(u,f),p=p.createElement("link"),Ft(p);var E=p;E._p=new Promise(function(I,D){E.onload=I,E.onerror=D}),mn(p,"link",u),o.instance=p}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=qf.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var Vy=0;function XN(i,s){return i.stylesheets&&i.count===0&&Gf(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Gf(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4+s);0<i.imgBytes&&Vy===0&&(Vy=62500*DN());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gf(i,i.stylesheets),i.unsuspend)){var p=i.unsuspend;i.unsuspend=null,p()}},(i.imgBytes>Vy?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function qf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Hf=null;function Gf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Hf=new Map,s.forEach(JN,i),Hf=null,qf.call(i))}function JN(i,s){if(!(s.state.loading&4)){var o=Hf.get(i);if(o)var u=o.get(null);else{o=new Map,Hf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,f),o.set(E,f),this.count++,u=qf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var qc={$$typeof:X,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function ZN(i,s,o,u,f,p,E,I,D){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.hiddenUpdates=Qr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function ob(i,s,o,u,f,p,E,I,D,$,Z,re){return i=new ZN(i,s,o,E,D,$,Z,re,I),s=1,p===!0&&(s|=24),p=Yn(3,null,null,s),i.current=p,p.stateNode=i,s=fg(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},yg(p),i}function lb(i){return i?(i=dl,i):dl}function ub(i,s,o,u,f,p){f=lb(f),u.context===null?u.context=f:u.pendingContext=f,u=Cs(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ns(i,u,s),o!==null&&(zn(o,i,s),Tc(o,i,s))}function cb(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function ky(i,s){cb(i,s),(i=i.alternate)&&cb(i,s)}function hb(i){if(i.tag===13||i.tag===31){var s=Ha(i,67108864);s!==null&&zn(s,i,67108864),ky(i,67108864)}}function db(i){if(i.tag===13||i.tag===31){var s=er();s=Pa(s);var o=Ha(i,s);o!==null&&zn(o,i,s),ky(i,s)}}var Kf=!0;function eD(i,s,o,u){var f=j.T;j.T=null;var p=le.p;try{le.p=2,My(i,s,o,u)}finally{le.p=p,j.T=f}}function tD(i,s,o,u){var f=j.T;j.T=null;var p=le.p;try{le.p=8,My(i,s,o,u)}finally{le.p=p,j.T=f}}function My(i,s,o,u){if(Kf){var f=Ly(u);if(f===null)wy(i,s,u,$f,o),mb(i,u);else if(rD(f,i,s,o,u))u.stopPropagation();else if(mb(i,u),s&4&&-1<nD.indexOf(i)){for(;f!==null;){var p=lr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Kr(p.pendingLanes);if(E!==0){var I=p;for(I.pendingLanes|=2,I.entangledLanes|=2;E;){var D=1<<31-Pt(E);I.entanglements[1]|=D,E&=~D}hi(p),(We&6)===0&&(Cf=An()+500,Lc(0))}}break;case 31:case 13:I=Ha(p,2),I!==null&&zn(I,p,2),Df(),ky(p,2)}if(p=Ly(u),p===null&&wy(i,s,u,$f,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else wy(i,s,u,null,o)}}function Ly(i){return i=ur(i),Uy(i)}var $f=null;function Uy(i){if($f=null,i=Xr(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=d(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return $f=i,null}function fb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case Ku:return 2;case $u:return 8;case ms:case Hp:return 32;case Id:return 268435456;default:return 32}default:return 32}}var jy=!1,Bs=null,Fs=null,qs=null,Hc=new Map,Gc=new Map,Hs=[],nD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mb(i,s){switch(i){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Hc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(s.pointerId)}}function Kc(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=lr(s),s!==null&&hb(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function rD(i,s,o,u,f){switch(s){case"focusin":return Bs=Kc(Bs,i,s,o,u,f),!0;case"dragenter":return Fs=Kc(Fs,i,s,o,u,f),!0;case"mouseover":return qs=Kc(qs,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Hc.set(p,Kc(Hc.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Gc.set(p,Kc(Gc.get(p)||null,i,s,o,u,f)),!0}return!1}function pb(i){var s=Xr(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Rr(i.priority,function(){db(o)});return}}else if(s===31){if(s=d(o),s!==null){i.blockedOn=s,Rr(i.priority,function(){db(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Qf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=Ly(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);sc=u,o.target.dispatchEvent(u),sc=null}else return s=lr(o),s!==null&&hb(s),i.blockedOn=o,!1;s.shift()}return!0}function gb(i,s,o){Qf(i)&&o.delete(s)}function iD(){jy=!1,Bs!==null&&Qf(Bs)&&(Bs=null),Fs!==null&&Qf(Fs)&&(Fs=null),qs!==null&&Qf(qs)&&(qs=null),Hc.forEach(gb),Gc.forEach(gb)}function Yf(i,s){i.blockedOn===s&&(i.blockedOn=null,jy||(jy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,iD)))}var Wf=null;function yb(i){Wf!==i&&(Wf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wf===i&&(Wf=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(Uy(u||o)===null)continue;break}var p=lr(o);p!==null&&(i.splice(s,3),s-=3,Lg(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Ml(i){function s(D){return Yf(D,i)}Bs!==null&&Yf(Bs,i),Fs!==null&&Yf(Fs,i),qs!==null&&Yf(qs,i),Hc.forEach(s),Gc.forEach(s);for(var o=0;o<Hs.length;o++){var u=Hs[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Hs.length&&(o=Hs[0],o.blockedOn===null);)pb(o),o.blockedOn===null&&Hs.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],E=f[nn]||null;if(typeof p=="function")E||yb(o);else if(E){var I=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[nn]||null)I=E.formAction;else if(Uy(f)!==null)continue}else I=E.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),yb(o)}}}function _b(){function i(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(E){return f=E})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function zy(i){this._internalRoot=i}Xf.prototype.render=zy.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=er();ub(o,u,i,s,null,null)},Xf.prototype.unmount=zy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;ub(i.current,2,null,i,null,null),Df(),s[Yr]=null}};function Xf(i){this._internalRoot=i}Xf.prototype.unstable_scheduleHydration=function(i){if(i){var s=Nd();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Hs.length&&s!==0&&s<Hs[o].priority;o++);Hs.splice(o,0,i),o===0&&pb(i)}};var vb=e.version;if(vb!=="19.2.4")throw Error(r(527,vb,"19.2.4"));le.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var sD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jf.isDisabled&&Jf.supportsFiber)try{Ar=Jf.inject(sD),un=Jf}catch{}}return Qc.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=Sw,p=Rw,E=xw;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=ob(i,1,!1,null,null,o,u,null,f,p,E,_b),i[Yr]=s.current,Ty(i),new zy(s)},Qc.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=Sw,E=Rw,I=xw,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=ob(i,1,!0,s,o??null,u,f,D,p,E,I,_b),s.context=lb(null),o=s.current,u=er(),u=Pa(u),f=Cs(u),f.callback=null,Ns(o,f,u),o=u,s.current.lanes=o,Na(s,o),hi(s),i[Yr]=s.current,Ty(i),new Xf(s)},Qc.version="19.2.4",Qc}var Cb;function gD(){if(Cb)return qy.exports;Cb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qy.exports=pD(),qy.exports}var yD=gD();const _D=HA(yD);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nb="popstate";function vD(n={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=jo(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),y_("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:xh(l))}function r(a,l){br(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return TD(e,t,r,n)}function wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function br(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ED(){return Math.random().toString(36).substring(2,10)}function Db(n,e){return{usr:n.state,key:n.key,idx:e}}function y_(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:t,key:e&&e.key||r||ED()}}function xh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function TD(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function v(){d="POP";let F=_(),ee=F==null?null:F-g;g=F,m&&m({action:d,location:z.location,delta:ee})}function b(F,ee){d="PUSH";let te=y_(z.location,F,ee);t&&t(te,F),g=_()+1;let X=Db(te,g),ge=z.createHref(te);try{c.pushState(X,"",ge)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;a.location.assign(ge)}l&&m&&m({action:d,location:z.location,delta:1})}function R(F,ee){d="REPLACE";let te=y_(z.location,F,ee);t&&t(te,F),g=_();let X=Db(te,g),ge=z.createHref(te);c.replaceState(X,"",ge),l&&m&&m({action:d,location:z.location,delta:0})}function M(F){return wD(F)}let z={get action(){return d},get location(){return n(a,c)},listen(F){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Nb,v),m=F,()=>{a.removeEventListener(Nb,v),m=null}},createHref(F){return e(a,F)},createURL:M,encodeLocation(F){let ee=M(F);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:b,replace:R,go(F){return c.go(F)}};return z}function wD(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:xh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function GA(n,e,t="/"){return bD(n,e,t,!1)}function bD(n,e,t,r){let a=typeof e=="string"?jo(e):e,l=ts(a.pathname||"/",t);if(l==null)return null;let c=KA(n);ID(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=kD(l);d=OD(c[m],g,r)}return d}function KA(n,e=[],t=[],r="",a=!1){let l=(c,d,m=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&m)return;wt(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let v=Zi([r,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(wt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),KA(c.children,e,b,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:DD(v,c.index),routesMeta:b})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let g of $A(c.path))l(c,d,!0,g)}),e}function $A(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=$A(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function ID(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:PD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var AD=/^:[\w-]+$/,SD=3,RD=2,xD=1,CD=10,ND=-2,Pb=n=>n==="*";function DD(n,e){let t=n.split("/"),r=t.length;return t.some(Pb)&&(r+=ND),e&&(r+=RD),t.filter(a=>!Pb(a)).reduce((a,l)=>a+(AD.test(l)?SD:l===""?xD:CD),r)}function PD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function OD(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],g=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",v=xm({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),b=m.route;if(!v&&g&&t&&!r[r.length-1].route.index&&(v=xm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:Zi([l,v.pathname]),pathnameBase:jD(Zi([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=Zi([l,v.pathnameBase]))}return c}function xm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=VD(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:v},b)=>{if(_==="*"){let M=d[b]||"";c=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const R=d[b];return v&&!R?g[_]=void 0:g[_]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function VD(n,e=!1,t=!0){br(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function kD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return br(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ts(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var MD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function LD(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?jo(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Ob(t.substring(1),"/"):l=Ob(t,e)):l=e,{pathname:l,search:zD(r),hash:BD(a)}}function Ob(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function $y(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function av(n){let e=UD(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function ov(n,e,t,r=!1){let a;typeof n=="string"?a=jo(n):(a={...n},wt(!a.pathname||!a.pathname.includes("?"),$y("?","pathname","search",a)),wt(!a.pathname||!a.pathname.includes("#"),$y("#","pathname","hash",a)),wt(!a.search||!a.search.includes("#"),$y("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}d=v>=0?e[v]:"/"}let m=LD(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var Zi=n=>n.join("/").replace(/\/\/+/g,"/"),jD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,FD=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function qD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function HD(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var QA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function YA(n,e){let t=n;if(typeof t!="string"||!MD.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,a=!1;if(QA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=ts(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{br(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var WA=["POST","PUT","PATCH","DELETE"];new Set(WA);var GD=["GET",...WA];new Set(GD);var Ru=B.createContext(null);Ru.displayName="DataRouter";var np=B.createContext(null);np.displayName="DataRouterState";var KD=B.createContext(!1),XA=B.createContext({isTransitioning:!1});XA.displayName="ViewTransition";var $D=B.createContext(new Map);$D.displayName="Fetchers";var QD=B.createContext(null);QD.displayName="Await";var ar=B.createContext(null);ar.displayName="Navigation";var Zh=B.createContext(null);Zh.displayName="Location";var xi=B.createContext({outlet:null,matches:[],isDataRoute:!1});xi.displayName="Route";var lv=B.createContext(null);lv.displayName="RouteError";var JA="REACT_ROUTER_ERROR",YD="REDIRECT",WD="ROUTE_ERROR_RESPONSE";function XD(n){if(n.startsWith(`${JA}:${YD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function JD(n){if(n.startsWith(`${JA}:${WD}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new FD(e.status,e.statusText,e.data)}catch{}}function ZD(n,{relative:e}={}){wt(xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=B.useContext(ar),{hash:a,pathname:l,search:c}=ed(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Zi([t,l])),r.createHref({pathname:d,search:c,hash:a})}function xu(){return B.useContext(Zh)!=null}function as(){return wt(xu(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Zh).location}var ZA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eS(n){B.useContext(ar).static||B.useLayoutEffect(n)}function rp(){let{isDataRoute:n}=B.useContext(xi);return n?d2():e2()}function e2(){wt(xu(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(Ru),{basename:e,navigator:t}=B.useContext(ar),{matches:r}=B.useContext(xi),{pathname:a}=as(),l=JSON.stringify(av(r)),c=B.useRef(!1);return eS(()=>{c.current=!0}),B.useCallback((m,g={})=>{if(br(c.current,ZA),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=ov(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Zi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}B.createContext(null);function ed(n,{relative:e}={}){let{matches:t}=B.useContext(xi),{pathname:r}=as(),a=JSON.stringify(av(t));return B.useMemo(()=>ov(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function t2(n,e){return tS(n,e)}function tS(n,e,t,r,a){var te;wt(xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=B.useContext(ar),{matches:c}=B.useContext(xi),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",v=d&&d.route;{let X=v&&v.path||"";rS(g,!v||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let b=as(),R;if(e){let X=typeof e=="string"?jo(e):e;wt(_==="/"||((te=X.pathname)==null?void 0:te.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${X.pathname}" was given in the \`location\` prop.`),R=X}else R=b;let M=R.pathname||"/",z=M;if(_!=="/"){let X=_.replace(/^\//,"").split("/");z="/"+M.replace(/^\//,"").split("/").slice(X.length).join("/")}let F=GA(n,{pathname:z});br(v||F!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),br(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ee=a2(F&&F.map(X=>Object.assign({},X,{params:Object.assign({},m,X.params),pathname:Zi([_,l.encodeLocation?l.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?_:Zi([_,l.encodeLocation?l.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),c,t,r,a);return e&&ee?B.createElement(Zh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},ee):ee}function n2(){let n=h2(),e=qD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:l},"ErrorBoundary")," or"," ",B.createElement("code",{style:l},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:a},t):null,c)}var r2=B.createElement(n2,null),nS=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=JD(n.digest);t&&(n=t)}let e=n!==void 0?B.createElement(xi.Provider,{value:this.props.routeContext},B.createElement(lv.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?B.createElement(i2,{error:n},e):e}};nS.contextType=KD;var Qy=new WeakMap;function i2({children:n,error:e}){let{basename:t}=B.useContext(ar);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=XD(e.digest);if(r){let a=Qy.get(e);if(a)throw a;let l=YA(r.location,t);if(QA&&!Qy.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw Qy.set(e,c),c}return B.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function s2({routeContext:n,match:e,children:t}){let r=B.useContext(Ru);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(xi.Provider,{value:n},t)}function a2(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let _=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);wt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,m=-1;if(t)for(let _=0;_<l.length;_++){let v=l[_];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=_),v.route.id){let{loaderData:b,errors:R}=t,M=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!R||R[v.route.id]===void 0);if(v.route.lazy||M){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&r?(_,v)=>{var b,R;r(_,{location:t.location,params:((R=(b=t.matches)==null?void 0:b[0])==null?void 0:R.params)??{},unstable_pattern:HD(t.matches),errorInfo:v})}:void 0;return l.reduceRight((_,v,b)=>{let R,M=!1,z=null,F=null;t&&(R=c&&v.route.id?c[v.route.id]:void 0,z=v.route.errorElement||r2,d&&(m<0&&b===0?(rS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,F=null):m===b&&(M=!0,F=v.route.hydrateFallbackElement||null)));let ee=e.concat(l.slice(0,b+1)),te=()=>{let X;return R?X=z:M?X=F:v.route.Component?X=B.createElement(v.route.Component,null):v.route.element?X=v.route.element:X=_,B.createElement(s2,{match:v,routeContext:{outlet:_,matches:ee,isDataRoute:t!=null},children:X})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?B.createElement(nS,{location:t.location,revalidation:t.revalidation,component:z,error:R,children:te(),routeContext:{outlet:null,matches:ee,isDataRoute:!0},onError:g}):te()},null)}function uv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o2(n){let e=B.useContext(Ru);return wt(e,uv(n)),e}function l2(n){let e=B.useContext(np);return wt(e,uv(n)),e}function u2(n){let e=B.useContext(xi);return wt(e,uv(n)),e}function cv(n){let e=u2(n),t=e.matches[e.matches.length-1];return wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function c2(){return cv("useRouteId")}function h2(){var r;let n=B.useContext(lv),e=l2("useRouteError"),t=cv("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function d2(){let{router:n}=o2("useNavigate"),e=cv("useNavigate"),t=B.useRef(!1);return eS(()=>{t.current=!0}),B.useCallback(async(a,l={})=>{br(t.current,ZA),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Vb={};function rS(n,e,t){!e&&!Vb[n]&&(Vb[n]=!0,br(!1,t))}B.memo(f2);function f2({routes:n,future:e,state:t,onError:r}){return tS(n,void 0,t,r,e)}function Cm({to:n,replace:e,state:t,relative:r}){wt(xu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=B.useContext(ar);br(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=B.useContext(xi),{pathname:c}=as(),d=rp(),m=ov(n,av(l),c,r==="path"),g=JSON.stringify(m);return B.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:r})},[d,g,r,e,t]),null}function io(n){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function m2({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){wt(!xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=B.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=jo(t));let{pathname:g="/",search:_="",hash:v="",state:b=null,key:R="default"}=t,M=B.useMemo(()=>{let z=ts(g,d);return z==null?null:{location:{pathname:z,search:_,hash:v,state:b,key:R},navigationType:r}},[d,g,_,v,b,R,r]);return br(M!=null,`<Router basename="${d}"> is not able to match the URL "${g}${_}${v}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:B.createElement(ar.Provider,{value:m},B.createElement(Zh.Provider,{children:e,value:M}))}function p2({children:n,location:e}){return t2(__(n),e)}function __(n,e=[]){let t=[];return B.Children.forEach(n,(r,a)=>{if(!B.isValidElement(r))return;let l=[...e,a];if(r.type===B.Fragment){t.push.apply(t,__(r.props.children,l));return}wt(r.type===io,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=__(r.props.children,l)),t.push(c)}),t}var cm="get",hm="application/x-www-form-urlencoded";function ip(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function g2(n){return ip(n)&&n.tagName.toLowerCase()==="button"}function y2(n){return ip(n)&&n.tagName.toLowerCase()==="form"}function _2(n){return ip(n)&&n.tagName.toLowerCase()==="input"}function v2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function E2(n,e){return n.button===0&&(!e||e==="_self")&&!v2(n)}var Zf=null;function T2(){if(Zf===null)try{new FormData(document.createElement("form"),0),Zf=!1}catch{Zf=!0}return Zf}var w2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yy(n){return n!=null&&!w2.has(n)?(br(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hm}"`),null):n}function b2(n,e){let t,r,a,l,c;if(y2(n)){let d=n.getAttribute("action");r=d?ts(d,e):null,t=n.getAttribute("method")||cm,a=Yy(n.getAttribute("enctype"))||hm,l=new FormData(n)}else if(g2(n)||_2(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(r=m?ts(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||cm,a=Yy(n.getAttribute("formenctype"))||Yy(d.getAttribute("enctype"))||hm,l=new FormData(d,n),!T2()){let{name:g,type:_,value:v}=n;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,v)}}else{if(ip(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cm,r=null,a=hm,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function I2(n,e,t,r){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&ts(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function A2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function S2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function R2(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await A2(l,t);return c.links?c.links():[]}return[]}));return D2(r.flat(1).filter(S2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function kb(n,e,t,r,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var _;return t[g].pathname!==m.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var v;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function x2(n,e,{includeHydrateFallback:t}={}){return C2(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function C2(n){return[...new Set(n)]}function N2(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function D2(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(N2(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function iS(){let n=B.useContext(Ru);return hv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function P2(){let n=B.useContext(np);return hv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var dv=B.createContext(void 0);dv.displayName="FrameworkContext";function sS(){let n=B.useContext(dv);return hv(n,"You must render this element inside a <HydratedRouter> element"),n}function O2(n,e){let t=B.useContext(dv),[r,a]=B.useState(!1),[l,c]=B.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:v}=e,b=B.useRef(null);B.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=ee=>{ee.forEach(te=>{c(te.isIntersecting)})},F=new IntersectionObserver(z,{threshold:.5});return b.current&&F.observe(b.current),()=>{F.disconnect()}}},[n]),B.useEffect(()=>{if(r){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[r]);let R=()=>{a(!0)},M=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:Yc(d,R),onBlur:Yc(m,M),onMouseEnter:Yc(g,R),onMouseLeave:Yc(_,M),onTouchStart:Yc(v,R)}]:[!1,b,{}]}function Yc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function V2({page:n,...e}){let{router:t}=iS(),r=B.useMemo(()=>GA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?B.createElement(M2,{page:n,matches:r,...e}):null}function k2(n){let{manifest:e,routeModules:t}=sS(),[r,a]=B.useState([]);return B.useEffect(()=>{let l=!1;return R2(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function M2({page:n,matches:e,...t}){let r=as(),{future:a,manifest:l,routeModules:c}=sS(),{basename:d}=iS(),{loaderData:m,matches:g}=P2(),_=B.useMemo(()=>kb(n,e,g,l,r,"data"),[n,e,g,l,r]),v=B.useMemo(()=>kb(n,e,g,l,r,"assets"),[n,e,g,l,r]),b=B.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let z=new Set,F=!1;if(e.forEach(te=>{var ge;let X=l.routes[te.route.id];!X||!X.hasLoader||(!_.some(fe=>fe.route.id===te.route.id)&&te.route.id in m&&((ge=c[te.route.id])!=null&&ge.shouldRevalidate)||X.hasClientLoader?F=!0:z.add(te.route.id))}),z.size===0)return[];let ee=I2(n,d,a.unstable_trailingSlashAwareDataRequests,"data");return F&&z.size>0&&ee.searchParams.set("_routes",e.filter(te=>z.has(te.route.id)).map(te=>te.route.id).join(",")),[ee.pathname+ee.search]},[d,a.unstable_trailingSlashAwareDataRequests,m,r,l,_,e,n,c]),R=B.useMemo(()=>x2(v,l),[v,l]),M=k2(v);return B.createElement(B.Fragment,null,b.map(z=>B.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),R.map(z=>B.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),M.map(({key:z,link:F})=>B.createElement("link",{key:z,nonce:t.nonce,...F,crossOrigin:F.crossOrigin??t.crossOrigin})))}function L2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var U2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{U2&&(window.__reactRouterVersion="7.13.0")}catch{}function j2({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=B.useRef();a.current==null&&(a.current=vD({window:r,v5Compat:!0}));let l=a.current,[c,d]=B.useState({action:l.action,location:l.location}),m=B.useCallback(g=>{t===!1?d(g):B.startTransition(()=>d(g))},[t]);return B.useLayoutEffect(()=>l.listen(m),[l,m]),B.createElement(m2,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var aS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lo=B.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:v,unstable_defaultShouldRevalidate:b,...R},M){let{basename:z,unstable_useTransitions:F}=B.useContext(ar),ee=typeof g=="string"&&aS.test(g),te=YA(g,z);g=te.to;let X=ZD(g,{relative:a}),[ge,fe,de]=O2(r,R),x=q2(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:F});function S(P){e&&e(P),P.defaultPrevented||x(P)}let C=B.createElement("a",{...R,...de,href:te.absoluteURL||X,onClick:te.isExternal||l?e:S,ref:L2(M,fe),target:m,"data-discover":!ee&&t==="render"?"true":void 0});return ge&&!ee?B.createElement(B.Fragment,null,C,B.createElement(V2,{page:X})):C});lo.displayName="Link";var z2=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let v=ed(c,{relative:g.relative}),b=as(),R=B.useContext(np),{navigator:M,basename:z}=B.useContext(ar),F=R!=null&&Q2(v)&&d===!0,ee=M.encodeLocation?M.encodeLocation(v).pathname:v.pathname,te=b.pathname,X=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(te=te.toLowerCase(),X=X?X.toLowerCase():null,ee=ee.toLowerCase()),X&&z&&(X=ts(X,z)||X);const ge=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let fe=te===ee||!a&&te.startsWith(ee)&&te.charAt(ge)==="/",de=X!=null&&(X===ee||!a&&X.startsWith(ee)&&X.charAt(ee.length)==="/"),x={isActive:fe,isPending:de,isTransitioning:F},S=fe?e:void 0,C;typeof r=="function"?C=r(x):C=[r,fe?"active":null,de?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(x):l;return B.createElement(lo,{...g,"aria-current":S,className:C,ref:_,style:P,to:c,viewTransition:d},typeof m=="function"?m(x):m)});z2.displayName="NavLink";var B2=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=cm,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:v,unstable_defaultShouldRevalidate:b,...R},M)=>{let{unstable_useTransitions:z}=B.useContext(ar),F=K2(),ee=$2(d,{relative:g}),te=c.toLowerCase()==="get"?"get":"post",X=typeof d=="string"&&aS.test(d),ge=fe=>{if(m&&m(fe),fe.defaultPrevented)return;fe.preventDefault();let de=fe.nativeEvent.submitter,x=(de==null?void 0:de.getAttribute("formmethod"))||c,S=()=>F(de||fe.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:v,unstable_defaultShouldRevalidate:b});z&&t!==!1?B.startTransition(()=>S()):S()};return B.createElement("form",{ref:M,method:te,action:ee,onSubmit:r?m:ge,...R,"data-discover":!X&&n==="render"?"true":void 0})});B2.displayName="Form";function F2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oS(n){let e=B.useContext(Ru);return wt(e,F2(n)),e}function q2(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m}={}){let g=rp(),_=as(),v=ed(n,{relative:l});return B.useCallback(b=>{if(E2(b,e)){b.preventDefault();let R=t!==void 0?t:xh(_)===xh(v),M=()=>g(n,{replace:R,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});m?B.startTransition(()=>M()):M()}},[_,g,v,t,r,e,n,a,l,c,d,m])}var H2=0,G2=()=>`__${String(++H2)}__`;function K2(){let{router:n}=oS("useSubmit"),{basename:e}=B.useContext(ar),t=c2(),r=n.fetch,a=n.navigate;return B.useCallback(async(l,c={})=>{let{action:d,method:m,encType:g,formData:_,body:v}=b2(l,e);if(c.navigate===!1){let b=c.fetcherKey||G2();await r(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:v,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:v,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function $2(n,{relative:e}={}){let{basename:t}=B.useContext(ar),r=B.useContext(xi);wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...ed(n||".",{relative:e})},c=as();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(v=>v).forEach(v=>d.append("index",v));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Zi([t,l.pathname])),xh(l)}function Q2(n,{relative:e}={}){let t=B.useContext(XA);wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=oS("useViewTransitionState"),a=ed(n,{relative:e});if(!t.isTransitioning)return!1;let l=ts(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=ts(t.nextLocation.pathname,r)||t.nextLocation.pathname;return xm(a.pathname,c)!=null||xm(a.pathname,l)!=null}const Y2=()=>{};var Mb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},W2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},uS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,_=l>>2,v=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,R=g&63;m||(R=64,c||(b=64)),r.push(t[_],t[v],t[b],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):W2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||v==null)throw new X2;const b=l<<2|d>>4;if(r.push(b),g!==64){const R=d<<4&240|g>>2;if(r.push(R),v!==64){const M=g<<6&192|v;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class X2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J2=function(n){const e=lS(n);return uS.encodeByteArray(e,!0)},Nm=function(n){return J2(n).replace(/\./g,"")},fv=function(n){try{return uS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dm(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Z2(t)||(n[t]=Dm(n[t],e[t]));return n}function Z2(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=()=>mv().__FIREBASE_DEFAULTS__,tP=()=>{if(typeof process>"u"||typeof Mb>"u")return;const n=Mb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&fv(n[1]);return e&&JSON.parse(e)},sp=()=>{try{return Y2()||eP()||tP()||nP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rP=n=>{var e,t;return(t=(e=sp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},iP=n=>{const e=rP(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pv=()=>{var n;return(n=sp())==null?void 0:n.config},sP=n=>{var e;return(e=sp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nm(JSON.stringify(t)),Nm(JSON.stringify(c)),""].join(".")}const fh={};function lP(){const n={prod:[],emulator:[]};for(const e of Object.keys(fh))fh[e]?n.emulator.push(e):n.prod.push(e);return n}function uP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Lb=!1;function hS(n,e){if(typeof window>"u"||typeof document>"u"||!Cu(window.location.host)||fh[n]===e||fh[n]||Lb)return;fh[n]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=lP().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,R){b.setAttribute("width","24"),b.setAttribute("id",R),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Lb=!0,c()},b}function _(b,R){b.setAttribute("id",R),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=uP(r),R=t("text"),M=document.getElementById(R)||document.createElement("span"),z=t("learnmore"),F=document.getElementById(z)||document.createElement("a"),ee=t("preprendIcon"),te=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const X=b.element;d(X),_(F,z);const ge=g();m(te,ee),X.append(te,M,F,ge),document.body.appendChild(X)}l?(M.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function ap(){var e;const n=(e=sp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hP(){return typeof window<"u"||dS()}function dS(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mS(){const n=It();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pS(){return!ap()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gS(){return!ap()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Ch(){try{return typeof indexedDB=="object"}catch{return!1}}function fP(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="FirebaseError";class Dn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mP,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?pP(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Dn(a,d,r)}}function pP(n,e){return n.replace(gP,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const gP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(jb(l)&&jb(c)){if(!sa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function jb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function ah(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yS(n,e){const t=new _P(n,e);return t.subscribe.bind(t)}class _P{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vP(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Wy),a.error===void 0&&(a.error=Wy),a.complete===void 0&&(a.complete=Wy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n){return n&&n._delegate?n._delegate:n}class bi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new aP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wP(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TP(n){return n===so?void 0:n}function wP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new EP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=[];var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const vS={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},bP=Me.INFO,IP={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},AP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=IP[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class op{constructor(e){this.name=e,this._logLevel=bP,this._logHandler=AP,this._userLogHandler=null,yv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}function SP(n){yv.forEach(e=>{e.setLogLevel(n)})}function RP(n,e){for(const t of yv){let r=null;e&&e.level&&(r=vS[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&n({level:Me[l].toLowerCase(),message:d,args:c,type:a.name})}}}const xP=(n,e)=>e.some(t=>n instanceof t);let zb,Bb;function CP(){return zb||(zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NP(){return Bb||(Bb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ES=new WeakMap,v_=new WeakMap,TS=new WeakMap,Xy=new WeakMap,_v=new WeakMap;function DP(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ea(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&ES.set(t,n)}).catch(()=>{}),_v.set(e,n),e}function PP(n){if(v_.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});v_.set(n,e)}let E_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return v_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ea(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OP(n){E_=n(E_)}function VP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Jy(this),e,...t);return TS.set(r,e.sort?e.sort():[e]),ea(r)}:NP().includes(n)?function(...e){return n.apply(Jy(this),e),ea(ES.get(this))}:function(...e){return ea(n.apply(Jy(this),e))}}function kP(n){return typeof n=="function"?VP(n):(n instanceof IDBTransaction&&PP(n),xP(n,CP())?new Proxy(n,E_):n)}function ea(n){if(n instanceof IDBRequest)return DP(n);if(Xy.has(n))return Xy.get(n);const e=kP(n);return e!==n&&(Xy.set(n,e),_v.set(e,n)),e}const Jy=n=>_v.get(n);function MP(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=ea(c);return r&&c.addEventListener("upgradeneeded",m=>{r(ea(c.result),m.oldVersion,m.newVersion,ea(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const LP=["get","getKey","getAll","getAllKeys","count"],UP=["put","add","delete","clear"],Zy=new Map;function Fb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zy.get(e))return Zy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=UP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||LP.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return Zy.set(e,l),l}OP(n=>({...n,get:(e,t,r)=>Fb(e,t)||n.get(e,t,r),has:(e,t)=>!!Fb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function zP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",T_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new op("@firebase/app"),BP="@firebase/app-compat",FP="@firebase/analytics-compat",qP="@firebase/analytics",HP="@firebase/app-check-compat",GP="@firebase/app-check",KP="@firebase/auth",$P="@firebase/auth-compat",QP="@firebase/database",YP="@firebase/data-connect",WP="@firebase/database-compat",XP="@firebase/functions",JP="@firebase/functions-compat",ZP="@firebase/installations",eO="@firebase/installations-compat",tO="@firebase/messaging",nO="@firebase/messaging-compat",rO="@firebase/performance",iO="@firebase/performance-compat",sO="@firebase/remote-config",aO="@firebase/remote-config-compat",oO="@firebase/storage",lO="@firebase/storage-compat",uO="@firebase/firestore",cO="@firebase/ai",hO="@firebase/firestore-compat",dO="firebase",fO="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]",mO={[Pm]:"fire-core",[BP]:"fire-core-compat",[qP]:"fire-analytics",[FP]:"fire-analytics-compat",[GP]:"fire-app-check",[HP]:"fire-app-check-compat",[KP]:"fire-auth",[$P]:"fire-auth-compat",[QP]:"fire-rtdb",[YP]:"fire-data-connect",[WP]:"fire-rtdb-compat",[XP]:"fire-fn",[JP]:"fire-fn-compat",[ZP]:"fire-iid",[eO]:"fire-iid-compat",[tO]:"fire-fcm",[nO]:"fire-fcm-compat",[rO]:"fire-perf",[iO]:"fire-perf-compat",[sO]:"fire-rc",[aO]:"fire-rc-compat",[oO]:"fire-gcs",[lO]:"fire-gcs-compat",[uO]:"fire-fst",[hO]:"fire-fst-compat",[cO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Map,ru=new Map,iu=new Map;function Nh(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wS(n,e){n.container.addOrOverwriteComponent(e)}function la(n){const e=n.name;if(iu.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;iu.set(e,n);for(const t of oa.values())Nh(t,n);for(const t of ru.values())Nh(t,n);return!0}function vv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pO(n,e,t=aa){vv(n,e).clearInstance(t)}function Ev(n){return n.options!==void 0}function bS(n){return Ev(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function vt(n){return n==null?!1:n.settings!==void 0}function gO(){iu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new zo("app","Firebase",yO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IS=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n,e){const t=fv(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class _O extends IS{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&qb(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&qb(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,jr(Pm,T_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){wv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ir.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=fO;function Tv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:aa,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ir.create("bad-app-name",{appName:String(a)});if(t||(t=pv()),!t)throw ir.create("no-options");const l=oa.get(a);if(l){if(sa(t,l.options)&&sa(r,l.config))return l;throw ir.create("duplicate-app",{appName:a})}const c=new _S(a);for(const m of iu.values())c.addComponent(m);const d=new IS(t,r,c);return oa.set(a,d),d}function vO(n,e={}){if(hP()&&!dS())throw ir.create("invalid-server-app-environment");let t,r=e||{};if(n&&(Ev(n)?t=n.options:bS(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=pv()),!t)throw ir.create("no-options");const a={...r,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=_=>[..._].reduce((v,b)=>Math.imul(31,v)+b.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ir.create("finalization-registry-not-supported",{});const c=""+l(JSON.stringify(a)),d=ru.get(c);if(d)return d.incRefCount(r.releaseOnDeref),d;const m=new _S(c);for(const _ of iu.values())m.addComponent(_);const g=new _O(t,r,c,m);return ru.set(c,g),g}function AS(n=aa){const e=oa.get(n);if(!e&&n===aa&&pv())return Tv();if(!e)throw ir.create("no-app",{appName:n});return e}function EO(){return Array.from(oa.values())}async function wv(n){let e=!1;const t=n.name;oa.has(t)?(e=!0,oa.delete(t)):ru.has(t)&&n.decRefCount()<=0&&(ru.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function jr(n,e,t){let r=mO[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(c.join(" "));return}la(new bi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function SS(n,e){if(n!==null&&typeof n!="function")throw ir.create("invalid-log-argument");RP(n,e)}function RS(n){SP(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="firebase-heartbeat-database",wO=1,Dh="firebase-heartbeat-store";let e_=null;function xS(){return e_||(e_=MP(TO,wO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ir.create("idb-open",{originalErrorMessage:n.message})})),e_}async function bO(n){try{const t=(await xS()).transaction(Dh),r=await t.objectStore(Dh).get(CS(n));return await t.done,r}catch(e){if(e instanceof Dn)ns.warn(e.message);else{const t=ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(t.message)}}}async function Hb(n,e){try{const r=(await xS()).transaction(Dh,"readwrite");await r.objectStore(Dh).put(e,CS(n)),await r.done}catch(t){if(t instanceof Dn)ns.warn(t.message);else{const r=ir.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ns.warn(r.message)}}}function CS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=1024,AO=30;class SO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Gb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>AO){const c=CO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gb(),{heartbeatsToSend:r,unsentEntries:a}=RO(this._heartbeatsCache.heartbeats),l=Nm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ns.warn(t),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function RO(n,e=IO){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Kb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Kb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ch()?fP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kb(n){return Nm(JSON.stringify({version:2,heartbeats:n})).length}function CO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(n){la(new bi("platform-logger",e=>new jP(e),"PRIVATE")),la(new bi("heartbeat",e=>new SO(e),"PRIVATE")),jr(Pm,T_,n),jr(Pm,T_,"esm2020"),jr("fire-js","")}NO("");const DO=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Dn,SDK_VERSION:ya,_DEFAULT_ENTRY_NAME:aa,_addComponent:Nh,_addOrOverwriteComponent:wS,_apps:oa,_clearComponents:gO,_components:iu,_getProvider:vv,_isFirebaseApp:Ev,_isFirebaseServerApp:vt,_isFirebaseServerAppSettings:bS,_registerComponent:la,_removeServiceInstance:pO,_serverApps:ru,deleteApp:wv,getApp:AS,getApps:EO,initializeApp:Tv,initializeServerApp:vO,onLog:SS,registerVersion:jr,setLogLevel:RS},Symbol.toStringTag,{value:"Module"})),Wc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ll={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function NS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OO=PO,VO=NS,DS=new zo("auth","Firebase",NS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=new op("@firebase/auth");function kO(n,...e){Om.logLevel<=Me.WARN&&Om.warn(`Auth (${ya}): ${n}`,...e)}function dm(n,...e){Om.logLevel<=Me.ERROR&&Om.error(`Auth (${ya}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n,...e){throw Iv(n,...e)}function en(n,...e){return Iv(n,...e)}function bv(n,e,t){const r={...VO(),[e]:t};return new zo("auth","Firebase",r).create(e,{appName:n.name})}function ln(n){return bv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Du(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&_n(n,"argument-error"),bv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Iv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return DS.create(n,...e)}function ae(n,e,...t){if(!n)throw Iv(e,...t)}function _i(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dm(e),new Error(e)}function qr(n,e){n||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Av(){return $b()==="http:"||$b()==="https:"}function $b(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Av()||fS()||"connection"in navigator)?navigator.onLine:!0}function LO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.shortDelay=e,this.longDelay=t,qr(t>e,"Short delay should be less than long delay!"),this.isMobile=cP()||gv()}get(){return MO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(n,e){qr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zO=new td(3e4,6e4);function Nt(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Dt(n,e,t,r,a={}){return OS(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Nu({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return dP()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Cu(n.emulatorConfig.host)&&(g.credentials="include"),PS.fetch()(await VS(n,n.config.apiHost,t,d),g)})}async function OS(n,e,t){n._canInitEmulator=!1;const r={...UO,...e};try{const a=new FO(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw oh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw oh(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw oh(n,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw bv(n,_,g);_n(n,_)}}catch(a){if(a instanceof Dn)throw a;_n(n,"network-request-failed",{message:String(a)})}}async function os(n,e,t,r,a={}){const l=await Dt(n,e,t,r,a);return"mfaPendingCredential"in l&&_n(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function VS(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?Sv(n.config,a):`${n.config.apiScheme}://${a}`;return jO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function BO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),zO.get())})}}function oh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=en(n,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){return n!==void 0&&n.getResponse!==void 0}function Yb(n){return n!==void 0&&n.enterprise!==void 0}class kS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(n){return(await Dt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function MS(n,e){return Dt(n,"GET","/v2/recaptchaConfig",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(n,e){return Dt(n,"POST","/v1/accounts:delete",e)}async function GO(n,e){return Dt(n,"POST","/v1/accounts:update",e)}async function Vm(n,e){return Dt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KO(n,e=!1){const t=be(n),r=await t.getIdToken(e),a=lp(r);ae(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:mh(t_(a.auth_time)),issuedAtTime:mh(t_(a.iat)),expirationTime:mh(t_(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function t_(n){return Number(n)*1e3}function lp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dm("JWT malformed, contained fewer than 3 sections"),null;try{const a=fv(t);return a?JSON.parse(a):(dm("Failed to decode base64 JWT payload"),null)}catch(a){return dm("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Wb(n){const e=lp(n);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Dn&&$O(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $O({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mh(this.lastLoginAt),this.creationTime=mh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(n){var v;const e=n.auth,t=await n.getIdToken(),r=await rs(n,Vm(e,{idToken:t}));ae(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?LS(a.providerUserInfo):[],c=WO(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new w_(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function YO(n){const e=be(n);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WO(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function LS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n,e){const t=await OS(n,{},async()=>{const r=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await VS(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return n.emulatorConfig&&Cu(n.emulatorConfig.host)&&(m.credentials="include"),PS.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JO(n,e){return Dt(n,"POST","/v2/accounts:revokeToken",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const t=Wb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await XO(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Wl;return r&&(ae(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ae(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(ae(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(n,e){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ur{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new QO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new w_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await rs(this,this.stsTokenManager.getToken(this.auth,e));return ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KO(this,e)}reload(){return YO(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vt(this.auth.app))return Promise.reject(ln(this.auth));const e=await this.getIdToken();return await rs(this,HO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:R,providerData:M,stsTokenManager:z}=t;ae(v&&z,e,"internal-error");const F=Wl.fromJSON(this.name,z);ae(typeof v=="string",e,"internal-error"),Ks(r,e.name),Ks(a,e.name),ae(typeof b=="boolean",e,"internal-error"),ae(typeof R=="boolean",e,"internal-error"),Ks(l,e.name),Ks(c,e.name),Ks(d,e.name),Ks(m,e.name),Ks(g,e.name),Ks(_,e.name);const ee=new Ur({uid:v,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:g,lastLoginAt:_});return M&&Array.isArray(M)&&(ee.providerData=M.map(te=>({...te}))),m&&(ee._redirectEventId=m),ee}static async _fromIdTokenResponse(e,t,r=!1){const a=new Wl;a.updateFromServerResponse(t);const l=new Ur({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Oh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ae(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?LS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Wl;d.updateFromIdToken(r);const m=new Ur({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new w_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new Map;function rr(n){qr(n instanceof Function,"Expected a class definition");let e=Xb.get(n);return e?(qr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Xb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}US.type="NONE";const su=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(n,e,t){return`firebase:${n}:${e}:${t}`}class Xl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=vo(this.userKey,a.apiKey,l),this.fullPersistenceKey=vo("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vm(this.auth,{idToken:e}).catch(()=>{});return t?Ur._fromGetAccountInfoResponse(this.auth,t,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xl(rr(su),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||rr(su);const c=vo(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let v;if(typeof _=="string"){const b=await Vm(e,{idToken:_}).catch(()=>{});if(!b)break;v=await Ur._fromGetAccountInfoResponse(e,b,_)}else v=Ur._fromJSON(e,_);g!==l&&(d=v),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Xl(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Xl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qS(e))return"Blackberry";if(HS(e))return"Webos";if(zS(e))return"Safari";if((e.includes("chrome/")||BS(e))&&!e.includes("edge/"))return"Chrome";if(nd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jS(n=It()){return/firefox\//i.test(n)}function zS(n=It()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BS(n=It()){return/crios\//i.test(n)}function FS(n=It()){return/iemobile/i.test(n)}function nd(n=It()){return/android/i.test(n)}function qS(n=It()){return/blackberry/i.test(n)}function HS(n=It()){return/webos/i.test(n)}function rd(n=It()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZO(n=It()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function eV(n=It()){var e;return rd(n)&&!!((e=window.navigator)!=null&&e.standalone)}function tV(){return mS()&&document.documentMode===10}function GS(n=It()){return rd(n)||nd(n)||HS(n)||qS(n)||/windows phone/i.test(n)||FS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n,e=[]){let t;switch(n){case"Browser":t=Jb(It());break;case"Worker":t=`${Jb(It())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ya}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(n,e={}){return Dt(n,"GET","/v2/passwordPolicy",Nt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=6;class sV{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zb(this),this.idTokenSubscription=new Zb(this),this.beforeStateQueue=new nV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rr(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vm(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(vt(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vt(this.app))return Promise.reject(ln(this));const t=e?be(e):null;return t&&ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vt(this.app)?Promise.reject(ln(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vt(this.app)?Promise.reject(ln(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rV(this),t=new sV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await JO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rr(e)||this._popupRedirectResolver;ae(t,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(vt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&kO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function At(n){return be(n)}class Zb{constructor(e){this.auth=e,this.observer=null,this.addObserver=yS(t=>this.observer=t)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oV(n){id=n}function Rv(n){return id.loadJS(n)}function lV(){return id.recaptchaV2Script}function uV(){return id.recaptchaEnterpriseScript}function cV(){return id.gapiScript}function $S(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=500,dV=6e4,em=1e12;class fV{constructor(e){this.auth=e,this.counter=em,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new gV(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||em;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||em;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||em;return(r=this._widgets.get(t))==null||r.execute(),""}}class mV{constructor(){this.enterprise=new pV}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pV{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class gV{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;ae(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=yV(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},dV)},hV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function yV(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const _V="recaptcha-enterprise",ph="NO_RECAPTCHA";class QS{constructor(e){this.type=_V,this.auth=At(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{MS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new kS(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;Yb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(ph)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mV().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&Yb(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=uV();m.length!==0&&(m+=d),Rv(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Xc(n,e,t,r=!1,a=!1){const l=new QS(n);let c;if(a)c=ph;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function ta(n,e,t,r,a){var l,c;if(a==="EMAIL_PASSWORD_PROVIDER")if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Xc(n,e,t,t==="getOobCode");return r(n,d)}else return r(n,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Xc(n,e,t,t==="getOobCode");return r(n,m)}else return Promise.reject(d)});else if(a==="PHONE_PROVIDER")if((c=n._getRecaptchaConfig())!=null&&c.isProviderEnabled("PHONE_PROVIDER")){const d=await Xc(n,e,t);return r(n,d).catch(async m=>{var g;if(((g=n._getRecaptchaConfig())==null?void 0:g.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const _=await Xc(n,e,t,!1,!0);return r(n,_)}return Promise.reject(m)})}else{const d=await Xc(n,e,t,!1,!0);return r(n,d)}else return Promise.reject(a+" provider is not supported.")}async function vV(n){const e=At(n),t=await MS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new kS(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new QS(e).verify()}function EV(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(rr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TV(n,e,t){const r=At(n);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=YS(e),{host:c,port:d}=wV(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(sa(g,r.config.emulator)&&sa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Cu(c)?(cS(`${l}//${c}${m}`),hS("Auth",!0)):a||bV()}function YS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wV(n){const e=YS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:eI(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:eI(c)}}}function eI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function bV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(n,e){return Dt(n,"POST","/v1/accounts:resetPassword",Nt(n,e))}async function IV(n,e){return Dt(n,"POST","/v1/accounts:update",e)}async function AV(n,e){return Dt(n,"POST","/v1/accounts:signUp",e)}async function SV(n,e){return Dt(n,"POST","/v1/accounts:update",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(n,e){return os(n,"POST","/v1/accounts:signInWithPassword",Nt(n,e))}async function up(n,e){return Dt(n,"POST","/v1/accounts:sendOobCode",Nt(n,e))}async function xV(n,e){return up(n,e)}async function CV(n,e){return up(n,e)}async function NV(n,e){return up(n,e)}async function DV(n,e){return up(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(n,e){return os(n,"POST","/v1/accounts:signInWithEmailLink",Nt(n,e))}async function OV(n,e){return os(n,"POST","/v1/accounts:signInWithEmailLink",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Pu{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Vh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Vh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ta(e,t,"signInWithPassword",RV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return PV(e,{email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ta(e,r,"signUpPassword",AV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return OV(e,{idToken:t,email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(n,e){return os(n,"POST","/v1/accounts:signInWithIdp",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="http://localhost";class Ii extends Pu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_n("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Ii(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return es(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,es(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,es(e,t)}buildRequest(){const e={requestUri:VV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(n,e){return Dt(n,"POST","/v1/accounts:sendVerificationCode",Nt(n,e))}async function kV(n,e){return os(n,"POST","/v1/accounts:signInWithPhoneNumber",Nt(n,e))}async function MV(n,e){const t=await os(n,"POST","/v1/accounts:signInWithPhoneNumber",Nt(n,e));if(t.temporaryProof)throw oh(n,"account-exists-with-different-credential",t);return t}const LV={USER_NOT_FOUND:"user-not-found"};async function UV(n,e){const t={...e,operation:"REAUTH"};return os(n,"POST","/v1/accounts:signInWithPhoneNumber",Nt(n,t),LV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Pu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Eo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Eo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return kV(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return MV(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return UV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new Eo({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zV(n){const e=Yl(ah(n)).link,t=e?Yl(ah(e)).deep_link_id:null,r=Yl(ah(n)).deep_link_id;return(r?Yl(ah(r)).link:null)||r||t||e||n}class cp{constructor(e){const t=Yl(ah(e)),r=t.apiKey??null,a=t.oobCode??null,l=jV(t.mode??null);ae(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=zV(e);try{return new cp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.providerId=_a.PROVIDER_ID}static credential(e,t){return Vh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cp.parseLink(t);return ae(r,"argument-error"),Vh._fromEmailAndCode(e,r.code,r.tenantId)}}_a.PROVIDER_ID="password";_a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends ls{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Jl extends Ou{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ae("providerId"in t&&"signInMethod"in t,"argument-error"),Ii._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return ae(e.idToken||e.accessToken,"argument-error"),Ii._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Jl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Jl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:c,providerId:d}=e;if(!r&&!a&&!t&&!l||!d)return null;try{return new Jl(d)._credential({idToken:t,accessToken:r,nonce:c,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Ou{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ii._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return pi.credential(t,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Ou{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="http://localhost";class au extends Pu{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return es(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,es(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,es(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new au(r,l)}static _create(e,t){return new au(e,t)}buildRequest(){return{requestUri:BV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="saml.";class km extends ls{constructor(e){ae(e.startsWith(FV),"argument-error"),super(e)}static credentialFromResult(e){return km.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return km.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=au.fromJSON(e);return ae(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return au._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Ou{constructor(){super("twitter.com")}static credential(e,t){return Ii._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return yi.credential(t,r)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(n,e){return os(n,"POST","/v1/accounts:signUp",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Ur._fromIdTokenResponse(e,r,a),c=nI(r);return new Ir({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=nI(r);return new Ir({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function nI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(n){var a;if(vt(n.app))return Promise.reject(ln(n));const e=At(n);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new Ir({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await XS(e,{returnSecureToken:!0}),r=await Ir._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends Dn{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Mm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Mm(e,t,r,a)}}function JS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Mm._fromErrorAndOperation(n,l,e,r):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(n,e){const t=be(n);await hp(!0,t,e);const{providerUserInfo:r}=await GO(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=ZS(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function xv(n,e,t=!1){const r=await rs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ir._forOperation(n,"link",r)}async function hp(n,e,t){await Oh(e);const r=ZS(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";ae(r.has(t)===n,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(n,e,t=!1){const{auth:r}=n;if(vt(r.app))return Promise.reject(ln(r));const a="reauthenticate";try{const l=await rs(n,JS(r,a,e,n),t);ae(l.idToken,r,"internal-error");const c=lp(l.idToken);ae(c,r,"internal-error");const{sub:d}=c;return ae(n.uid===d,r,"user-mismatch"),Ir._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(n,e,t=!1){if(vt(n.app))return Promise.reject(ln(n));const r="signIn",a=await JS(n,r,e),l=await Ir._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function dp(n,e){return tR(At(n),e)}async function nR(n,e){const t=be(n);return await hp(!1,t,e.providerId),xv(t,e)}async function rR(n,e){return eR(be(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(n,e){return os(n,"POST","/v1/accounts:signInWithCustomToken",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(n,e){if(vt(n.app))return Promise.reject(ln(n));const t=At(n),r=await GV(t,{token:e,returnSecureToken:!0}),a=await Ir._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Cv._fromServerResponse(e,t):"totpInfo"in t?Nv._fromServerResponse(e,t):_n(e,"internal-error")}}class Cv extends sd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Cv(t)}}class Nv extends sd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Nv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n,e,t){var r;ae(((r=t.url)==null?void 0:r.length)>0,n,"invalid-continue-uri"),ae(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ae(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ae(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ae(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dv(n){const e=At(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $V(n,e,t){const r=At(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&fp(r,a,t),await ta(r,a,"getOobCode",CV,"EMAIL_PASSWORD_PROVIDER")}async function QV(n,e,t){await WS(be(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Dv(n),r})}async function YV(n,e){await SV(be(n),{oobCode:e})}async function iR(n,e){const t=be(n),r=await WS(t,{oobCode:e}),a=r.requestType;switch(ae(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(r.mfaInfo,t,"internal-error");default:ae(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=sd._fromServerResponse(At(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function WV(n,e){const{data:t}=await iR(be(n),e);return t.email}async function sR(n,e,t){if(vt(n.app))return Promise.reject(ln(n));const r=At(n),c=await ta(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XS,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Dv(n),m}),d=await Ir._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function aR(n,e,t){return vt(n.app)?Promise.reject(ln(n)):dp(be(n),_a.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Dv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(n,e,t){const r=At(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(c,d){ae(d.handleCodeInApp,r,"argument-error"),d&&fp(r,c,d)}l(a,t),await ta(r,a,"getOobCode",NV,"EMAIL_PASSWORD_PROVIDER")}function JV(n,e){const t=cp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function ZV(n,e,t){if(vt(n.app))return Promise.reject(ln(n));const r=be(n),a=_a.credentialWithLink(e,t||Ph());return ae(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),dp(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(n,e){return Dt(n,"POST","/v1/accounts:createAuthUri",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(n,e){const t=Av()?Ph():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await ek(be(n),r);return a||[]}async function nk(n,e){const t=be(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&fp(t.auth,a,e);const{email:l}=await xV(t.auth,a);l!==n.email&&await n.reload()}async function rk(n,e,t){const r=be(n),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&fp(r.auth,l,t);const{email:c}=await DV(r.auth,l);c!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(n,e){return Dt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=be(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await rs(r,ik(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function sk(n,e){const t=be(n);return vt(t.auth.app)?Promise.reject(ln(t.auth)):lR(t,e,null)}function ak(n,e){return lR(be(n),null,e)}async function lR(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const c=await rs(n,IV(r,l));await n._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){var a,l;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const c=(l=(a=lp(n.idToken))==null?void 0:a.firebase)==null?void 0:l.sign_in_provider;if(c){const d=c!=="anonymous"&&c!=="custom"?c:null;return new Zl(r,d)}}if(!e)return null;switch(e){case"facebook.com":return new lk(r,t);case"github.com":return new uk(r,t);case"google.com":return new ck(r,t);case"twitter.com":return new hk(r,t,n.screenName||null);case"custom":case"anonymous":return new Zl(r,null);default:return new Zl(r,e,t)}}class Zl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class uR extends Zl{constructor(e,t,r,a){super(e,t,r),this.username=a}}class lk extends Zl{constructor(e,t){super(e,"facebook.com",t)}}class uk extends uR{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class ck extends Zl{constructor(e,t){super(e,"google.com",t)}}class hk extends uR{constructor(e,t,r){super(e,"twitter.com",t,r)}}function dk(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:ok(t)}function fk(n,e,t,r){return be(n).onAuthStateChanged(e,t,r)}function mk(n){return be(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new po("enroll",e,t)}static _fromMfaPendingCredential(e){return new po("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return po._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return po._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=At(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(d=>sd._fromServerResponse(r,d));ae(a.mfaPendingCredential,r,"internal-error");const c=po._fromMfaPendingCredential(a.mfaPendingCredential);return new Pv(c,l,async d=>{const m=await d._process(r,c);delete a.mfaInfo,delete a.mfaPendingCredential;const g={...a,idToken:m.idToken,refreshToken:m.refreshToken};switch(t.operationType){case"signIn":const _=await Ir._fromIdTokenResponse(r,t.operationType,g);return await r._updateCurrentUser(_.user),_;case"reauthenticate":return ae(t.user,r,"internal-error"),Ir._forOperation(t.user,t.operationType,g);default:_n(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function pk(n,e){var a;const t=be(n),r=e;return ae(e.customData.operationType,t,"argument-error"),ae((a=r.customData._serverResponse)==null?void 0:a.mfaPendingCredential,t,"argument-error"),Pv._fromError(t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n,e){return Dt(n,"POST","/v2/accounts/mfaEnrollment:start",Nt(n,e))}function gk(n,e){return Dt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(n,e))}function yk(n,e){return Dt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(n,e))}class Ov{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>sd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Ov(e)}async getSession(){return po._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await rs(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await rs(this.user,yk(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const n_=new WeakMap;function _k(n){const e=be(n);return n_.has(e)||n_.set(e,Ov._fromUser(e)),n_.get(e)}const Lm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lm,"1"),this.storage.removeItem(Lm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=1e3,Ek=10;class hR extends cR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);tV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ek):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},vk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hR.type="LOCAL";const Vv=hR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR extends cR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dR.type="SESSION";const bo=dR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new mp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await Tk(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=ad("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return window}function bk(n){Yt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}async function Ik(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ak(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Sk(){return kv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="firebaseLocalStorageDb",Rk=1,Um="firebaseLocalStorage",mR="fbase_key";class od{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pp(n,e){return n.transaction([Um],e?"readwrite":"readonly").objectStore(Um)}function xk(){const n=indexedDB.deleteDatabase(fR);return new od(n).toPromise()}function b_(){const n=indexedDB.open(fR,Rk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Um,{keyPath:mR})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Um)?e(r):(r.close(),await xk(),e(await b_()))})})}async function iI(n,e,t){const r=pp(n,!0).put({[mR]:e,value:t});return new od(r).toPromise()}async function Ck(n,e){const t=pp(n,!1).get(e),r=await new od(t).toPromise();return r===void 0?null:r.value}function sI(n,e){const t=pp(n,!0).delete(e);return new od(t).toPromise()}const Nk=800,Dk=3;class pR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Dk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mp._getInstance(Sk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Ik(),!this.activeServiceWorker)return;this.sender=new wk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b_();return await iI(e,Lm,"1"),await sI(e,Lm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>iI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Ck(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=pp(a,!1).getAll();return new od(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pR.type="LOCAL";const kh=pR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n,e){return Dt(n,"POST","/v2/accounts/mfaSignIn:start",Nt(n,e))}function Pk(n,e){return Dt(n,"POST","/v2/accounts/mfaSignIn:finalize",Nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=$S("rcb"),Ok=new td(3e4,6e4);class Vk{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Yt().grecaptcha)!=null&&e.render)}load(e,t=""){return ae(kk(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Qb(Yt().grecaptcha)?Promise.resolve(Yt().grecaptcha):new Promise((r,a)=>{const l=Yt().setTimeout(()=>{a(en(e,"network-request-failed"))},Ok.get());Yt()[r_]=()=>{Yt().clearTimeout(l),delete Yt()[r_];const d=Yt().grecaptcha;if(!d||!Qb(d)){a(en(e,"internal-error"));return}const m=d.render;d.render=(g,_)=>{const v=m(g,_);return this.counter++,v},this.hostLanguage=t,r(d)};const c=`${lV()}?${Nu({onload:r_,render:"explicit",hl:t})}`;Rv(c).catch(()=>{clearTimeout(l),a(en(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=Yt().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function kk(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class Mk{async load(e){return new fV(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="recaptcha",Lk={theme:"light",type:"image"};let Uk=class{constructor(e,t,r={...Lk}){this.parameters=r,this.type=gh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=At(e),this.isInvisible=this.parameters.size==="invisible",ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;ae(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mk:new Vk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Yt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ae(Av()&&!kv(),this.auth,"internal-error"),await jk(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await qO(this.auth);ae(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function jk(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Eo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function zk(n,e,t){if(vt(n.app))return Promise.reject(ln(n));const r=At(n),a=await gp(r,e,be(t));return new Mv(a,l=>dp(r,l))}async function Bk(n,e,t){const r=be(n);await hp(!1,r,"phone");const a=await gp(r.auth,e,be(t));return new Mv(a,l=>nR(r,l))}async function Fk(n,e,t){const r=be(n);if(vt(r.auth.app))return Promise.reject(ln(r.auth));const a=await gp(r.auth,e,be(t));return new Mv(a,l=>rR(r,l))}async function gp(n,e,t){var r;if(!n._getRecaptchaConfig())try{await vV(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a){ae(l.type==="enroll",n,"internal-error");const c={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ta(n,c,"mfaSmsEnrollment",async(_,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===ph){ae((t==null?void 0:t.type)===gh,_,"argument-error");const b=await i_(_,v,t);return rI(_,b)}return rI(_,v)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneSessionInfo.sessionInfo}else{ae(l.type==="signin",n,"internal-error");const c=((r=a.multiFactorHint)==null?void 0:r.uid)||a.multiFactorUid;ae(c,n,"missing-multi-factor-info");const d={mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ta(n,d,"mfaSmsSignIn",async(v,b)=>{if(b.phoneSignInInfo.captchaResponse===ph){ae((t==null?void 0:t.type)===gh,v,"argument-error");const R=await i_(v,b,t);return aI(v,R)}return aI(v,b)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ta(n,l,"sendVerificationCode",async(g,_)=>{if(_.captchaResponse===ph){ae((t==null?void 0:t.type)===gh,g,"argument-error");const v=await i_(g,_,t);return tI(g,v)}return tI(g,_)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).sessionInfo}}finally{t==null||t._reset()}}async function qk(n,e){const t=be(n);if(vt(t.auth.app))return Promise.reject(ln(t.auth));await xv(t,e)}async function i_(n,e,t){ae(t.type===gh,n,"argument-error");const r=await t.verify();ae(typeof r=="string",n,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:c,clientType:d,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,c=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:c,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:r}),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io=class fm{constructor(e){this.providerId=fm.PROVIDER_ID,this.auth=At(e)}verifyPhoneNumber(e,t){return gp(this.auth,e,be(t))}static credential(e,t){return Eo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return fm.credentialFromTaggedObject(t)}static credentialFromError(e){return fm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Eo._fromTokenResponse(t,r):null}};Io.PROVIDER_ID="phone";Io.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(n,e){return e?rr(e):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Pu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return es(e,this._buildIdpRequest())}_linkToIdToken(e,t){return es(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return es(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Hk(n){return tR(n.auth,new Lv(n),n.bypassAuthState)}function Gk(n){const{auth:e,user:t}=n;return ae(t,e,"internal-error"),eR(t,new Lv(n),n.bypassAuthState)}async function Kk(n){const{auth:e,user:t}=n;return ae(t,e,"internal-error"),xv(t,new Lv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hk;case"linkViaPopup":case"linkViaRedirect":return Kk;case"reauthViaPopup":case"reauthViaRedirect":return Gk;default:_n(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new td(2e3,1e4);async function yR(n,e,t){if(vt(n.app))return Promise.reject(en(n,"operation-not-supported-in-this-environment"));const r=At(n);Du(n,e,ls);const a=Bo(r,t);return new Wi(r,"signInViaPopup",e,a).executeNotNull()}async function Qk(n,e,t){const r=be(n);if(vt(r.auth.app))return Promise.reject(en(r.auth,"operation-not-supported-in-this-environment"));Du(r.auth,e,ls);const a=Bo(r.auth,t);return new Wi(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function Yk(n,e,t){const r=be(n);Du(r.auth,e,ls);const a=Bo(r.auth,t);return new Wi(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class Wi extends gR{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=ad();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$k.get())};e()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="pendingRedirect",yh=new Map;class Xk extends gR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const r=await Jk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jk(n,e){const t=vR(e),r=_R(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function Uv(n,e){return _R(n)._set(vR(e),"true")}function Zk(){yh.clear()}function jv(n,e){yh.set(n._key(),e)}function _R(n){return rr(n._redirectPersistence)}function vR(n){return vo(Wk,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n,e,t){return tM(n,e,t)}async function tM(n,e,t){if(vt(n.app))return Promise.reject(ln(n));const r=At(n);Du(n,e,ls),await r._initializationPromise;const a=Bo(r,t);return await Uv(a,r),a._openRedirect(r,e,"signInViaRedirect")}function nM(n,e,t){return rM(n,e,t)}async function rM(n,e,t){const r=be(n);if(Du(r.auth,e,ls),vt(r.auth.app))return Promise.reject(ln(r.auth));await r.auth._initializationPromise;const a=Bo(r.auth,t);await Uv(a,r.auth);const l=await ER(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function iM(n,e,t){return sM(n,e,t)}async function sM(n,e,t){const r=be(n);Du(r.auth,e,ls),await r.auth._initializationPromise;const a=Bo(r.auth,t);await hp(!1,r,e.providerId),await Uv(a,r.auth);const l=await ER(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function aM(n,e){return await At(n)._initializationPromise,yp(n,e,!1)}async function yp(n,e,t=!1){if(vt(n.app))return Promise.reject(ln(n));const r=At(n),a=Bo(r,e),c=await new Xk(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}async function ER(n){const e=ad(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=600*1e3;class TR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wR(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(en(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oM&&this.cachedEventUids.clear(),this.cachedEventUids.has(oI(e))}saveEventToCache(e){this.cachedEventUids.add(oI(e)),this.lastProcessedEventTime=Date.now()}}function oI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,e={}){return Dt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cM=/^https?/;async function hM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await bR(n);for(const t of e)try{if(dM(t))return}catch{}_n(n,"unauthorized-domain")}function dM(n){const e=Ph(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!cM.test(t))return!1;if(uM.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new td(3e4,6e4);function lI(){const n=Yt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mM(n){return new Promise((e,t)=>{var a,l,c;function r(){lI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lI(),t(en(n,"network-request-failed"))},timeout:fM.get()})}if((l=(a=Yt().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Yt().gapi)!=null&&c.load)r();else{const d=$S("iframefcb");return Yt()[d]=()=>{gapi.load?r():t(en(n,"network-request-failed"))},Rv(`${cV()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw mm=null,e})}let mm=null;function pM(n){return mm=mm||mM(n),mm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new td(5e3,15e3),yM="__/auth/iframe",_M="emulator/auth/iframe",vM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TM(n){const e=n.config;ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Sv(e,_M):`https://${n.config.authDomain}/${yM}`,r={apiKey:e.apiKey,appName:n.name,v:ya},a=EM.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Nu(r).slice(1)}`}async function wM(n){const e=await pM(n),t=Yt().gapi;return ae(t,n,"internal-error"),e.open({where:document.body,url:TM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vM,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=en(n,"network-request-failed"),d=Yt().setTimeout(()=>{l(c)},gM.get());function m(){Yt().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IM=500,AM=600,SM="_blank",RM="http://localhost";class uI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xM(n,e,t,r=IM,a=AM){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...bM,width:r.toString(),height:a.toString(),top:l,left:c},g=It().toLowerCase();t&&(d=BS(g)?SM:t),jS(g)&&(e=e||RM,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[R,M])=>`${b}${R}=${M},`,"");if(eV(g)&&d!=="_self")return CM(e||"",d),new uI(null);const v=window.open(e||"",d,_);ae(v,n,"popup-blocked");try{v.focus()}catch{}return new uI(v)}function CM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="__/auth/handler",DM="emulator/auth/handler",PM=encodeURIComponent("fac");async function I_(n,e,t,r,a,l){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ya,eventId:a};if(e instanceof ls){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",yP(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries(l||{}))c[_]=v}if(e instanceof Ou){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),g=m?`#${PM}=${encodeURIComponent(m)}`:"";return`${OM(n)}?${Nu(d).slice(1)}${g}`}function OM({config:n}){return n.emulator?Sv(n,DM):`https://${n.authDomain}/${NM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="webStorageSupport";class VM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=yp,this._overrideRedirectResult=jv}async _openPopup(e,t,r,a){var c;qr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await I_(e,t,r,Ph(),a);return xM(e,l,ad())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await I_(e,t,r,Ph(),a);return bk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(qr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wM(e),r=new TR(e);return t.register("authEvent",a=>(ae(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(s_,{type:s_},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[s_];l!==void 0&&t(!!l),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GS()||zS()||rd()}}const kM=VM;class MM{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return _i("unexpected MultiFactorSessionType")}}}class zv extends MM{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new zv(e)}_finalizeEnroll(e,t,r){return gk(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Pk(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class IR{constructor(){}static assertion(e){return zv._fromCredential(e)}}IR.FACTOR_ID="phone";var cI="@firebase/auth",hI="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jM(n){la(new bi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ae(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KS(n)},g=new aV(r,a,l,m);return EV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),la(new bi("auth-internal",e=>{const t=At(e.getProvider("auth").getImmediate());return(r=>new LM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(cI,hI,UM(n)),jr(cI,hI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=300;sP("authIdTokenMaxAge");function BM(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}oV({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=en("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",BM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jM("Browser");var dI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var na,AR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function C(){}C.prototype=S.prototype,x.F=S.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(P,O,L){for(var N=Array(arguments.length-2),He=2;He<arguments.length;He++)N[He-2]=arguments[He];return S.prototype[O].apply(P,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,S,C){C||(C=0);const P=Array(16);if(typeof S=="string")for(var O=0;O<16;++O)P[O]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(O=0;O<16;++O)P[O]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=x.g[0],C=x.g[1],O=x.g[2];let L=x.g[3],N;N=S+(L^C&(O^L))+P[0]+3614090360&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+P[1]+3905402710&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+P[2]+606105819&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+P[3]+3250441966&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(L^C&(O^L))+P[4]+4118548399&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+P[5]+1200080426&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+P[6]+2821735955&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+P[7]+4249261313&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(L^C&(O^L))+P[8]+1770035416&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+P[9]+2336552879&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+P[10]+4294925233&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+P[11]+2304563134&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(L^C&(O^L))+P[12]+1804603682&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+P[13]+4254626195&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+P[14]+2792965006&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+P[15]+1236535329&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(O^L&(C^O))+P[1]+4129170786&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+P[6]+3225465664&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+P[11]+643717713&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+P[0]+3921069994&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(O^L&(C^O))+P[5]+3593408605&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+P[10]+38016083&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+P[15]+3634488961&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+P[4]+3889429448&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(O^L&(C^O))+P[9]+568446438&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+P[14]+3275163606&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+P[3]+4107603335&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+P[8]+1163531501&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(O^L&(C^O))+P[13]+2850285829&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+P[2]+4243563512&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+P[7]+1735328473&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+P[12]+2368359562&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(C^O^L)+P[5]+4294588738&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+P[8]+2272392833&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+P[11]+1839030562&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+P[14]+4259657740&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(C^O^L)+P[1]+2763975236&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+P[4]+1272893353&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+P[7]+4139469664&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+P[10]+3200236656&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(C^O^L)+P[13]+681279174&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+P[0]+3936430074&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+P[3]+3572445317&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+P[6]+76029189&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(C^O^L)+P[9]+3654602809&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+P[12]+3873151461&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+P[15]+530742520&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+P[2]+3299628645&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(O^(C|~L))+P[0]+4096336452&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+P[7]+1126891415&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+P[14]+2878612391&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+P[5]+4237533241&4294967295,C=O+(N<<21&4294967295|N>>>11),N=S+(O^(C|~L))+P[12]+1700485571&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+P[3]+2399980690&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+P[10]+4293915773&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+P[1]+2240044497&4294967295,C=O+(N<<21&4294967295|N>>>11),N=S+(O^(C|~L))+P[8]+1873313359&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+P[15]+4264355552&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+P[6]+2734768916&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+P[13]+1309151649&4294967295,C=O+(N<<21&4294967295|N>>>11),N=S+(O^(C|~L))+P[4]+4149444226&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+P[11]+3174756917&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+P[2]+718787259&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+L&4294967295}r.prototype.v=function(x,S){S===void 0&&(S=x.length);const C=S-this.blockSize,P=this.C;let O=this.h,L=0;for(;L<S;){if(O==0)for(;L<=C;)a(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<S;)if(P[O++]=x.charCodeAt(L++),O==this.blockSize){a(this,P),O=0;break}}else for(;L<S;)if(P[O++]=x[L++],O==this.blockSize){a(this,P),O=0;break}}this.h=O,this.o+=S},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;S=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=S&255,S/=256;for(this.v(x),x=Array(16),S=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)x[S++]=this.g[C]>>>P&255;return x};function l(x,S){var C=d;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=S(x)}function c(x,S){this.h=S;const C=[];let P=!0;for(let O=x.length-1;O>=0;O--){const L=x[O]|0;P&&L==S||(C[O]=L,P=!1)}this.g=C}var d={};function m(x){return-128<=x&&x<128?l(x,function(S){return new c([S|0],S<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return F(g(-x));const S=[];let C=1;for(let P=0;x>=C;P++)S[P]=x/C|0,C*=4294967296;return new c(S,0)}function _(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return F(_(x.substring(1),S));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(S,8));let P=v;for(let L=0;L<x.length;L+=8){var O=Math.min(8,x.length-L);const N=parseInt(x.substring(L,L+O),S);O<8?(O=g(Math.pow(S,O)),P=P.j(O).add(g(N))):(P=P.j(C),P=P.add(g(N)))}return P}var v=m(0),b=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(z(this))return-F(this).m();let x=0,S=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);x+=(P>=0?P:4294967296+P)*S,S*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M(this))return"0";if(z(this))return"-"+F(this).toString(x);const S=g(Math.pow(x,6));var C=this;let P="";for(;;){const O=ge(C,S).g;C=ee(C,O.j(S));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=O,M(C))return L+P;for(;L.length<6;)L="0"+L;P=L+P}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function M(x){if(x.h!=0)return!1;for(let S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function z(x){return x.h==-1}n.l=function(x){return x=ee(this,x),z(x)?-1:M(x)?0:1};function F(x){const S=x.g.length,C=[];for(let P=0;P<S;P++)C[P]=~x.g[P];return new c(C,~x.h).add(b)}n.abs=function(){return z(this)?F(this):this},n.add=function(x){const S=Math.max(this.g.length,x.g.length),C=[];let P=0;for(let O=0;O<=S;O++){let L=P+(this.i(O)&65535)+(x.i(O)&65535),N=(L>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);P=N>>>16,L&=65535,N&=65535,C[O]=N<<16|L}return new c(C,C[C.length-1]&-2147483648?-1:0)};function ee(x,S){return x.add(F(S))}n.j=function(x){if(M(this)||M(x))return v;if(z(this))return z(x)?F(this).j(F(x)):F(F(this).j(x));if(z(x))return F(this.j(F(x)));if(this.l(R)<0&&x.l(R)<0)return g(this.m()*x.m());const S=this.g.length+x.g.length,C=[];for(var P=0;P<2*S;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<x.g.length;O++){const L=this.i(P)>>>16,N=this.i(P)&65535,He=x.i(O)>>>16,bt=x.i(O)&65535;C[2*P+2*O]+=N*bt,te(C,2*P+2*O),C[2*P+2*O+1]+=L*bt,te(C,2*P+2*O+1),C[2*P+2*O+1]+=N*He,te(C,2*P+2*O+1),C[2*P+2*O+2]+=L*He,te(C,2*P+2*O+2)}for(x=0;x<S;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=S;x<2*S;x++)C[x]=0;return new c(C,0)};function te(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function X(x,S){this.g=x,this.h=S}function ge(x,S){if(M(S))throw Error("division by zero");if(M(x))return new X(v,v);if(z(x))return S=ge(F(x),S),new X(F(S.g),F(S.h));if(z(S))return S=ge(x,F(S)),new X(F(S.g),S.h);if(x.g.length>30){if(z(x)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var C=b,P=S;P.l(x)<=0;)C=fe(C),P=fe(P);var O=de(C,1),L=de(P,1);for(P=de(P,2),C=de(C,2);!M(P);){var N=L.add(P);N.l(x)<=0&&(O=O.add(C),L=N),P=de(P,1),C=de(C,1)}return S=ee(x,O.j(S)),new X(O,S)}for(O=v;x.l(S)>=0;){for(C=Math.max(1,Math.floor(x.m()/S.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),L=g(C),N=L.j(S);z(N)||N.l(x)>0;)C-=P,L=g(C),N=L.j(S);M(L)&&(L=b),O=O.add(L),x=ee(x,N)}return new X(O,x)}n.B=function(x){return ge(this,x).h},n.and=function(x){const S=Math.max(this.g.length,x.g.length),C=[];for(let P=0;P<S;P++)C[P]=this.i(P)&x.i(P);return new c(C,this.h&x.h)},n.or=function(x){const S=Math.max(this.g.length,x.g.length),C=[];for(let P=0;P<S;P++)C[P]=this.i(P)|x.i(P);return new c(C,this.h|x.h)},n.xor=function(x){const S=Math.max(this.g.length,x.g.length),C=[];for(let P=0;P<S;P++)C[P]=this.i(P)^x.i(P);return new c(C,this.h^x.h)};function fe(x){const S=x.g.length+1,C=[];for(let P=0;P<S;P++)C[P]=x.i(P)<<1|x.i(P-1)>>>31;return new c(C,x.h)}function de(x,S){const C=S>>5;S%=32;const P=x.g.length-C,O=[];for(let L=0;L<P;L++)O[L]=S>0?x.i(L+C)>>>S|x.i(L+C+1)<<32-S:x.i(L+C);return new c(O,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,na=c}).apply(typeof dI<"u"?dI:typeof self<"u"?self:typeof window<"u"?window:{});var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SR,lh,RR,pm,A_,xR,CR,NR;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof tm=="object"&&tm];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var T=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var G=h[A];if(!(G in T))break e;T=T[G]}h=h[h.length-1],A=T[h],y=y(A),y!=A&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&T.push([A,y[A]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=m,g.apply(null,arguments)}function _(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function v(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(A,G,W){for(var ue=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ue[xe-2]=arguments[xe];return y.prototype[G].apply(A,ue)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const T=Array(y);for(let A=0;A<y;A++)T[A]=h[A];return T}return[]}function M(h,y){for(let A=1;A<arguments.length;A++){const G=arguments[A];var T=typeof G;if(T=T!="object"?T:G?Array.isArray(G)?"array":T:"null",T=="array"||T=="object"&&typeof G.length=="number"){T=h.length||0;const W=G.length||0;h.length=T+W;for(let ue=0;ue<W;ue++)h[T+ue]=G[ue]}else h.push(G)}}class z{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(h){c.setTimeout(()=>{throw h},0)}function ee(){var h=x;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class te{constructor(){this.h=this.g=null}add(y,T){const A=X.get();A.set(y,T),this.h?this.h.next=A:this.g=A,this.h=A}}var X=new z(()=>new ge,h=>h.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,de=!1,x=new te,S=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(C)}};function C(){for(var h;h=ee();){try{h.h.call(h.g)}catch(T){F(T)}var y=X;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}de=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function He(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}v(He,O),He.prototype.init=function(h,y){const T=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),j=0;function le(h,y,T,A,G){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!A,this.ha=G,this.key=++j,this.da=this.fa=!1}function Te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Oe(h,y,T){for(const A in h)y.call(T,h[A],A,h)}function Qe(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function k(h){const y={};for(const T in h)y[T]=h[T];return y}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let T,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(T in A)h[T]=A[T];for(let W=0;W<q.length;W++)T=q[W],Object.prototype.hasOwnProperty.call(A,T)&&(h[T]=A[T])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,y,T,A,G){const W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);const ue=De(h,y,A,G);return ue>-1?(y=h[ue],T||(y.fa=!1)):(y=new le(y,this.src,W,!!A,G),y.fa=T,h.push(y)),y};function Ae(h,y){const T=y.type;if(T in h.g){var A=h.g[T],G=Array.prototype.indexOf.call(A,y,void 0),W;(W=G>=0)&&Array.prototype.splice.call(A,G,1),W&&(Te(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function De(h,y,T,A){for(let G=0;G<h.length;++G){const W=h[G];if(!W.da&&W.listener==y&&W.capture==!!T&&W.ha==A)return G}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Xt={};function mt(h,y,T,A,G){if(Array.isArray(y)){for(let W=0;W<y.length;W++)mt(h,y[W],T,A,G);return null}return T=Gu(T),h&&h[bt]?h.J(y,T,d(A)?!!A.capture:!1,G):Sa(h,y,T,!1,A,G)}function Sa(h,y,T,A,G,W){if(!y)throw Error("Invalid event type");const ue=d(G)?!!G.capture:!!G;let xe=Ra(h);if(xe||(h[Fe]=xe=new me(h)),T=xe.add(y,T,A,ue,W),T.proxy)return T;if(A=$o(),T.proxy=A,A.src=h,A.listener=T,h.addEventListener)L||(G=ue),G===void 0&&(G=!1),h.addEventListener(y.toString(),A,G);else if(h.attachEvent)h.attachEvent(Hr(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function $o(){function h(T){return y.call(h.src,h.listener,T)}const y=qu;return h}function Qo(h,y,T,A,G){if(Array.isArray(y))for(var W=0;W<y.length;W++)Qo(h,y[W],T,A,G);else A=d(A)?!!A.capture:!!A,T=Gu(T),h&&h[bt]?(h=h.i,W=String(y).toString(),W in h.g&&(y=h.g[W],T=De(y,T,A,G),T>-1&&(Te(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[W],h.h--)))):h&&(h=Ra(h))&&(y=h.g[y.toString()],h=-1,y&&(h=De(y,T,A,G)),(T=h>-1?y[h]:null)&&Yo(T))}function Yo(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[bt])Ae(y.i,h);else{var T=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(T,A,h.capture):y.detachEvent?y.detachEvent(Hr(T),A):y.addListener&&y.removeListener&&y.removeListener(A),(T=Ra(y))?(Ae(T,h),T.h==0&&(T.src=null,y[Fe]=null)):Te(h)}}}function Hr(h){return h in Xt?Xt[h]:Xt[h]="on"+h}function qu(h,y){if(h.da)h=!0;else{y=new He(y,this);const T=h.listener,A=h.ha||h.src;h.fa&&Yo(h),h=T.call(A,y)}return h}function Ra(h){return h=h[Fe],h instanceof me?h:null}var Hu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gu(h){return typeof h=="function"?h:(h[Hu]||(h[Hu]=function(y){return h.handleEvent(y)}),h[Hu])}function jt(){P.call(this),this.i=new me(this),this.M=this,this.G=null}v(jt,P),jt.prototype[bt]=!0,jt.prototype.removeEventListener=function(h,y,T,A){Qo(this,h,y,T,A)};function Jt(h,y){var T,A=h.G;if(A)for(T=[];A;A=A.G)T.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var G=y;y=new O(A,h),oe(y,G)}G=!0;let W,ue;if(T)for(ue=T.length-1;ue>=0;ue--)W=y.g=T[ue],G=fs(W,A,!0,y)&&G;if(W=y.g=h,G=fs(W,A,!0,y)&&G,G=fs(W,A,!1,y)&&G,T)for(ue=0;ue<T.length;ue++)W=y.g=T[ue],G=fs(W,A,!1,y)&&G}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let A=0;A<T.length;A++)Te(T[A]);delete h.g[y],h.h--}}this.G=null},jt.prototype.J=function(h,y,T,A){return this.i.add(String(h),y,!1,T,A)},jt.prototype.K=function(h,y,T,A){return this.i.add(String(h),y,!0,T,A)};function fs(h,y,T,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let G=!0;for(let W=0;W<y.length;++W){const ue=y[W];if(ue&&!ue.da&&ue.capture==T){const xe=ue.listener,Ot=ue.ha||ue.src;ue.fa&&Ae(h.i,ue),G=xe.call(Ot,A)!==!1&&G}}return G&&!A.defaultPrevented}function qp(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function bd(h){h.g=qp(()=>{h.g=null,h.i&&(h.i=!1,bd(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class An extends P{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:bd(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xa(h){P.call(this),this.h=h,this.g={}}v(xa,P);var Ku=[];function $u(h){Oe(h.g,function(y,T){this.g.hasOwnProperty(T)&&Yo(y)},h),h.g={}}xa.prototype.N=function(){xa.Z.N.call(this),$u(this)},xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ms=c.JSON.stringify,Hp=c.JSON.parse,Id=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ad(){}function Sd(){}var Ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function un(){O.call(this,"d")}v(un,O);function or(){O.call(this,"c")}v(or,O);var Pt={},Rd=null;function Wo(){return Rd=Rd||new jt}Pt.Ia="serverreachability";function xd(h){O.call(this,Pt.Ia,h)}v(xd,O);function Gr(h){const y=Wo();Jt(y,new xd(y))}Pt.STAT_EVENT="statevent";function Ca(h,y){O.call(this,Pt.STAT_EVENT,h),this.stat=y}v(Ca,O);function zt(h){const y=Wo();Jt(y,new Ca(y,h))}Pt.Ja="timingevent";function Kr(h,y){O.call(this,Pt.Ja,h),this.size=y}v(Kr,O);function $r(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Sr(){this.g=!0}Sr.prototype.ua=function(){this.g=!1};function Gp(h,y,T,A,G,W){h.info(function(){if(h.g)if(W){var ue="",xe=W.split("&");for(let Ye=0;Ye<xe.length;Ye++){var Ot=xe[Ye].split("=");if(Ot.length>1){const pt=Ot[0];Ot=Ot[1];const hr=pt.split("_");ue=hr.length>=2&&hr[1]=="type"?ue+(pt+"="+Ot+"&"):ue+(pt+"=redacted&")}}}else ue=null;else ue=W;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+y+`
`+T+`
`+ue})}function Cd(h,y,T,A,G,W,ue){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+y+`
`+T+`
`+W+" "+ue})}function Qr(h,y,T,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Kp(h,T)+(A?" "+A:"")})}function Na(h,y){h.info(function(){return"TIMEOUT: "+y})}Sr.prototype.info=function(){};function Kp(h,y){if(!h.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(h=0;h<W.length;h++)if(Array.isArray(W[h])){var T=W[h];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var G=A[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<A.length;ue++)A[ue]=""}}}}return ms(W)}catch{return y}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yu;function Pa(){}v(Pa,Ad),Pa.prototype.g=function(){return new XMLHttpRequest},Yu=new Pa;function Ci(h){return encodeURIComponent(String(h))}function Nd(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Rr(h,y,T,A){this.j=h,this.i=y,this.l=T,this.S=A||1,this.V=new xa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}var Bt={},nn={};function Yr(h,y,T){h.M=1,h.A=Oa(qt(y)),h.u=T,h.R=!0,Xo(h,null)}function Xo(h,y){h.F=Date.now(),Wr(h),h.B=qt(h.A);var T=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),tl(T.i,"t",A),h.C=0,T=h.j.L,h.h=new xr,h.g=Gd(h.j,T?y:null,!h.u),h.P>0&&(h.O=new An(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,A=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(Ku[0]=G.toString()),G=Ku);for(let W=0;W<G.length;W++){const ue=mt(T,G[W],A||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Gr(),Gp(h.i,h.v,h.B,h.l,h.S,h.u)}Rr.prototype.ba=function(h){h=h.target;const y=this.O;y&&Dr(h)==3?y.j():this.Y(h)},Rr.prototype.Y=function(h){try{if(h==this.g)e:{const xe=Dr(this.g),Ot=this.g.ya(),Ye=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||xe!=4||Ot==7||(Ot==8||Ye<=0?Gr(3):Gr(2)),Xr(this);var y=this.g.ca();this.X=y;var T=$p(this);if(this.o=y==200,Cd(this.i,this.v,this.B,this.l,this.S,xe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,G=this.g;if((A=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var W=A;break t}}W=null}if(h=W)Qr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jr(this,h);else{this.o=!1,this.m=3,zt(12),Kn(this),lr(this);break e}}if(this.R){h=!0;let pt;for(;!this.K&&this.C<T.length;)if(pt=Pd(this,T),pt==nn){xe==4&&(this.m=4,zt(14),h=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Bt){this.m=4,zt(15),Qr(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Qr(this.i,this.l,pt,null),Jr(this,pt);if(Dd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||T.length!=0||this.h.h||(this.m=1,zt(16),h=!1),this.o=this.o&&h,!h)Qr(this.i,this.l,T,"[Invalid Chunked Response]"),Kn(this),lr(this);else if(T.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),cc(ue),ue.P=!0,zt(11))}}else Qr(this.i,this.l,T,null),Jr(this,T);xe==4&&Kn(this),this.o&&!this.K&&(xe==4?Bd(this.j,this):(this.o=!1,Wr(this)))}else Di(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Kn(this),lr(this)}}}catch{}finally{}};function $p(h){if(!Dd(h))return h.g.la();const y=cn(h.g);if(y==="")return"";let T="";const A=y.length,G=Dr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Kn(h),lr(h),"";h.h.i=new c.TextDecoder}for(let W=0;W<A;W++)h.h.h=!0,T+=h.h.i.decode(y[W],{stream:!(G&&W==A-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Dd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Pd(h,y){var T=h.C,A=y.indexOf(`
`,T);return A==-1?nn:(T=Number(y.substring(T,A)),isNaN(T)?Bt:(A+=1,A+T>y.length?nn:(y=y.slice(A,A+T),h.C=A+T,y)))}Rr.prototype.cancel=function(){this.K=!0,Kn(this)};function Wr(h){h.T=Date.now()+h.H,Jo(h,h.H)}function Jo(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=$r(g(h.aa,h),y)}function Xr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Rr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Na(this.i,this.B),this.M!=2&&(Gr(),zt(17)),Kn(this),this.m=2,lr(this)):Jo(this,this.T-h)};function lr(h){h.j.I==0||h.K||Bd(h.j,h)}function Kn(h){Xr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,$u(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Jr(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||ei(T.h,h))){if(!h.L&&ei(T.h,h)&&T.I==3){try{var A=T.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)al(T),ws(T);else break e;za(T),zt(18)}}else T.xa=G[1],0<T.xa-T.K&&G[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=$r(g(T.Va,T),6e3));Zr(T.h)<=1&&T.ta&&(T.ta=void 0)}else ai(T,11)}else if((h.L||T.g==h)&&al(T),!N(y))for(G=T.Ba.g.parse(y),y=0;y<G.length;y++){let Ye=G[y];const pt=Ye[0];if(!(pt<=T.K))if(T.K=pt,Ye=Ye[1],T.I==2)if(Ye[0]=="c"){T.M=Ye[1],T.ba=Ye[2];const hr=Ye[3];hr!=null&&(T.ka=hr,T.j.info("VER="+T.ka));const oi=Ye[4];oi!=null&&(T.za=oi,T.j.info("SVER="+T.za));const Pr=Ye[5];Pr!=null&&typeof Pr=="number"&&Pr>0&&(A=1.5*Pr,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Or=h.g;if(Or){const Ba=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var W=A.h;W.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ju(W,W.h),W.h=null))}if(A.G){const ol=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;ol&&(A.wa=ol,Je(A.J,A.G,ol))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var ue=h;if(A.na=Hd(A,A.L?A.ba:null,A.W),ue.L){Zu(A.h,ue);var xe=ue,Ot=A.O;Ot&&(xe.H=Ot),xe.D&&(Xr(xe),Wr(xe)),A.g=ue}else jd(A);T.i.length>0&&si(T)}else Ye[0]!="stop"&&Ye[0]!="close"||ai(T,7);else T.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ai(T,7):lc(T):Ye[0]!="noop"&&T.l&&T.l.qa(Ye),T.A=0)}}Gr(4)}catch{}}var Ft=class{constructor(h,y){this.g=h,this.map=y}};function Wu(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zr(h){return h.h?1:h.g?h.g.size:0}function ei(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ju(h,y){h.g?h.g.add(y):h.h=y}function Zu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Wu.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ec(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return R(h.i)}var Od=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zo(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const A=h[T].indexOf("=");let G,W=null;A>=0?(G=h[T].substring(0,A),W=h[T].substring(A+1)):G=h[T],y(G,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function $n(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof $n?(this.l=h.l,rn(this,h.j),this.o=h.o,this.g=h.g,ps(this,h.u),this.h=h.h,tc(this,Ld(h.i)),this.m=h.m):h&&(y=String(h).match(Od))?(this.l=!1,rn(this,y[1]||"",!0),this.o=ti(y[2]||""),this.g=ti(y[3]||"",!0),ps(this,y[4]),this.h=ti(y[5]||"",!0),tc(this,y[6]||"",!0),this.m=ti(y[7]||"")):(this.l=!1,this.i=new ys(null,this.l))}$n.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Va(y,el,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Va(y,el,!0),"@"),h.push(Ci(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Va(T,T.charAt(0)=="/"?nc:Vd,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Va(T,kd)),h.join("")},$n.prototype.resolve=function(h){const y=qt(this);let T=!!h.j;T?rn(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var A=h.h;if(T)ps(y,h.u);else if(T=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var G=y.h.lastIndexOf("/");G!=-1&&(A=y.h.slice(0,G+1)+A)}if(G=A,G==".."||G==".")A="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){A=G.lastIndexOf("/",0)==0,G=G.split("/");const W=[];for(let ue=0;ue<G.length;){const xe=G[ue++];xe=="."?A&&ue==G.length&&W.push(""):xe==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ue==G.length&&W.push("")):(W.push(xe),A=!0)}A=W.join("/")}else A=G}return T?y.h=A:T=h.i.toString()!=="",T?tc(y,Ld(h.i)):T=!!h.m,T&&(y.m=h.m),y};function qt(h){return new $n(h)}function rn(h,y,T){h.j=T?ti(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ps(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function tc(h,y,T){y instanceof ys?(h.i=y,nl(h.i,h.l)):(T||(y=Va(y,gs)),h.i=new ys(y,h.l))}function Je(h,y,T){h.i.set(y,T)}function Oa(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ti(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Va(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,Vn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Vn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var el=/[#\/\?@]/g,Vd=/[#\?:]/g,nc=/[#\?]/g,gs=/[#\?@]/g,kd=/#/g;function ys(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function kn(h){h.g||(h.g=new Map,h.h=0,h.i&&Zo(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ys.prototype,n.add=function(h,y){kn(this),this.i=null,h=_s(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Md(h,y){kn(h),y=_s(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function rc(h,y){return kn(h),y=_s(h,y),h.g.has(y)}n.forEach=function(h,y){kn(this),this.g.forEach(function(T,A){T.forEach(function(G){h.call(y,G,A,this)},this)},this)};function ic(h,y){kn(h);let T=[];if(typeof y=="string")rc(h,y)&&(T=T.concat(h.g.get(_s(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return kn(this),this.i=null,h=_s(this,h),rc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=ic(this,h),h.length>0?String(h[0]):y):y};function tl(h,y,T){Md(h,y),T.length>0&&(h.i=null,h.g.set(_s(h,y),R(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var T=y[A];const G=Ci(T);T=ic(this,T);for(let W=0;W<T.length;W++){let ue=G;T[W]!==""&&(ue+="="+Ci(T[W])),h.push(ue)}}return this.i=h.join("&")};function Ld(h){const y=new ys;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function _s(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function nl(h,y){y&&!h.j&&(kn(h),h.i=null,h.g.forEach(function(T,A){const G=A.toLowerCase();A!=G&&(Md(this,A),tl(this,G,T))},h)),h.j=y}function Cr(h,y){const T=new Sr;if(c.Image){const A=new Image;A.onload=_(ur,T,"TestLoadImage: loaded",!0,y,A),A.onerror=_(ur,T,"TestLoadImage: error",!1,y,A),A.onabort=_(ur,T,"TestLoadImage: abort",!1,y,A),A.ontimeout=_(ur,T,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function sc(h,y){const T=new Sr,A=new AbortController,G=setTimeout(()=>{A.abort(),ur(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(W=>{clearTimeout(G),W.ok?ur(T,"TestPingServer: ok",!0,y):ur(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),ur(T,"TestPingServer: error",!1,y)})}function ur(h,y,T,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(T)}catch{}}function vs(){this.g=new Id}function ni(h){this.i=h.Sb||null,this.h=h.ab||!1}v(ni,Ad),ni.prototype.g=function(){return new ka(this.i,this.h)};function ka(h,y){jt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(ka,jt),n=ka.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Nr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;rl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function rl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Es(this):Nr(this),this.readyState==3&&rl(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Es(this))},n.Na=function(h){this.g&&(this.response=h,Es(this))},n.ga=function(){this.g&&Es(this)};function Es(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Nr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function cr(h){let y="";return Oe(h,function(T,A){y+=A,y+=":",y+=T,y+=`\r
`}),y}function Ma(h,y,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=cr(T),typeof h=="string"?T!=null&&Ci(T):Je(h,y,T))}function it(h){jt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(it,jt);var ri=/^https?$/i,ac=["POST","PUT"];n=it.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yu.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(W){La(this,W);return}if(h=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)T.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())T.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(W=>W.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(ac,y,void 0)>=0)||A||G||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of T)this.g.setRequestHeader(W,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(W){La(this,W)}};function La(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,oc(h),Ni(h)}function oc(h){h.A||(h.A=!0,Jt(h,"complete"),Jt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Jt(this,"complete"),Jt(this,"abort"),Ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ni(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},n.Xa=function(){Ua(this)};function Ua(h){if(h.h&&typeof l<"u"){if(h.v&&Dr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Jt(h,"readystatechange"),Dr(h)==4){h.h=!1;try{const W=h.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var A;if(A=W===0){let ue=String(h.D).match(Od)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),A=!ri.test(ue?ue.toLowerCase():"")}T=A}if(T)Jt(h,"complete"),Jt(h,"success");else{h.o=6;try{var G=Dr(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",oc(h)}}finally{Ni(h)}}}}function Ni(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Jt(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Dr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Dr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Hp(y)}};function cn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Di(h){const y={};h=(h.g&&Dr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(N(h[A]))continue;var T=Nd(h[A]);const G=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const W=y[G]||[];y[G]=W,W.push(T)}Qe(y,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ii(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ts(h){this.za=0,this.i=[],this.j=new Sr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ii("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ii("baseRetryDelayMs",5e3,h),this.Za=ii("retryDelaySeedMs",1e4,h),this.Ta=ii("forwardChannelMaxRetries",2,h),this.va=ii("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wu(h&&h.concurrentRequestLimit),this.Ba=new vs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ts.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,A){zt(0),this.W=h,this.H=y||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=Hd(this,null,this.W),si(this)};function lc(h){if(il(h),h.I==3){var y=h.V++,T=qt(h.J);if(Je(T,"SID",h.M),Je(T,"RID",y),Je(T,"TYPE","terminate"),ja(h,T),y=new Rr(h,h.j,y),y.M=2,y.A=Oa(qt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Gd(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Wr(y)}qd(h)}function ws(h){h.g&&(cc(h),h.g.cancel(),h.g=null)}function il(h){ws(h),h.v&&(c.clearTimeout(h.v),h.v=null),al(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function si(h){if(!Xu(h.h)&&!h.m){h.m=!0;var y=h.Ea;fe||S(),de||(fe(),de=!0),x.add(y,h),h.D=0}}function sl(h,y){return Zr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=$r(g(h.Ea,h,y),Fd(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new Rr(this,this.j,h);let W=this.o;if(this.U&&(W?(W=k(W),oe(W,this.U)):W=this.U),this.u!==null||this.R||(G.J=W,W=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Ud(this,G,y),T=qt(this.J),Je(T,"RID",h),Je(T,"CVER",22),this.G&&Je(T,"X-HTTP-Session-Id",this.G),ja(this,T),W&&(this.R?y="headers="+Ci(cr(W))+"&"+y:this.u&&Ma(T,this.u,W)),Ju(this.h,G),this.Ra&&Je(T,"TYPE","init"),this.S?(Je(T,"$req",y),Je(T,"SID","null"),G.U=!0,Yr(G,T,null)):Yr(G,T,y),this.I=2}}else this.I==3&&(h?uc(this,h):this.i.length==0||Xu(this.h)||uc(this))};function uc(h,y){var T;y?T=y.l:T=h.V++;const A=qt(h.J);Je(A,"SID",h.M),Je(A,"RID",T),Je(A,"AID",h.K),ja(h,A),h.u&&h.o&&Ma(A,h.u,h.o),T=new Rr(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ud(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ju(h.h,T),Yr(T,A,y)}function ja(h,y){h.H&&Oe(h.H,function(T,A){Je(y,A,T)}),h.l&&Oe({},function(T,A){Je(y,A,T)})}function Ud(h,y,T){T=Math.min(h.i.length,T);const A=h.l?g(h.l.Ka,h.l,h):null;e:{var G=h.i;let xe=-1;for(;;){const Ot=["count="+T];xe==-1?T>0?(xe=G[0].g,Ot.push("ofs="+xe)):xe=0:Ot.push("ofs="+xe);let Ye=!0;for(let pt=0;pt<T;pt++){var W=G[pt].g;const hr=G[pt].map;if(W-=xe,W<0)xe=Math.max(0,G[pt].g-100),Ye=!1;else try{W="req"+W+"_"||"";try{var ue=hr instanceof Map?hr:Object.entries(hr);for(const[oi,Pr]of ue){let Or=Pr;d(Pr)&&(Or=ms(Pr)),Ot.push(W+oi+"="+encodeURIComponent(Or))}}catch(oi){throw Ot.push(W+"type="+encodeURIComponent("_badmap")),oi}}catch{A&&A(hr)}}if(Ye){ue=Ot.join("&");break e}}ue=void 0}return h=h.i.splice(0,T),y.G=h,ue}function jd(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;fe||S(),de||(fe(),de=!0),x.add(y,h),h.A=0}}function za(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=$r(g(h.Da,h),Fd(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,zd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=$r(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),ws(this),zd(this))};function cc(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function zd(h){h.g=new Rr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=qt(h.na);Je(y,"RID","rpc"),Je(y,"SID",h.M),Je(y,"AID",h.K),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(y,"TO",h.ia),Je(y,"TYPE","xmlhttp"),ja(h,y),h.u&&h.o&&Ma(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Oa(qt(y)),T.u=null,T.R=!0,Xo(T,h)}n.Va=function(){this.C!=null&&(this.C=null,ws(this),za(this),zt(19))};function al(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Bd(h,y){var T=null;if(h.g==y){al(h),cc(h),h.g=null;var A=2}else if(ei(h.h,y))T=y.G,Zu(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var G=h.D;A=Wo(),Jt(A,new Kr(A,T)),si(h)}else jd(h);else if(G=y.m,G==3||G==0&&y.X>0||!(A==1&&sl(h,y)||A==2&&za(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),G){case 1:ai(h,5);break;case 4:ai(h,10);break;case 3:ai(h,6);break;default:ai(h,2)}}}function Fd(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function ai(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),A=h.Ua;const G=!A;A=new $n(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rn(A,"https"),Oa(A),G?Cr(A.toString(),T):sc(A.toString(),T)}else zt(2);h.I=0,h.l&&h.l.pa(y),qd(h),il(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function qd(h){if(h.I=0,h.ja=[],h.l){const y=ec(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ja,y),M(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Hd(h,y,T){var A=T instanceof $n?qt(T):new $n(T);if(A.g!="")y&&(A.g=y+"."+A.g),ps(A,A.u);else{var G=c.location;A=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;const W=new $n(null);A&&rn(W,A),y&&(W.g=y),G&&ps(W,G),T&&(W.h=T),A=W}return T=h.G,y=h.wa,T&&y&&Je(A,T,y),Je(A,"VER",h.ka),ja(h,A),A}function Gd(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new it(new ni({ab:T})):new it(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kd(){}n=Kd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function bs(){}bs.prototype.g=function(h,y){return new Sn(h,y)};function Sn(h,y){jt.call(this),this.g=new Ts(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Pi(this)}v(Sn,jt),Sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){lc(this.g)},Sn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=ms(h),h=T);y.i.push(new Ft(y.Ya++,h)),y.I==3&&si(y)},Sn.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Sn.Z.N.call(this)};function $d(h){un.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}v($d,un);function Qd(){or.call(this),this.status=1}v(Qd,or);function Pi(h){this.g=h}v(Pi,Kd),Pi.prototype.ra=function(){Jt(this.g,"a")},Pi.prototype.qa=function(h){Jt(this.g,new $d(h))},Pi.prototype.pa=function(h){Jt(this.g,new Qd)},Pi.prototype.oa=function(){Jt(this.g,"b")},bs.prototype.createWebChannel=bs.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,NR=function(){return new bs},CR=function(){return Wo()},xR=Pt,A_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,pm=Da,Qu.COMPLETE="complete",RR=Qu,Sd.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",jt.prototype.listen=jt.prototype.J,lh=Sd,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,SR=it}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let on=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu="12.8.0";function FM(n){Vu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new op("@firebase/firestore");function Hl(){return ua.logLevel}function qM(n){ua.setLogLevel(n)}function se(n,...e){if(ua.logLevel<=Me.DEBUG){const t=e.map(Bv);ua.debug(`Firestore (${Vu}): ${n}`,...t)}}function Mt(n,...e){if(ua.logLevel<=Me.ERROR){const t=e.map(Bv);ua.error(`Firestore (${Vu}): ${n}`,...t)}}function Ai(n,...e){if(ua.logLevel<=Me.WARN){const t=e.map(Bv);ua.warn(`Firestore (${Vu}): ${n}`,...t)}}function Bv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,DR(n,r,t)}function DR(n,e,t){let r=`FIRESTORE (${Vu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Mt(r),new Error(r)}function _e(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||DR(e,a,r)}function HM(n,e){n||pe(57014,e)}function he(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Dn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class KM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $M{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new yn,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new yn)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new PR(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class QM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class YM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);const r=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=XM(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Se(n,e){return n<e?-1:n>e?1:0}function S_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return a_(a)===a_(l)?Se(a,l):a_(a)?1:-1}return Se(n.length,e.length)}const JM=55296,ZM=57343;function a_(n){const e=n.charCodeAt(0);return e>=JM&&e<=ZM}function ou(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}function OR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="__name__";class di{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof di?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=di.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Se(e.length,t.length)}static compareSegments(e,t){const r=di.isNumericId(e),a=di.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?di.extractNumericId(e).compare(di.extractNumericId(t)):S_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return na.fromString(e.substring(4,e.length-2))}}class Le extends di{construct(e,t,r){return new Le(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Le(t)}static emptyPath(){return new Le([])}}const e4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends di{construct(e,t,r){return new Et(e,t,r)}static isValidIdentifier(e){return e4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mI}static keyField(){return new Et([mI])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ie(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ie(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ie(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Le.fromString(e))}static fromName(e){return new ce(Le.fromString(e).popFirst(5))}static empty(){return new ce(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n,e,t){if(!t)throw new ie(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VR(n,e,t,r){if(e===!0&&r===!0)throw new ie(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pI(n){if(!ce.isDocumentKey(n))throw new ie(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gI(n){if(ce.isDocumentKey(n))throw new ie(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _p(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function $e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ie(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_p(n);throw new ie(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MR(n,e){if(e<=0)throw new ie(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ld(n,e){if(!kR(n))throw new ie(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ie(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=-62135596800,_I=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*_I);return new Xe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yI)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_I}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ld(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Wt("string",Xe._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Xe(0,0))}static max(){return new Ee(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=-1;class jm{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function R_(n){return n.fields.find((e=>e.kind===2))}function ao(n){return n.fields.filter((e=>e.kind!==2))}jm.UNKNOWN_ID=-1;class gm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mh(0,sr.min())}}function LR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(r===1e9?new Xe(t+1,0):new Xe(t,r));return new sr(a,ce.empty(),e)}function UR(n){return new sr(n.readTime,n.key,lu)}class sr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sr(Ee.min(),ce.empty(),lu)}static max(){return new sr(Ee.max(),ce.empty(),lu)}}function Hv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==jR)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,r)=>{t(e)}))}static reject(e){return new H(((t,r)=>{r(e)}))}static waitFor(e){return new H(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next((a=>a?H.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new H(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++d,d===l&&r(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new H(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="SimpleDb";class vp{static open(e,t,r,a){try{return new vp(t,e.transaction(a,r))}catch(l){throw new _h(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new yn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new _h(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Gv(r.target.error);this.S.reject(new _h(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(se(tr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new n4(t)}}class Ti{static delete(e){return se(tr,"Removing database:",e),uo(mv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Ch())return!1;if(Ti.F())return!0;const e=It(),t=Ti.M(e),r=0<t&&t<10,a=BR(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ti.M(It())===12.2&&Mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(se(tr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new _h(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ie(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ie(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new _h(e,c))},a.onupgradeneeded=l=>{se(tr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{se(tr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=vp.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),H.reject(g)))).toPromise();return m.catch((()=>{})),await d.D,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&c<3;if(se(tr,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class t4{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return uo(this.U.delete())}}class _h extends ie{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ea(n){return n.name==="IndexedDbTransactionError"}class n4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se(tr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(se(tr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uo(r)}add(e){return se(tr,"ADD",this.store.name,e,e),uo(this.store.add(e))}get(e){return uo(this.store.get(e)).next((t=>(t===void 0&&(t=null),se(tr,"GET",this.store.name,e,t),t)))}delete(e){return se(tr,"DELETE",this.store.name,e),uo(this.store.delete(e))}count(){return se(tr,"COUNT",this.store.name),uo(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new H(((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((d,m)=>{c.push(m)})).next((()=>c))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new H(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}X(e,t){se(tr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new H(((r,a)=>{t.onerror=l=>{const c=Gv(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}J(e,t){const r=[];return new H(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new t4(d),g=t(d.primaryKey,d.value,m);if(g instanceof H){const _=g.catch((v=>(m.done(),H.reject(v))));r.push(_)}m.isDone?a():m.G===null?d.continue():d.continue(m.G)}})).next((()=>H.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uo(n){return new H(((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=Gv(r.target.error);t(a)}}))}let vI=!1;function Gv(n){const e=Ti.M(It());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vI||(vI=!0,setTimeout((()=>{throw r}),0)),r}}return n}const vh="IndexBackfiller";class r4{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){se(vh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();se(vh,`Documents written: ${t}`)}catch(t){Ea(t)?se(vh,"Ignoring IndexedDB error during index backfill: ",t):await va(t)}await this.re(6e4)}))}}class i4{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return H.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return se(vh,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,r.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(se(vh,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=UR(l);Hv(c,r)>0&&(r=c)})),new sr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=-1;function ud(n){return n==null}function Lh(n){return n===0&&1/n==-1/0}function FR(n){return typeof n=="number"&&Number.isInteger(n)&&!Lh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="";function bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EI(e)),e=s4(n.get(t),e);return EI(e)}function s4(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case zm:t+="";break;default:t+=l}}return t}function EI(n){return n+zm+""}function vi(n){const e=n.length;if(_e(e>=2,64408,{path:n}),e===2)return _e(n.charAt(0)===zm&&n.charAt(1)==="",56145,{path:n}),Le.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=n.indexOf(zm,l);switch((c<0||c>t)&&pe(50515,{path:n}),n.charAt(c+1)){case"":const d=n.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=n.substring(l,c),a+="\0";break;case"":a+=n.substring(l,c+1);break;default:pe(61167,{path:n})}l=c+2}return new Le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="remoteDocuments",cd="owner",Ul="owner",Uh="mutationQueues",a4="userId",Lr="mutations",TI="batchId",go="userMutationsIndex",wI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(n,e){return[n,bn(e)]}function qR(n,e,t){return[n,bn(e),t]}const o4={},uu="documentMutations",Bm="remoteDocumentsV14",l4=["prefixPath","collectionGroup","readTime","documentId"],_m="documentKeyIndex",u4=["prefixPath","collectionGroup","documentId"],HR="collectionGroupIndex",c4=["collectionGroup","readTime","prefixPath","documentId"],jh="remoteDocumentGlobal",x_="remoteDocumentGlobalKey",cu="targets",GR="queryTargetsIndex",h4=["canonicalId","targetId"],hu="targetDocuments",d4=["targetId","path"],Kv="documentTargetsIndex",f4=["path","targetId"],Fm="targetGlobalKey",To="targetGlobal",zh="collectionParents",m4=["collectionId","parent"],du="clientMetadata",p4="clientId",Ep="bundles",g4="bundleId",Tp="namedQueries",y4="name",$v="indexConfiguration",_4="indexId",C_="collectionGroupIndex",v4="collectionGroup",Eh="indexState",E4=["indexId","uid"],KR="sequenceNumberIndex",T4=["uid","sequenceNumber"],Th="indexEntries",w4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$R="documentKeyIndex",b4=["indexId","uid","orderedDocumentKey"],wp="documentOverlays",I4=["userId","collectionPath","documentId"],N_="collectionPathOverlayIndex",A4=["userId","collectionPath","largestBatchId"],QR="collectionGroupOverlayIndex",S4=["userId","collectionGroup","largestBatchId"],Qv="globals",R4="name",YR=[Uh,Lr,uu,oo,cu,cd,To,hu,du,jh,zh,Ep,Tp],x4=[...YR,wp],WR=[Uh,Lr,uu,Bm,cu,cd,To,hu,du,jh,zh,Ep,Tp,wp],XR=WR,Yv=[...XR,$v,Eh,Th],C4=Yv,JR=[...Yv,Qv],N4=JR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_ extends zR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(n,e){const t=he(n);return Ti.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ta(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new pn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new II(this.data.getIterator())}getIteratorFrom(e){return new II(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class II{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new rt(Et.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ou(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ex("Invalid base64 string: "+l):l}})(e);return new Ct(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const P4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(n){if(_e(!!n,39018),typeof n=="string"){let e=0;const t=P4.exec(n);if(_e(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ss(n){return typeof n=="string"?Ct.fromBase64String(n):Ct.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="server_timestamp",nx="__type__",rx="__previous_value__",ix="__local_write_time__";function bp(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[nx])==null?void 0:r.stringValue)===tx}function Ip(n){const e=n.mapValue.fields[rx];return bp(e)?Ip(e):e}function Bh(n){const e=is(n.mapValue.fields[ix].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t,r,a,l,c,d,m,g,_,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=v}}const qm="(default)";class ca{constructor(e,t){this.projectId=e,this.database=t||qm}static empty(){return new ca("","")}get isDefaultDatabase(){return this.database===qm}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}function V4(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ie(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="__type__",sx="__max__",Xs={mapValue:{fields:{__type__:{stringValue:sx}}}},Xv="__vector__",fu="value",vm={nullValue:"NULL_VALUE"};function ha(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bp(n)?4:ax(n)?9007199254740991:Ap(n)?10:11:pe(28295,{value:n})}function Si(n,e){if(n===e)return!0;const t=ha(n);if(t!==ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bh(n).isEqual(Bh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=is(a.timestampValue),d=is(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ss(a.bytesValue).isEqual(ss(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return yt(a.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(a.geoPointValue.longitude)===yt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return yt(a.integerValue)===yt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=yt(a.doubleValue),d=yt(l.doubleValue);return c===d?Lh(c)===Lh(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return ou(n.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(bI(c)!==bI(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Si(c[m],d[m])))return!1;return!0})(n,e);default:return pe(52216,{left:n})}}function Fh(n,e){return(n.values||[]).find((t=>Si(t,e)))!==void 0}function da(n,e){if(n===e)return 0;const t=ha(n),r=ha(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=yt(l.integerValue||l.doubleValue),m=yt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return AI(n.timestampValue,e.timestampValue);case 4:return AI(Bh(n),Bh(e));case 5:return S_(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ss(l),m=ss(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Se(d[g],m[g]);if(_!==0)return _}return Se(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Se(yt(l.latitude),yt(c.latitude));return d!==0?d:Se(yt(l.longitude),yt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return SI(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,R,M,z;const d=l.fields||{},m=c.fields||{},g=(b=d[fu])==null?void 0:b.arrayValue,_=(R=m[fu])==null?void 0:R.arrayValue,v=Se(((M=g==null?void 0:g.values)==null?void 0:M.length)||0,((z=_==null?void 0:_.values)==null?void 0:z.length)||0);return v!==0?v:SI(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Xs.mapValue&&c===Xs.mapValue)return 0;if(l===Xs.mapValue)return 1;if(c===Xs.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let v=0;v<m.length&&v<_.length;++v){const b=S_(m[v],_[v]);if(b!==0)return b;const R=da(d[m[v]],g[_[v]]);if(R!==0)return R}return Se(m.length,_.length)})(n.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function AI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=is(n),r=is(e),a=Se(t.seconds,r.seconds);return a!==0?a:Se(t.nanos,r.nanos)}function SI(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=da(t[a],r[a]);if(l)return l}return Se(t.length,r.length)}function mu(n){return P_(n)}function P_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=is(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=P_(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${P_(t.fields[c])}`;return a+"}"})(n.mapValue):pe(61005,{value:n})}function Em(n){switch(ha(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ip(n);return e?16+Em(e):16;case 5:return 2*n.stringValue.length;case 6:return ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Em(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Ta(r.fields,((l,c)=>{a+=l.length+Em(c)})),a})(n.mapValue);default:throw pe(13486,{value:n})}}function Ao(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function O_(n){return!!n&&"integerValue"in n}function qh(n){return!!n&&"arrayValue"in n}function RI(n){return!!n&&"nullValue"in n}function xI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tm(n){return!!n&&"mapValue"in n}function Ap(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Wv])==null?void 0:r.stringValue)===Xv}function wh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ta(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=wh(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wh(n.arrayValue.values[t]);return e}return{...n}}function ax(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===sx}const ox={mapValue:{fields:{[Wv]:{stringValue:Xv},[fu]:{arrayValue:{}}}}};function k4(n){return"nullValue"in n?vm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ao(ca.empty(),ce.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ap(n)?ox:{mapValue:{}}:pe(35942,{value:n})}function M4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ao(ca.empty(),ce.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?ox:"mapValue"in n?Ap(n)?{mapValue:{}}:Xs:pe(61959,{value:n})}function CI(n,e){const t=da(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function NI(n,e){const t=da(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wh(t)}setAll(e){let t=Et.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=wh(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Tm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Tm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ta(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new gn(wh(this.value))}}function lx(n){const e=[];return Ta(n.fields,((t,r)=>{const a=new Et([t]);if(Tm(r)){const l=lx(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ft(e,0,Ee.min(),Ee.min(),Ee.min(),gn.empty(),0)}static newFoundDocument(e,t,r,a){return new ft(e,1,t,Ee.min(),r,a,0)}static newNoDocument(e,t){return new ft(e,2,t,Ee.min(),Ee.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new ft(e,3,t,Ee.min(),Ee.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t){this.position=e,this.inclusive=t}}function DI(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=ce.comparator(ce.fromName(c.referenceValue),t.key):r=da(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function PI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Si(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function L4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{}class ze extends ux{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new U4(e,t,r):t==="array-contains"?new B4(e,r):t==="in"?new px(e,r):t==="not-in"?new F4(e,r):t==="array-contains-any"?new q4(e,r):new ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new j4(e,r):new z4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(da(t,this.value)):t!==null&&ha(this.value)===ha(t)&&this.matchesComparison(da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends ux{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new nt(e,t)}matches(e){return pu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pu(n){return n.op==="and"}function V_(n){return n.op==="or"}function Jv(n){return cx(n)&&pu(n)}function cx(n){for(const e of n.filters)if(e instanceof nt)return!1;return!0}function k_(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+mu(n.value);if(Jv(n))return n.filters.map((e=>k_(e))).join(",");{const e=n.filters.map((t=>k_(t))).join(",");return`${n.op}(${e})`}}function hx(n,e){return n instanceof ze?(function(r,a){return a instanceof ze&&r.op===a.op&&r.field.isEqual(a.field)&&Si(r.value,a.value)})(n,e):n instanceof nt?(function(r,a){return a instanceof nt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&hx(c,a.filters[d])),!0):!1})(n,e):void pe(19439)}function dx(n,e){const t=n.filters.concat(e);return nt.create(t,n.op)}function fx(n){return n instanceof ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${mu(t.value)}`})(n):n instanceof nt?(function(t){return t.op.toString()+" {"+t.getFilters().map(fx).join(" ,")+"}"})(n):"Filter"}class U4 extends ze{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class j4 extends ze{constructor(e,t){super(e,"in",t),this.keys=mx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class z4 extends ze{constructor(e,t){super(e,"not-in",t),this.keys=mx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>ce.fromName(r.referenceValue)))}class B4 extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qh(t)&&Fh(t.arrayValue,this.value)}}class px extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fh(this.value.arrayValue,t)}}class F4 extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fh(this.value.arrayValue,t)}}class q4 extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Fh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function M_(n,e=null,t=[],r=[],a=null,l=null,c=null){return new H4(n,e,t,r,a,l,c)}function So(n){const e=he(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>k_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),ud(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>mu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>mu(r))).join(",")),e.Te=t}return e.Te}function hd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!L4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PI(n.startAt,e.startAt)&&PI(n.endAt,e.endAt)}function Hm(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Gm(n,e){return n.filters.filter((t=>t instanceof ze&&t.field.isEqual(e)))}function OI(n,e,t){let r=vm,a=!0;for(const l of Gm(n,e)){let c=vm,d=!0;switch(l.op){case"<":case"<=":c=k4(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=vm}CI({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];CI({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function VI(n,e,t){let r=Xs,a=!0;for(const l of Gm(n,e)){let c=Xs,d=!0;switch(l.op){case">=":case">":c=M4(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Xs}NI({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];NI({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gx(n,e,t,r,a,l,c,d){return new us(n,e,t,r,a,l,c,d)}function ku(n){return new us(n)}function kI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function G4(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zv(n){return n.collectionGroup!==null}function eu(n){const e=he(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new rt(Et.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Hh(l,r))})),t.has(Et.keyField().canonicalString())||e.Ie.push(new Hh(Et.keyField(),r))}return e.Ie}function Pn(n){const e=he(n);return e.Ee||(e.Ee=K4(e,eu(n))),e.Ee}function K4(n,e){if(n.limitType==="F")return M_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Hh(a.field,l)}));const t=n.endAt?new fa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fa(n.startAt.position,n.startAt.inclusive):null;return M_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function L_(n,e){const t=n.filters.concat([e]);return new us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $4(n,e){const t=n.explicitOrderBy.concat([e]);return new us(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Km(n,e,t){return new us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Q4(n,e){return new us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,e,n.endAt)}function Y4(n,e){return new us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,e)}function dd(n,e){return hd(Pn(n),Pn(e))&&n.limitType===e.limitType}function yx(n){return`${So(Pn(n))}|lt:${n.limitType}`}function Gl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>fx(a))).join(", ")}]`),ud(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>mu(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>mu(a))).join(",")),`Target(${r})`})(Pn(n))}; limitType=${n.limitType})`}function fd(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ce.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of eu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,m){const g=DI(c,d,m);return c.inclusive?g<=0:g<0})(r.startAt,eu(r),a)||r.endAt&&!(function(c,d,m){const g=DI(c,d,m);return c.inclusive?g>=0:g>0})(r.endAt,eu(r),a))})(n,e)}function _x(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vx(n){return(e,t)=>{let r=!1;for(const a of eu(n)){const l=W4(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function W4(n,e,t){const r=n.field.isKeyField()?ce.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?da(m,g):pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return ZR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new ct(ce.comparator);function Gn(){return X4}const Ex=new ct(ce.comparator);function uh(...n){let e=Ex;for(const t of n)e=e.insert(t.key,t);return e}function Tx(n){let e=Ex;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ei(){return bh()}function wx(){return bh()}function bh(){return new cs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const J4=new ct(ce.comparator),Z4=new rt(ce.comparator);function Ne(...n){let e=Z4;for(const t of n)e=e.add(t);return e}const eL=new rt(Se);function eE(){return eL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function bx(n){return{integerValue:""+n}}function Ix(n,e){return FR(e)?bx(e):tE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this._=void 0}}function tL(n,e,t){return n instanceof gu?(function(a,l){const c={fields:{[nx]:{stringValue:tx},[ix]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&bp(l)&&(l=Ip(l)),l&&(c.fields[rx]=l),{mapValue:c}})(t,e):n instanceof Ro?Sx(n,e):n instanceof xo?Rx(n,e):(function(a,l){const c=Ax(a,l),d=MI(c)+MI(a.Ae);return O_(c)&&O_(a.Ae)?bx(d):tE(a.serializer,d)})(n,e)}function nL(n,e,t){return n instanceof Ro?Sx(n,e):n instanceof xo?Rx(n,e):t}function Ax(n,e){return n instanceof yu?(function(r){return O_(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class gu extends Sp{}class Ro extends Sp{constructor(e){super(),this.elements=e}}function Sx(n,e){const t=xx(e);for(const r of n.elements)t.some((a=>Si(a,r)))||t.push(r);return{arrayValue:{values:t}}}class xo extends Sp{constructor(e){super(),this.elements=e}}function Rx(n,e){let t=xx(e);for(const r of n.elements)t=t.filter((a=>!Si(a,r)));return{arrayValue:{values:t}}}class yu extends Sp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function MI(n){return yt(n.integerValue||n.doubleValue)}function xx(n){return qh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.field=e,this.transform=t}}function rL(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Ro&&a instanceof Ro||r instanceof xo&&a instanceof xo?ou(r.elements,a.elements,Si):r instanceof yu&&a instanceof yu?Si(r.Ae,a.Ae):r instanceof gu&&a instanceof gu})(n.transform,e.transform)}class iL{constructor(e,t){this.version=e,this.transformResults=t}}class Tt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tt}static exists(e){return new Tt(void 0,e)}static updateTime(e){return new Tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rp{}function Cx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lu(n.key,Tt.none()):new Mu(n.key,n.data,Tt.none());{const t=n.data,r=gn.empty();let a=new rt(Et.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new hs(n.key,r,new Hn(a.toArray()),Tt.none())}}function sL(n,e,t){n instanceof Mu?(function(a,l,c){const d=a.value.clone(),m=UI(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof hs?(function(a,l,c){if(!wm(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=UI(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Nx(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ih(n,e,t,r){return n instanceof Mu?(function(l,c,d,m){if(!wm(l.precondition,c))return d;const g=l.value.clone(),_=jI(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof hs?(function(l,c,d,m){if(!wm(l.precondition,c))return d;const g=jI(l.fieldTransforms,m,c),_=c.data;return _.setAll(Nx(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(l,c,d){return wm(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function aL(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=Ax(r.transform,a||null);l!=null&&(t===null&&(t=gn.empty()),t.set(r.field,l))}return t||null}function LI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ou(r,a,((l,c)=>rL(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mu extends Rp{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class hs extends Rp{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Nx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function UI(n,e,t){const r=new Map;_e(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,nL(c,d,t[a]))}return r}function jI(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,tL(l,c,e))}return r}class Lu extends Rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nE extends Rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&sL(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ih(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ih(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wx();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Cx(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&ou(this.mutations,e.mutations,((t,r)=>LI(t,r)))&&ou(this.baseMutations,e.baseMutations,((t,r)=>LI(t,r)))}}class iE{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){_e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return J4})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new iE(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,qe;function Dx(n){switch(n){case Y.OK:return pe(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function Px(n){if(n===void 0)return Mt("GRPC error has no .code"),Y.UNKNOWN;switch(n){case Qt.OK:return Y.OK;case Qt.CANCELLED:return Y.CANCELLED;case Qt.UNKNOWN:return Y.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return Y.INTERNAL;case Qt.UNAVAILABLE:return Y.UNAVAILABLE;case Qt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Qt.NOT_FOUND:return Y.NOT_FOUND;case Qt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Qt.ABORTED:return Y.ABORTED;case Qt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Qt.DATA_LOSS:return Y.DATA_LOSS;default:return pe(39323,{code:n})}}(qe=Qt||(Qt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new na([4294967295,4294967295],0);function zI(n){const e=Ox().encode(n),t=new AR;return t.update(e),new Uint8Array(t.digest())}function BI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new na([t,r],0),new na([a,l],0)]}class aE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ch(`Invalid padding: ${t}`);if(r<0)throw new ch(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ch(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ch(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=na.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(na.fromNumber(r)));return a.compare(lL)===1&&(a=new na([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zI(e),[r,a]=BI(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new aE(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=zI(e),[r,a]=BI(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,gd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new pd(Ee.min(),a,new ct(Se),Gn(),Ne())}}class gd{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gd(r,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class Vx{constructor(e,t){this.targetId=e,this.Ce=t}}class kx{constructor(e,t,r=Ct.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class FI{constructor(){this.ve=0,this.Fe=qI(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),r=Ne();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:pe(38017,{changeType:l})}})),new gd(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=qI()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class uL{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.He=rm(),this.Je=rm(),this.Ze=new ct(Se)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Hm(l))if(r===0){const c=new ce(l.path);this.et(t,c,ft.newNoDocument(c,Ee.min()))}else _e(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ss(r).toUint8Array()}catch(m){if(m instanceof ex)return Ai("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new aE(c,a,l)}catch(m){return Ai(m instanceof ch?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Hm(d.target)){const m=new ce(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,ft.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Ne();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new pd(e,t,this.Ze,this.je,r);return this.je=Gn(),this.He=rm(),this.Je=rm(),this.Ze=new ct(Se),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new FI,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new rt(Se),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new rt(Se),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new FI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function rm(){return new ct(ce.comparator)}function qI(){return new ct(ce.comparator)}const cL={asc:"ASCENDING",desc:"DESCENDING"},hL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dL={and:"AND",or:"OR"};class fL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function U_(n,e){return n.useProto3Json||ud(e)?e:{value:e}}function _u(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mL(n,e){return _u(n,e.toTimestamp())}function Lt(n){return _e(!!n,49232),Ee.fromTimestamp((function(t){const r=is(t);return new Xe(r.seconds,r.nanos)})(n))}function oE(n,e){return j_(n,e).canonicalString()}function j_(n,e){const t=(function(a){return new Le(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Lx(n){const e=Le.fromString(n);return _e($x(e),10190,{key:e.toString()}),e}function Gh(n,e){return oE(n.databaseId,e.path)}function wi(n,e){const t=Lx(e);if(t.get(1)!==n.databaseId.projectId)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(zx(t))}function Ux(n,e){return oE(n.databaseId,e)}function jx(n){const e=Lx(n);return e.length===4?Le.emptyPath():zx(e)}function z_(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zx(n){return _e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function HI(n,e,t){return{name:Gh(n,e),fields:t.value.mapValue.fields}}function Bx(n,e,t){const r=wi(n,e.name),a=Lt(e.updateTime),l=e.createTime?Lt(e.createTime):Ee.min(),c=new gn({mapValue:{fields:e.fields}}),d=ft.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function pL(n,e){return"found"in e?(function(r,a){_e(!!a.found,43571),a.found.name,a.found.updateTime;const l=wi(r,a.found.name),c=Lt(a.found.updateTime),d=a.found.createTime?Lt(a.found.createTime):Ee.min(),m=new gn({mapValue:{fields:a.found.fields}});return ft.newFoundDocument(l,c,d,m)})(n,e):"missing"in e?(function(r,a){_e(!!a.missing,3894),_e(!!a.readTime,22933);const l=wi(r,a.missing),c=Lt(a.readTime);return ft.newNoDocument(l,c)})(n,e):pe(7234,{result:e})}function gL(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:pe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(_e(_===void 0||typeof _=="string",58123),Ct.fromBase64String(_||"")):(_e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Ct.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?Y.UNKNOWN:Px(g.code);return new ie(_,g.message||"")})(c);t=new kx(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=wi(n,r.document.name),l=Lt(r.document.updateTime),c=r.document.createTime?Lt(r.document.createTime):Ee.min(),d=new gn({mapValue:{fields:r.document.fields}}),m=ft.newFoundDocument(a,l,c,d),g=r.targetIds||[],_=r.removedTargetIds||[];t=new bm(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=wi(n,r.document),l=r.readTime?Lt(r.readTime):Ee.min(),c=ft.newNoDocument(a,l),d=r.removedTargetIds||[];t=new bm([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=wi(n,r.document),l=r.removedTargetIds||[];t=new bm([],l,a,null)}else{if(!("filter"in e))return pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new oL(a,l),d=r.targetId;t=new Vx(d,c)}}return t}function Kh(n,e){let t;if(e instanceof Mu)t={update:HI(n,e.key,e.value)};else if(e instanceof Lu)t={delete:Gh(n,e.key)};else if(e instanceof hs)t={update:HI(n,e.key,e.data),updateMask:wL(e.fieldMask)};else{if(!(e instanceof nE))return pe(16599,{dt:e.type});t={verify:Gh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof gu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ro)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof xo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof yu)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw pe(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:mL(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:pe(27497)})(n,e.precondition)),t}function B_(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Tt.updateTime(Lt(l.updateTime)):l.exists!==void 0?Tt.exists(l.exists):Tt.none()})(e.currentDocument):Tt.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let m=null;if("setToServerValue"in d)_e(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new gu;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new Ro(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new xo(_)}else"increment"in d?m=new yu(c,d.increment):pe(16584,{proto:d});const g=Et.fromServerFormat(d.fieldPath);return new md(g,m)})(n,a))):[];if(e.update){e.update.name;const a=wi(n,e.update.name),l=new gn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new Hn(g.map((_=>Et.fromServerFormat(_))))})(e.updateMask);return new hs(a,l,c,t,r)}return new Mu(a,l,t,r)}if(e.delete){const a=wi(n,e.delete);return new Lu(a,t)}if(e.verify){const a=wi(n,e.verify);return new nE(a,t)}return pe(1463,{proto:e})}function yL(n,e){return n&&n.length>0?(_e(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Lt(a.updateTime):Lt(l);return c.isEqual(Ee.min())&&(c=Lt(l)),new iL(c,a.transformResults||[])})(t,e)))):[]}function Fx(n,e){return{documents:[Ux(n,e.path)]}}function qx(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ux(n,a);const l=(function(g){if(g.length!==0)return Kx(nt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:Kl(b.field),direction:vL(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=U_(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function Hx(n){let e=jx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){_e(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(v){const b=Gx(v);return b instanceof nt&&Jv(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((b=>(function(M){return new Hh($l(M.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(v){let b;return b=typeof v=="object"?v.value:v,ud(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(v){const b=!!v.before,R=v.values||[];return new fa(R,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(v){const b=!v.before,R=v.values||[];return new fa(R,b)})(t.endAt)),gx(e,a,c,l,d,"F",m,g)}function _L(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Gx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$l(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=$l(t.unaryFilter.field);return ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=$l(t.unaryFilter.field);return ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$l(t.unaryFilter.field);return ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ze.create($l(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return nt.create(t.compositeFilter.filters.map((r=>Gx(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(n):pe(30097,{filter:n})}function vL(n){return cL[n]}function EL(n){return hL[n]}function TL(n){return dL[n]}function Kl(n){return{fieldPath:n.canonicalString()}}function $l(n){return Et.fromServerFormat(n.fieldPath)}function Kx(n){return n instanceof ze?(function(t){if(t.op==="=="){if(xI(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NAN"}};if(RI(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xI(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NAN"}};if(RI(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(t.field),op:EL(t.op),value:t.value}}})(n):n instanceof nt?(function(t){const r=t.getFilters().map((a=>Kx(a)));return r.length===1?r[0]:{compositeFilter:{op:TL(t.op),filters:r}}})(n):pe(54877,{filter:n})}function wL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $x(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Qx(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,r,a,l=Ee.min(),c=Ee.min(),d=Ct.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.yt=e}}function bL(n,e){let t;if(e.document)t=Bx(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),a=No(e.noDocument.readTime);t=ft.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=ce.fromSegments(e.unknownDocument.path),a=No(e.unknownDocument.version);t=ft.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new Xe(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function GI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$m(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Gh(l,c.key),fields:c.data.value.mapValue.fields,updateTime:_u(l,c.version.toTimestamp()),createTime:_u(l,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Co(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Co(e.version)}}return r}function $m(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Co(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function No(n){const e=new Xe(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function co(n,e){const t=(e.baseMutations||[]).map((l=>B_(n.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>B_(n.yt,l))),a=Xe.fromMillis(e.localWriteTimeMs);return new rE(e.batchId,a,t,r)}function hh(n){const e=No(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?No(n.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=(function(l){return l.documents!==void 0})(n.query)?(function(l){const c=l.documents.length;return _e(c===1,1966,{count:c}),Pn(ku(jx(l.documents[0])))})(n.query):(function(l){return Pn(Hx(l))})(n.query),new Xi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ct.fromBase64String(n.resumeToken))}function Wx(n,e){const t=Co(e.snapshotVersion),r=Co(e.lastLimboFreeSnapshotVersion);let a;a=Hm(e.target)?Fx(n.yt,e.target):qx(n.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:So(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function lE(n){const e=Hx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Km(e,e.limit,"L"):e}function o_(n,e){return new sE(e.largestBatchId,B_(n.yt,e.overlayMutation))}function KI(n,e){const t=e.path.lastSegment();return[n,bn(e.path.popLast()),t]}function $I(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Co(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{getBundleMetadata(e,t){return QI(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:No(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return QI(e).put((function(a){return{bundleId:a.id,createTime:Co(Lt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return YI(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:lE(l.bundledQuery),readTime:No(l.readTime)}})(r)}))}saveNamedQuery(e,t){return YI(e).put((function(a){return{name:a.name,readTime:Co(Lt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function QI(n){return tn(n,Ep)}function YI(n){return tn(n,Tp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new xp(e,r)}getOverlay(e,t){return Jc(e).get(KI(this.userId,t)).next((r=>r?o_(this.serializer,r):null))}getOverlays(e,t){const r=Ei();return H.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const d=new sE(t,c);a.push(this.bt(e,d))})),H.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(bn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Jc(e).X(N_,d))})),H.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Ei(),l=bn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Jc(e).H(N_,c).next((d=>{for(const m of d){const g=o_(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Ei();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jc(e).ee({index:QR,range:d},((m,g,_)=>{const v=o_(this.serializer,g);l.size()<a||v.largestBatchId===c?(l.set(v.getKey(),v),c=v.largestBatchId):_.done()})).next((()=>l))}bt(e,t){return Jc(e).put((function(a,l,c){const[d,m,g]=KI(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kh(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Jc(n){return tn(n,wp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{St(e){return tn(e,Qv)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Ct.fromUint8Array(r):Ct.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(yt(e.integerValue));else if("doubleValue"in e){const r=yt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Lh(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=is(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ss(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?ax(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ap(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):pe(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){var c,d;const r=e.fields||{};this.Ft(t,53);const a=fu,l=((d=(c=r[a].arrayValue)==null?void 0:c.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(yt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ce.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ho.Wt=new ho;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=255;function SL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function WI(n){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=SL(255&r[l]);if(a+=c,c!==8)break}return a})(n);return Math.ceil(e/8)}class RL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=WI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=WI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(zl),this.sn(255)}_n(){this.an(zl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===zl?(this.sn(zl),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===zl?(this.an(zl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class xL{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class CL{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Zc{constructor(){this.cn=new RL,this.ascending=new xL(this.cn),this.descending=new CL(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new fo(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Im(this.Tn),directionalValue:Im(this.In),orderedDocumentKey:Im(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function $s(n,e){let t=n.hn-e.hn;return t!==0?t:(t=XI(n.Tn,e.Tn),t!==0?t:(t=XI(n.In,e.In),t!==0?t:ce.comparator(n.Pn,e.Pn)))}function XI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Im(n){return gS()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(n):n}function JI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(n)}class ZI{constructor(e){this.Vn=new rt(((t,r)=>Et.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(_e(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=R_(e);if(t!==void 0&&!this.pn(t))return!1;const r=ao(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.yn(d,m)||!this.wn(this.dn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new rt(Et.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new gm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new gm(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new gm(r.field,r.dir==="asc"?0:1)));return new jm(jm.UNKNOWN_ID,this.collectionId,t,Mh.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){var t,r;if(_e(n instanceof ze||n instanceof nt,20012),n instanceof ze){if(n instanceof px){const a=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((l=>ze.create(n.field,"==",l))))||[];return nt.create(a,"or")}return n}const e=n.filters.map((a=>Xx(a)));return nt.create(e,n.op)}function NL(n){if(n.getFilters().length===0)return[];const e=H_(Xx(n));return _e(Jx(e),7391),F_(e)||q_(e)?[e]:e.getFilters()}function F_(n){return n instanceof ze}function q_(n){return n instanceof nt&&Jv(n)}function Jx(n){return F_(n)||q_(n)||(function(t){if(t instanceof nt&&V_(t)){for(const r of t.getFilters())if(!F_(r)&&!q_(r))return!1;return!0}return!1})(n)}function H_(n){if(_e(n instanceof ze||n instanceof nt,34018),n instanceof ze)return n;if(n.filters.length===1)return H_(n.filters[0]);const e=n.filters.map((r=>H_(r)));let t=nt.create(e,n.op);return t=Qm(t),Jx(t)?t:(_e(t instanceof nt,64498),_e(pu(t),40251),_e(t.filters.length>1,57927),t.filters.reduce(((r,a)=>uE(r,a))))}function uE(n,e){let t;return _e(n instanceof ze||n instanceof nt,38388),_e(e instanceof ze||e instanceof nt,25473),t=n instanceof ze?e instanceof ze?(function(a,l){return nt.create([a,l],"and")})(n,e):eA(n,e):e instanceof ze?eA(e,n):(function(a,l){if(_e(a.filters.length>0&&l.filters.length>0,48005),pu(a)&&pu(l))return dx(a,l.getFilters());const c=V_(a)?a:l,d=V_(a)?l:a,m=c.filters.map((g=>uE(g,d)));return nt.create(m,"or")})(n,e),Qm(t)}function eA(n,e){if(pu(e))return dx(e,n.getFilters());{const t=e.filters.map((r=>uE(n,r)));return nt.create(t,"or")}}function Qm(n){if(_e(n instanceof ze||n instanceof nt,11850),n instanceof ze)return n;const e=n.getFilters();if(e.length===1)return Qm(e[0]);if(cx(n))return n;const t=e.map((a=>Qm(a))),r=[];return t.forEach((a=>{a instanceof ze?r.push(a):a instanceof nt&&(a.op===n.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:nt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.Sn=new cE}addToCollectionParentIndex(e,t){return this.Sn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(sr.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class cE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new rt(Le.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new rt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="IndexedDbIndexManager",im=new Uint8Array(0);class PL{constructor(e,t){this.databaseId=t,this.Dn=new cE,this.Cn=new cs((r=>So(r)),((r,a)=>hd(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:bn(a)};return nA(e).put(l)}return H.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[OR(t),""],!1,!0);return nA(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(vi(c.parent))}return r}))}addFieldIndex(e,t){const r=eh(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Fl(e);return l.next((d=>{c.put($I(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=eh(e),a=Fl(e),l=Bl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=eh(e),r=Bl(e),a=Fl(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return H.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new ZI(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Bl(e);let a=!0;const l=new Map;return H.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ne();const d=[];return H.forEach(l,((m,g)=>{se(tA,`Using index ${(function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map((ge=>`${ge.fieldPath}:${ge.kind}`)).join(",")}`})(m)} to execute ${So(t)}`);const _=(function(X,ge){const fe=R_(ge);if(fe===void 0)return null;for(const de of Gm(X,fe.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(g,m),v=(function(X,ge){const fe=new Map;for(const de of ao(ge))for(const x of Gm(X,de.fieldPath))switch(x.op){case"==":case"in":fe.set(de.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return fe.set(de.fieldPath.canonicalString(),x.value),Array.from(fe.values())}return null})(g,m),b=(function(X,ge){const fe=[];let de=!0;for(const x of ao(ge)){const S=x.kind===0?OI(X,x.fieldPath,X.startAt):VI(X,x.fieldPath,X.startAt);fe.push(S.value),de&&(de=S.inclusive)}return new fa(fe,de)})(g,m),R=(function(X,ge){const fe=[];let de=!0;for(const x of ao(ge)){const S=x.kind===0?VI(X,x.fieldPath,X.endAt):OI(X,x.fieldPath,X.endAt);fe.push(S.value),de&&(de=S.inclusive)}return new fa(fe,de)})(g,m),M=this.Mn(m,g,b),z=this.Mn(m,g,R),F=this.xn(m,g,v),ee=this.On(m.indexId,_,M,b.inclusive,z,R.inclusive,F);return H.forEach(ee,(te=>r.Z(te,t.limit).next((X=>{X.forEach((ge=>{const fe=ce.fromSegments(ge.documentKey);c.has(fe)||(c=c.add(fe),d.push(fe))}))}))))})).next((()=>d))}return H.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=NL(nt.create(e.filters,"and")).map((r=>M_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let v=0;v<m;++v){const b=t?this.Nn(t[v/g]):im,R=this.Bn(e,b,r[v%g],a),M=this.Ln(e,b,l[v%g],c),z=d.map((F=>this.Bn(e,b,F,!0)));_.push(...this.createRange(R,M,z))}return _}Bn(e,t,r,a){const l=new fo(e,ce.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new fo(e,ce.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new ZI(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)r.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const a=this.vn(t);return H.forEach(a,(l=>this.Fn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(m){let g=new rt(Et.comparator),_=!1;for(const v of m.filters)for(const b of v.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const v of m.orderBy)v.field.isKeyField()||(g=g.add(v.field));return g.size+(_?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Zc;for(const a of ao(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.ln(a.kind);ho.Wt.Dt(l,c)}return r.un()}Nn(e){const t=new Zc;return ho.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Zc;return ho.Wt.Dt(Ao(this.databaseId,t),r.ln((function(l){const c=ao(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Zc);let l=0;for(const c of ao(e)){const d=r[l++];for(const m of a)if(this.qn(t,c.fieldPath)&&qh(d))a=this.Un(a,c,d);else{const g=m.ln(c.kind);ho.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new Zc;m.seed(d.un()),ho.Wt.Dt(c,m.ln(t.kind)),l.push(m)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=eh(e),a=Fl(e);return(t?r.H(C_,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const c=[];return H.forEach(l,(d=>a.get([d.indexId,this.uid]).next((m=>{c.push((function(_,v){const b=v?new Mh(v.sequenceNumber,new sr(No(v.readTime),new ce(vi(v.documentKey)),v.largestBatchId)):Mh.empty(),R=_.fields.map((([M,z])=>new gm(Et.fromServerFormat(M),z)));return new jm(_.indexId,_.collectionGroup,R,b)})(d,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Se(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=eh(e),l=Fl(e);return this.Wn(e).next((c=>a.H(C_,IDBKeyRange.bound(t,t)).next((d=>H.forEach(d,(m=>l.put($I(m.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return H.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?H.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(r.set(a.collectionGroup,d),H.forEach(d,(m=>this.Qn(e,a,m).next((g=>{const _=this.Gn(l,m);return g.isEqual(_)?H.resolve():this.zn(e,l,m,g,_)})))))))}))}jn(e,t,r,a){return Bl(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return Bl(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=Bl(e);let l=new rt($s);return a.ee({index:$R,range:IDBKeyRange.only([r.indexId,this.uid,Im(this.Kn(r,t))])},((c,d)=>{l=l.add(new fo(r.indexId,t,JI(d.arrayValue),JI(d.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new rt($s);const a=this.kn(t,e);if(a==null)return r;const l=R_(t);if(l!=null){const c=e.data.field(l.fieldPath);if(qh(c))for(const d of c.arrayValue.values||[])r=r.add(new fo(t.indexId,e.key,this.Nn(d),a))}else r=r.add(new fo(t.indexId,e.key,im,a));return r}zn(e,t,r,a,l){se(tA,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,_,v,b){const R=m.getIterator(),M=g.getIterator();let z=jl(R),F=jl(M);for(;z||F;){let ee=!1,te=!1;if(z&&F){const X=_(z,F);X<0?te=!0:X>0&&(ee=!0)}else z!=null?te=!0:ee=!0;ee?(v(F),F=jl(M)):te?(b(z),z=jl(R)):(z=jl(R),F=jl(M))}})(a,l,$s,(d=>{c.push(this.jn(e,t,r,d))}),(d=>{c.push(this.Hn(e,t,r,d))})),H.waitFor(c)}Wn(e){let t=1;return Fl(e).ee({index:KR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>$s(c,d))).filter(((c,d,m)=>!d||$s(c,m[d-1])!==0));const a=[];a.push(e);for(const c of r){const d=$s(c,e),m=$s(c,t);if(d===0)a[0]=e.En();else if(d>0&&m<0)a.push(c),a.push(c.En());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,im,ce.empty()),m=a[c+1].An(this.uid,im,ce.empty());l.push(IDBKeyRange.bound(d,m))}return l}Jn(e,t){return $s(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rA)}getMinOffset(e,t){return H.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||pe(44426))))).next(rA)}}function nA(n){return tn(n,zh)}function Bl(n){return tn(n,Th)}function eh(n){return tn(n,$v)}function Fl(n){return tn(n,Eh)}function rA(n){_e(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;Hv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new sr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zx=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(n,e,t){const r=n.store(Lr),a=n.store(uu),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.ee({range:c},((_,v,b)=>(d++,b.delete())));l.push(m.next((()=>{_e(d===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const v=qR(e,_.key.path,t.batchId);l.push(a.delete(v)),g.push(_.key)}return H.waitFor(l).next((()=>g))}function Ym(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(Zx,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);class Cp{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){_e(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Cp(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).ee({index:go,range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Ql(e),c=Qs(e);return c.add({}).next((d=>{_e(typeof d=="number",49019);const m=new rE(d,t,r,a),g=(function(R,M,z){const F=z.baseMutations.map((te=>Kh(R.yt,te))),ee=z.mutations.map((te=>Kh(R.yt,te)));return{userId:M,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:F,mutations:ee}})(this.serializer,this.userId,m),_=[];let v=new rt(((b,R)=>Se(b.canonicalString(),R.canonicalString())));for(const b of a){const R=qR(this.userId,b.key.path,d);v=v.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(R,o4))}return v.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Zn[d]=m.keys()})),H.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return Qs(e).get(t).next((r=>r?(_e(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),co(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?H.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Qs(e).ee({index:go,range:a},((c,d,m)=>{d.userId===this.userId&&(_e(d.batchId>=r,47524,{Yn:r}),l=co(this.serializer,d)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ra;return Qs(e).ee({index:go,range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ra],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).H(go,t).next((r=>r.map((a=>co(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ym(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Ql(e).ee({range:a},((c,d,m)=>{const[g,_,v]=c,b=vi(_);if(g===this.userId&&t.path.isEqual(b))return Qs(e).get(v).next((R=>{if(!R)throw pe(61480,{er:c,batchId:v});_e(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:v}),l.push(co(this.serializer,R))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Se);const a=[];return t.forEach((l=>{const c=ym(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Ql(e).ee({range:d},((g,_,v)=>{const[b,R,M]=g,z=vi(R);b===this.userId&&l.path.isEqual(z)?r=r.add(M):v.done()}));a.push(m)})),H.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=ym(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new rt(Se);return Ql(e).ee({range:c},((m,g,_)=>{const[v,b,R]=m,M=vi(b);v===this.userId&&r.isPrefixOf(M)?M.length===a&&(d=d.add(R)):_.done()})).next((()=>this.tr(e,d)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(Qs(e).get(l).next((c=>{if(c===null)throw pe(35274,{batchId:l});_e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(co(this.serializer,c))})))})),H.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return e1(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),H.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Ql(e).ee({range:r},((l,c,d)=>{if(l[0]===this.userId){const m=vi(l[1]);a.push(m)}else d.done()})).next((()=>{_e(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return t1(e,this.userId,t)}ir(e){return n1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ra,lastStreamToken:""}))}}function t1(n,e,t){const r=ym(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Ql(n).ee({range:l,Y:!0},((d,m,g)=>{const[_,v,b]=d;_===e&&v===a&&(c=!0),g.done()})).next((()=>c))}function Qs(n){return tn(n,Lr)}function Ql(n){return tn(n,uu)}function n1(n){return tn(n,Uh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Do(0)}static ar(){return new Do(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Do(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ee.fromTimestamp(new Xe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ql(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(_e(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return ql(e).ee(((c,d)=>{const m=hh(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>H.waitFor(l))).next((()=>a))}forEachTarget(e,t){return ql(e).ee(((r,a)=>{const l=hh(a);t(l)}))}ur(e){return sA(e).get(Fm).next((t=>(_e(t!==null,2888),t)))}cr(e,t){return sA(e).put(Fm,t)}lr(e,t){return ql(e).put(Wx(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=So(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return ql(e).ee({range:a,index:GR},((c,d,m)=>{const g=hh(d);hd(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Ws(e);return t.forEach((c=>{const d=bn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))})),H.waitFor(a)}removeMatchingKeys(e,t,r){const a=Ws(e);return H.forEach(t,(l=>{const c=bn(l.path);return H.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Ws(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Ws(e);let l=Ne();return a.ee({range:r,Y:!0},((c,d,m)=>{const g=vi(c[1]),_=new ce(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const r=bn(t.path),a=IDBKeyRange.bound([r],[OR(r)],!1,!0);let l=0;return Ws(e).ee({index:Kv,Y:!0,range:a},(([c,d],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return ql(e).get(t).next((r=>r?hh(r):null))}}function ql(n){return tn(n,cu)}function sA(n){return tn(n,To)}function Ws(n){return tn(n,hu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="LruGarbageCollector",VL=1048576;function oA([n,e],[t,r]){const a=Se(n,t);return a===0?Se(e,r):a}class kL{constructor(e){this.Pr=e,this.buffer=new rt(oA),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class r1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){se(aA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ea(t)?se(aA,"Ignoring IndexedDB error during garbage collection: ",t):await va(t)}await this.Ar(3e5)}))}}class ML{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(qn.ce);const r=new kL(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(iA)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iA):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(r=v,d=Date.now(),this.removeTargets(e,r,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(g=Date.now(),Hl()<=Me.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function i1(n,e){return new ML(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,t){this.db=e,this.garbageCollector=i1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return sm(e,r)}removeReference(e,t,r){return sm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sm(e,t)}wr(e,t){return(function(a,l){let c=!1;return n1(a).te((d=>t1(a,d,l).next((m=>(m&&(c=!0),H.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const m=this.wr(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ee.min()),Ws(e).delete((function(v){return[0,bn(v.path)]})(c)))))}));a.push(m)}})).next((()=>H.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sm(e,t)}yr(e,t){const r=Ws(e);let a,l=qn.ce;return r.ee({index:Kv},(([c,d],{path:m,sequenceNumber:g})=>{c===0?(l!==qn.ce&&t(new ce(vi(a)),l),l=g,a=m):l=qn.ce})).next((()=>{l!==qn.ce&&t(new ce(vi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sm(n,e){return Ws(n).put((function(r,a){return{targetId:0,path:bn(r.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.changes=new cs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ro(e).put(r)}removeEntry(e,t,r){return ro(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],$m(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=ft.newInvalidDocument(t);return ro(e).ee({index:_m,range:IDBKeyRange.only(th(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:ft.newInvalidDocument(t)};return ro(e).ee({index:_m,range:IDBKeyRange.only(th(t))},((a,l)=>{r={document:this.Sr(t,l),size:Ym(l)}})).next((()=>r))}getEntries(e,t){let r=Gn();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c)})).next((()=>r))}vr(e,t){let r=Gn(),a=new ct(ce.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);r=r.insert(l,d),a=a.insert(l,Ym(c))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return H.resolve();let a=new rt(cA);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(th(a.first()),th(a.last())),c=a.getIterator();let d=c.getNext();return ro(e).ee({index:_m,range:l},((m,g,_)=>{const v=ce.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&cA(d,v)<0;)r(d,null),d=c.getNext();d&&d.isEqual(v)&&(r(d,g),d=c.hasNext()?c.getNext():null),d?_.j(th(d)):_.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),$m(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ro(e).H(IDBKeyRange.bound(d,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let _=Gn();for(const v of g){const b=this.Sr(ce.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);b.isFoundDocument()&&(fd(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,r,a){let l=Gn();const c=uA(t,r),d=uA(t,sr.max());return ro(e).ee({index:HR,range:IDBKeyRange.bound(c,d,!0)},((m,g,_)=>{const v=this.Sr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(v.key,v),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new jL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return lA(e).get(x_).next((t=>(_e(!!t,20021),t)))}br(e,t){return lA(e).put(x_,t)}Sr(e,t){if(t){const r=bL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return ft.newInvalidDocument(e)}}function a1(n){return new UL(n)}class jL extends s1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new cs((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new rt(((l,c)=>Se(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=GI(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Ym(m);r+=g-d.size,t.push(this.Mr.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=GI(this.Mr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Mr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),H.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function lA(n){return tn(n,jh)}function ro(n){return tn(n,Bm)}function th(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uA(n,e){const t=e.documentKey.path.toArray();return[n,$m(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cA(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Se(t[l],r[l]),a)return a;return a=Se(t.length,r.length),a||(a=Se(t[t.length-2],r[r.length-2]),a||Se(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Ih(r.mutation,a,Hn.empty(),Xe.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ne()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ne()){const a=Ei();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=uh();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Ei();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ne())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Gn();const c=bh(),d=(function(){return bh()})();return t.forEach(((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof hs)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Ih(_.mutation,g,_.mutation.getFieldMask(),Xe.now())):c.set(g.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new zL(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=bh();let a=new ct(((c,d)=>c-d)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||Hn.empty();_=d.applyToLocalView(g,_),r.set(m,_);const v=(a.get(d.batchId)||Ne()).add(m);a=a.insert(d.batchId,v)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,v=wx();_.forEach((b=>{if(!l.has(b)){const R=Cx(t.get(b),r.get(b));R!==null&&v.set(b,R),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,v))}return H.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return G4(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):H.resolve(Ei());let d=lu,m=l;return c.next((g=>H.forEach(g,((_,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(_)?H.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ne()))).next((_=>({batchId:d,changes:Tx(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((r=>{let a=uh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=uh();return this.indexManager.getCollectionParents(e,l).next((d=>H.forEach(d,(m=>{const g=(function(v,b){return new us(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((_=>{_.forEach(((v,b)=>{c=c.insert(v,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,ft.newInvalidDocument(_)))}));let d=uh();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&Ih(_.mutation,g,Hn.empty(),Xe.now()),fd(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return H.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Lt(a.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:lE(a.bundledQuery),readTime:Lt(a.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.overlays=new ct(ce.comparator),this.Lr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ei();return H.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),H.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const a=Ei(),l=t.length+1,c=new ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return H.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ct(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=Ei(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Ei(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return H.resolve(d)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new sE(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ne(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.kr=new rt(an.Kr),this.qr=new rt(an.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new an(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new an(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ce(new Le([])),r=new an(t,e),a=new an(t,e+1),l=[];return this.qr.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ce(new Le([])),r=new an(t,e),a=new an(t,e+1);let l=Ne();return this.qr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new an(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ce.comparator(e.key,t.key)||Se(e.Hr,t.Hr)}static Ur(e,t){return Se(e.Hr,t.Hr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new rt(an.Kr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new rE(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new an(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return H.resolve(c)}lookupMutationBatch(e,t){return H.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return H.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?ra:this.Yn-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new an(t,0),a=new an(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),H.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Se);return t.forEach((a=>{const l=new an(a,0),c=new an(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),H.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ce.isDocumentKey(l)||(l=l.child(""));const c=new an(new ce(l),0);let d=new rt(Se);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Hr)),!0)}),c),H.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_e(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return H.forEach(t.mutations,(a=>{const l=new an(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new an(t,0),a=this.Jr.firstAfterOrEqual(r);return H.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.ti=e,this.docs=(function(){return new ct(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(t))}getEntries(e,t){let r=Gn();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ft.newInvalidDocument(a))})),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Gn();const c=t.path,d=new ce(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Hv(UR(_),r)<=0||(a.has(_.key)||fd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return H.resolve(l)}getAllFromCollectionGroup(e,t,r,a){pe(9500)}ni(e,t){return H.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new KL(this)}getSize(e){return H.resolve(this.size)}}class KL extends s1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),H.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.persistence=e,this.ri=new cs((t=>So(t)),hd),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.ii=0,this.si=new hE,this.targetCount=0,this.oi=Do._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),H.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Do(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.lr(t),H.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),H.waitFor(l).next((()=>a))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),H.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t){this._i={},this.overlays={},this.ai=new qn(0),this.ui=!1,this.ui=!0,this.ci=new qL,this.referenceDelegate=e(this),this.li=new $L(this),this.indexManager=new DL,this.remoteDocumentCache=(function(a){return new GL(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new Yx(t),this.Pi=new BL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new HL(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const a=new QL(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return H.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class QL extends zR{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ri=new hE,this.Ai=null}static Vi(e){return new Np(e)}get di(){if(this.Ai)return this.Ai;throw pe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.di,(r=>{const a=ce.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wm{constructor(e,t){this.persistence=e,this.fi=new cs((r=>bn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=i1(this,t)}static Vi(e,t){return new Wm(e,t)}Ti(){}Ii(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return H.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?H.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Ee.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Em(e.data.value)),t}wr(e,t,r){return H.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return H.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.serializer=e}k(e,t,r,a){const l=new vp("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore(cd)})(e),(function(m){m.createObjectStore(Uh,{keyPath:a4}),m.createObjectStore(Lr,{keyPath:TI,autoIncrement:!0}).createIndex(go,wI,{unique:!0}),m.createObjectStore(uu)})(e),hA(e),(function(m){m.createObjectStore(oo)})(e));let c=H.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore(hu),m.deleteObjectStore(cu),m.deleteObjectStore(To)})(e),hA(e)),c=c.next((()=>(function(m){const g=m.store(To),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return g.put(Fm,_)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(m,g){return g.store(Lr).H().next((v=>{m.deleteObjectStore(Lr),m.createObjectStore(Lr,{keyPath:TI,autoIncrement:!0}).createIndex(go,wI,{unique:!0});const b=g.store(Lr),R=v.map((M=>b.put(M)));return H.waitFor(R)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(du,{keyPath:p4})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.gi(l)))),r<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(jh)})(e),this.pi(l))))),r<7&&a>=7&&(c=c.next((()=>this.yi(l)))),r<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.bi(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Ep,{keyPath:g4})})(e),(function(m){m.createObjectStore(Tp,{keyPath:y4})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(wp,{keyPath:I4});g.createIndex(N_,A4,{unique:!1}),g.createIndex(QR,S4,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(Bm,{keyPath:l4});g.createIndex(_m,u4),g.createIndex(HR,c4)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(oo)))),r<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore($v,{keyPath:_4,autoIncrement:!0}).createIndex(C_,v4,{unique:!1}),m.createObjectStore(Eh,{keyPath:E4}).createIndex(KR,T4,{unique:!1}),m.createObjectStore(Th,{keyPath:w4}).createIndex($R,b4,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(Eh).clear()})).next((()=>{t.objectStore(Th).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Qv,{keyPath:R4})})(e)}))),r<18&&a>=18&&gS()&&(c=c.next((()=>{t.objectStore(Eh).clear()})).next((()=>{t.objectStore(Th).clear()}))),c}pi(e){let t=0;return e.store(oo).ee(((r,a)=>{t+=Ym(a)})).next((()=>{const r={byteSize:t};return e.store(jh).put(x_,r)}))}gi(e){const t=e.store(Uh),r=e.store(Lr);return t.H().next((a=>H.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,ra],[l.userId,l.lastAcknowledgedBatchId]);return r.H(go,c).next((d=>H.forEach(d,(m=>{_e(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=co(this.serializer,m);return e1(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(hu),r=e.store(oo);return e.store(To).get(Fm).next((a=>{const l=[];return r.ee(((c,d)=>{const m=new Le(c),g=(function(v){return[0,bn(v)]})(m);l.push(t.get(g).next((_=>_?H.resolve():(v=>t.put({targetId:0,path:bn(v),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>H.waitFor(l)))}))}wi(e,t){e.createObjectStore(zh,{keyPath:m4});const r=t.store(zh),a=new cE,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:bn(m)})}};return t.store(oo).ee({Y:!0},((c,d)=>{const m=new Le(c);return l(m.popLast())})).next((()=>t.store(uu).ee({Y:!0},(([c,d,m],g)=>{const _=vi(d);return l(_.popLast())}))))}bi(e){const t=e.store(cu);return t.ee(((r,a)=>{const l=hh(a),c=Wx(this.serializer,l);return t.put(c)}))}Si(e,t){const r=t.store(oo),a=[];return r.ee(((l,c)=>{const d=t.store(Bm),m=(function(v){return v.document?new ce(Le.fromString(v.document.name).popFirst(5)):v.noDocument?ce.fromSegments(v.noDocument.path):v.unknownDocument?ce.fromSegments(v.unknownDocument.path):pe(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>H.waitFor(a)))}Di(e,t){const r=t.store(Lr),a=a1(this.serializer),l=new dE(Np.Vi,this.serializer.yt);return r.H().next((c=>{const d=new Map;return c.forEach((m=>{let g=d.get(m.userId)??Ne();co(this.serializer,m).keys().forEach((_=>g=g.add(_))),d.set(m.userId,g)})),H.forEach(d,((m,g)=>{const _=new on(g),v=xp.wt(this.serializer,_),b=l.getIndexManager(_),R=Cp.wt(_,this.serializer,b,l.referenceDelegate);return new o1(a,R,v,b).recalculateAndSaveOverlaysForDocumentKeys(new D_(t,qn.ce),m).next()}))}))}}function hA(n){n.createObjectStore(hu,{keyPath:d4}).createIndex(Kv,f4,{unique:!0}),n.createObjectStore(cu,{keyPath:"targetId"}).createIndex(GR,h4,{unique:!0}),n.createObjectStore(To)}const Ys="IndexedDbPersistence",l_=18e5,u_=5e3,c_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",l1="main";class fE{constructor(e,t,r,a,l,c,d,m,g,_,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=_,this.xi=v,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=b=>Promise.resolve(),!fE.v())throw new ie(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LL(this,a),this.Ki=t+l1,this.serializer=new Yx(m),this.qi=new Ti(this.Ki,this.xi,new YL(this.serializer)),this.ci=new AL,this.li=new OL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=a1(this.serializer),this.Pi=new IL,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&Mt(Ys,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(Y.FAILED_PRECONDITION,c_);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new qn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>am(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ea(e))return se(Ys,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(Ys,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return nh(e).get(Ul).next((t=>H.resolve(this.Xi(t))))}Yi(e){return am(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,l_)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=tn(t,du);return r.H().next((a=>{const l=this.ns(a,l_),c=a.filter((d=>l.indexOf(d)===-1));return H.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?H.resolve(!0):nh(e).get(Ul).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,u_)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ie(Y.FAILED_PRECONDITION,c_);return!1}}return!(!this.networkEnabled||!this.inForeground)||am(e).H().next((r=>this.ns(r,u_).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&se(Ys,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[cd,du],(e=>{const t=new D_(e,qn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>am(e).H().next((t=>this.ns(t,l_).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Cp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new PL(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return xp.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){se(Ys,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?N4:m===17?JR:m===16?C4:m===15?Yv:m===14?XR:m===13?WR:m===12?x4:m===11?YR:void pe(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new D_(d,this.ai?this.ai.next():qn.ce),t==="readwrite-primary"?this.ji(c).next((m=>!!m||this.Hi(c))).next((m=>{if(!m)throw Mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ie(Y.FAILED_PRECONDITION,jR);return r(c)})).next((m=>this.Zi(c).next((()=>m)))):this.Ps(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return nh(e).get(Ul).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,u_)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(Y.FAILED_PRECONDITION,c_)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nh(e).put(Ul,t)}static v(){return Ti.v()}Ji(e){const t=nh(e);return t.get(Ul).next((r=>this.Xi(r)?(se(Ys,"Releasing primary lease."),t.delete(Ul)):H.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;pS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return se(Ys,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mt(Ys,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Mt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nh(n){return tn(n,cd)}function am(n){return tn(n,du)}function mE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new pE(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return pS()?8:BR(It())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new WL;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Hl()<=Me.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(Hl()<=Me.DEBUG&&se("QueryEngine","Query:",Gl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Hl()<=Me.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(t))):H.resolve())}gs(e,t){if(kI(t))return H.resolve(null);let r=Pn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Km(t,null,"F"),r=Pn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ne(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.bs(t,d);return this.Ss(t,g,c,m.readTime)?this.gs(e,Km(t,null,"F")):this.Ds(e,g,t,m)}))))})))))}ps(e,t,r,a){return kI(t)||a.isEqual(Ee.min())?H.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,a)?H.resolve(null):(Hl()<=Me.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Gl(t)),this.Ds(e,c,t,LR(a,lu)).next((d=>d)))}))}bs(e,t){let r=new rt(vx(e));return t.forEach(((a,l)=>{fd(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return Hl()<=Me.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Gl(t)),this.fs.getDocumentsMatchingQuery(e,t,sr.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="LocalStore",XL=3e8;class JL{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new ct(Se),this.Fs=new cs((l=>So(l)),hd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function c1(n,e,t,r){return new JL(n,e,t,r)}async function h1(n,e){const t=he(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let m=Ne();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function ZL(n,e){const t=he(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,_){const v=g.batch,b=v.keys();let R=H.resolve();return b.forEach((M=>{R=R.next((()=>_.getEntry(m,M))).next((z=>{const F=g.docVersions.get(M);_e(F!==null,48541),z.version.compareTo(F)<0&&(v.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),_.addEntry(z)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(m,v)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=Ne();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function d1(n){const e=he(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function e3(n,e){const t=he(n),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((_,v)=>{const b=a.get(v);if(!b)return;d.push(t.li.removeMatchingKeys(l,_.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,v))));let R=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(Ct.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),a=a.insert(v,R),(function(z,F,ee){return z.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=XL?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(b,R,_)&&d.push(t.li.updateTargetData(l,R))}));let m=Gn(),g=Ne();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(f1(l,c,e.documentUpdates).next((_=>{m=_.Bs,g=_.Ls}))),!r.isEqual(Ee.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(_)}return H.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.vs=a,l)))}function f1(n,e,t){let r=Ne(),a=Ne();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Gn();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):se(gE,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function t3(n,e){const t=he(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ra),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function vu(n,e){const t=he(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,H.resolve(a)):t.li.allocateTargetId(r).next((c=>(a=new Xi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Eu(n,e,t){const r=he(n),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ea(c))throw c;se(gE,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Xm(n,e,t){const r=he(n);let a=Ee.min(),l=Ne();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const v=he(m),b=v.Fs.get(_);return b!==void 0?H.resolve(v.vs.get(b)):v.li.getTargetData(g,_)})(r,c,Pn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:Ne()))).next((d=>(g1(r,_x(e),d),{documents:d,ks:l})))))}function m1(n,e){const t=he(n),r=he(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((c=>c?c.target:null))))}function p1(n,e){const t=he(n),r=t.Ms.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,LR(r,lu),Number.MAX_SAFE_INTEGER))).then((a=>(g1(t,e,a),a)))}function g1(n,e,t){let r=n.Ms.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Ms.set(e,r)}async function n3(n,e,t,r){const a=he(n);let l=Ne(),c=Gn();for(const g of t){const _=e.Ks(g.metadata.name);g.document&&(l=l.add(_));const v=e.qs(g);v.setReadTime(e.Us(g.metadata.readTime)),c=c.insert(_,v)}const d=a.xs.newChangeBuffer({trackRemovals:!0}),m=await vu(a,(function(_){return Pn(ku(Le.fromString(`__bundle__/docs/${_}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(g=>f1(g,d,c).next((_=>(d.apply(g),_))).next((_=>a.li.removeMatchingKeysForTargetId(g,m.targetId).next((()=>a.li.addMatchingKeys(g,l,m.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(g,_.Bs,_.Ls))).next((()=>_.Bs))))))}async function r3(n,e,t=Ne()){const r=await vu(n,Pn(lE(e.bundledQuery))),a=he(n);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const c=Lt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Pi.saveNamedQuery(l,e);const d=r.withResumeToken(Ct.EMPTY_BYTE_STRING,c);return a.vs=a.vs.insert(d.targetId,d),a.li.updateTargetData(l,d).next((()=>a.li.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.li.addMatchingKeys(l,t,r.targetId))).next((()=>a.Pi.saveNamedQuery(l,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firestore_clients";function dA(n,e){return`${y1}_${n}_${e}`}const _1="firestore_mutations";function fA(n,e,t){let r=`${_1}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const v1="firestore_targets";function h_(n,e){return`${v1}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="SharedClientState";class Jm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ie(a.error.code,a.error.message))),c?new Jm(e,t,a.state,l):(Mt(fi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ah{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ie(r.error.code,r.error.message))),l?new Ah(e,r.state,a):(Mt(fi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=eE();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=FR(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Zm(e,l):(Mt(fi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class yE{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new yE(t.clientId,t.onlineState):(Mt(fi,`Failed to parse online state: ${e}`),null)}}class G_{constructor(){this.activeTargetIds=eE()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d_{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ct(Se),this.started=!1,this.Zs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=dA(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new G_),this.eo=new RegExp(`^${y1}_${c}_([^_]*)$`),this.no=new RegExp(`^${_1}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${v1}_${c}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(dA(this.persistenceKey,r));if(a){const l=Zm.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(h_(this.persistenceKey,e));if(a){const l=Ah.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(h_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(fi,"READ",e,t),t}setItem(e,t){se(fi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(fi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(se(fi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let c=qn.ce;if(l!=null)try{const d=JSON.parse(l);_e(typeof d=="number",30636,{yo:l}),c=d}catch(d){Mt(fi,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);r!==qn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Jm(this.currentUser,e,t,r),l=fA(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=fA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=h_(this.persistenceKey,e),l=new Ah(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Zm.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Jm.$s(new on(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return Ah.$s(a,t)}_o(e){return yE.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);se(fi,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),c=[],d=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||d.push(m)})),this.syncEngine.Co(c,d).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=eE();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class E1{constructor(){this.vo=new G_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new G_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="ConnectivityMonitor";class pA{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){se(mA,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){se(mA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om=null;function K_(){return om===null?om=(function(){return 268435456+Math.round(2147483648*Math.random())})():om++,"0x"+om.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="RestConnection",s3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class a3{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===qm?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=K_(),d=this.Qo(e,t.toUriEncodedString());se(f_,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:g}=new URL(d),_=Cu(g);return this.zo(e,d,m,r,_).then((v=>(se(f_,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw Ai(f_,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",r),v}))}jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=s3[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection",rh=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class tu extends a3{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!tu.c_){const e=CR();rh(e,xR.STAT_EVENT,(t=>{t.stat===A_.PROXY?se(En,"STAT_EVENT: detected buffering proxy"):t.stat===A_.NOPROXY&&se(En,"STAT_EVENT: detected no buffering proxy")})),tu.c_=!0}}zo(e,t,r,a,l){const c=K_();return new Promise(((d,m)=>{const g=new SR;g.setWithCredentials(!0),g.listenOnce(RR.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case pm.NO_ERROR:const v=g.getResponseJson();se(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case pm.TIMEOUT:se(En,`RPC '${e}' ${c} timed out`),m(new ie(Y.DEADLINE_EXCEEDED,"Request time out"));break;case pm.HTTP_ERROR:const b=g.getStatus();if(se(En,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const z=(function(ee){const te=ee.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(te)>=0?te:Y.UNKNOWN})(M.status);m(new ie(z,M.message))}else m(new ie(Y.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ie(Y.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{se(En,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);se(En,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)}))}T_(e,t,r){const a=K_(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=l.join("");se(En,`Creating RPC '${e}' stream ${a}: ${g}`,d);const _=c.createWebChannel(g,d);this.I_(_);let v=!1,b=!1;const R=new o3({Ho:M=>{b?se(En,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(v||(se(En,`Opening RPC '${e}' stream ${a} transport.`),_.open(),v=!0),se(En,`RPC '${e}' stream ${a} sending:`,M),_.send(M))},Jo:()=>_.close()});return rh(_,lh.EventType.OPEN,(()=>{b||(se(En,`RPC '${e}' stream ${a} transport opened.`),R.i_())})),rh(_,lh.EventType.CLOSE,(()=>{b||(b=!0,se(En,`RPC '${e}' stream ${a} transport closed`),R.o_(),this.E_(_))})),rh(_,lh.EventType.ERROR,(M=>{b||(b=!0,Ai(En,`RPC '${e}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),R.o_(new ie(Y.UNAVAILABLE,"The operation could not be completed")))})),rh(_,lh.EventType.MESSAGE,(M=>{var z;if(!b){const F=M.data[0];_e(!!F,16349);const ee=F,te=(ee==null?void 0:ee.error)||((z=ee[0])==null?void 0:z.error);if(te){se(En,`RPC '${e}' stream ${a} received error:`,te);const X=te.status;let ge=(function(x){const S=Qt[x];if(S!==void 0)return Px(S)})(X),fe=te.message;ge===void 0&&(ge=Y.INTERNAL,fe="Unknown error status: "+X+" with message "+te.message),b=!0,R.o_(new ie(ge,fe)),_.close()}else se(En,`RPC '${e}' stream ${a} received:`,F),R.__(F)}})),tu.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return NR()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(n){return new tu(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){return typeof window<"u"?window:null}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n){return new fL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tu.c_=!1;class _E{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="PersistentStream";class w1{constructor(e,t,r,a,l,c,d,m){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _E(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Mt(t.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new ie(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(gA,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(se(gA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class u3 extends w1{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=gL(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?Lt(c.readTime):Ee.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=z_(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Hm(m)?{documents:Fx(l,m)}:{query:qx(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Mx(l,c.resumeToken);const g=U_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=_u(l,c.snapshotVersion.toTimestamp());const g=U_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=_L(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=z_(this.serializer),t.removeTarget=e,this.K_(t)}}class c3 extends w1{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=yL(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=z_(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Kh(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{}class d3 extends h3{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,j_(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(Y.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,j_(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(Y.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function f3(n,e,t,r){return new d3(n,e,t,r)}class m3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mt(t),this.aa=!1):se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="RemoteStore";class p3{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{wa(this)&&(se(Po,"Restarting streams for network reachability change."),await(async function(m){const g=he(m);g.Ea.add(4),await Uu(g),g.Va.set("Unknown"),g.Ea.delete(4),await _d(g)})(this))}))})),this.Va=new m3(r,a)}}async function _d(n){if(wa(n))for(const e of n.Ra)await e(!0)}async function Uu(n){for(const e of n.Ra)await e(!1)}function Dp(n,e){const t=he(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),TE(t)?EE(t):zu(t).O_()&&vE(t,e))}function Tu(n,e){const t=he(n),r=zu(t);t.Ia.delete(e),r.O_()&&b1(t,e),t.Ia.size===0&&(r.O_()?r.L_():wa(t)&&t.Va.set("Unknown"))}function vE(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zu(n).Z_(e)}function b1(n,e){n.da.$e(e),zu(n).X_(e)}function EE(n){n.da=new uL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zu(n).start(),n.Va.ua()}function TE(n){return wa(n)&&!zu(n).x_()&&n.Ia.size>0}function wa(n){return he(n).Ea.size===0}function I1(n){n.da=void 0}async function g3(n){n.Va.set("Online")}async function y3(n){n.Ia.forEach(((e,t)=>{vE(n,e)}))}async function _3(n,e){I1(n),TE(n)?(n.Va.ha(e),EE(n)):n.Va.set("Unknown")}async function v3(n,e,t){if(n.Va.set("Online"),e instanceof kx&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(n,e)}catch(r){se(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ep(n,r)}else if(e instanceof bm?n.da.Xe(e):e instanceof Vx?n.da.st(e):n.da.tt(e),!t.isEqual(Ee.min()))try{const r=await d1(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Ct.EMPTY_BYTE_STRING,_.snapshotVersion)),b1(l,m);const v=new Xi(_.target,m,g,_.sequenceNumber);vE(l,v)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){se(Po,"Failed to raise snapshot:",r),await ep(n,r)}}async function ep(n,e,t){if(!Ea(e))throw e;n.Ea.add(1),await Uu(n),n.Va.set("Offline"),t||(t=()=>d1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{se(Po,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _d(n)}))}function A1(n,e){return e().catch((t=>ep(n,t,e)))}async function ju(n){const e=he(n),t=ma(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ra;for(;E3(e);)try{const a=await t3(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,T3(e,a)}catch(a){await ep(e,a)}S1(e)&&R1(e)}function E3(n){return wa(n)&&n.Ta.length<10}function T3(n,e){n.Ta.push(e);const t=ma(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function S1(n){return wa(n)&&!ma(n).x_()&&n.Ta.length>0}function R1(n){ma(n).start()}async function w3(n){ma(n).ra()}async function b3(n){const e=ma(n);for(const t of n.Ta)e.ea(t.mutations)}async function I3(n,e,t){const r=n.Ta.shift(),a=iE.from(r,e,t);await A1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await ju(n)}async function A3(n,e){e&&ma(n).Y_&&await(async function(r,a){if((function(c){return Dx(c)&&c!==Y.ABORTED})(a.code)){const l=r.Ta.shift();ma(r).B_(),await A1(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await ju(r)}})(n,e),S1(n)&&R1(n)}async function yA(n,e){const t=he(n);t.asyncQueue.verifyOperationInProgress(),se(Po,"RemoteStore received new credentials");const r=wa(t);t.Ea.add(3),await Uu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _d(t)}async function $_(n,e){const t=he(n);e?(t.Ea.delete(2),await _d(t)):e||(t.Ea.add(2),await Uu(t),t.Va.set("Unknown"))}function zu(n){return n.ma||(n.ma=(function(t,r,a){const l=he(t);return l.sa(),new u3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:g3.bind(null,n),Yo:y3.bind(null,n),t_:_3.bind(null,n),J_:v3.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),TE(n)?EE(n):n.Va.set("Unknown")):(await n.ma.stop(),I1(n))}))),n.ma}function ma(n){return n.fa||(n.fa=(function(t,r,a){const l=he(t);return l.sa(),new c3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:w3.bind(null,n),t_:A3.bind(null,n),ta:b3.bind(null,n),na:I3.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await ju(n)):(await n.fa.stop(),n.Ta.length>0&&(se(Po,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new wE(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bu(n,e){if(Mt("AsyncQueue",`${e}: ${n}`),Ea(n))return new ie(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{static emptySet(e){return new nu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=uh(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new nu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.ga=new ct(ce.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class wu{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new wu(e,t,nu.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class R3{constructor(){this.queries=vA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=he(t),l=a.queries;a.queries=vA(),l.forEach(((c,d)=>{for(const m of d.ba)m.onError(r)}))})(this,new ie(Y.ABORTED,"Firestore shutting down"))}}function vA(){return new cs((n=>yx(n)),dd)}async function bE(n,e){const t=he(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new S3,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Bu(c,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&AE(t)}async function IE(n,e){const t=he(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function x3(n,e){const t=he(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(r=!0);c.wa=a}}r&&AE(t)}function C3(n,e,t){const r=he(n),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function AE(n){n.Ca.forEach((e=>{e.next()}))}var Q_,EA;(EA=Q_||(Q_={})).Ma="default",EA.Cache="cache";class SE{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new wu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Q_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.serializer=e}Ks(e){return wi(this.serializer,e)}qs(e){return e.metadata.exists?Bx(this.serializer,e.document,!1):ft.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Lt(e)}}class D3{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=x1(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=Le.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new TA(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Ks(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||Ne()).add(l);t.set(c,d)}}return t}async ja(e){const t=await n3(e,new TA(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const a of this.Wa)await r3(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function x1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.key=e}}class N1{constructor(e){this.key=e}}class D1{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ne(),this.mutatedKeys=Ne(),this.eu=vx(e),this.tu=new nu(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new _A,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,v)=>{const b=a.get(_),R=fd(this.query,v)?v:null,M=!!b&&this.mutatedKeys.has(b.key),z=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let F=!1;b&&R?b.data.isEqual(R.data)?M!==z&&(r.track({type:3,doc:R}),F=!0):this.su(b,R)||(r.track({type:2,doc:R}),F=!0,(m&&this.eu(R,m)>0||g&&this.eu(R,g)<0)&&(d=!0)):!b&&R?(r.track({type:0,doc:R}),F=!0):b&&!R&&(r.track({type:1,doc:b}),F=!0,(m||g)&&(d=!0)),F&&(R?(c=c.add(R),l=z?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,v)=>(function(R,M){const z=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Vt:F})}};return z(R)-z(M)})(_.type,v.type)||this.eu(_.doc,v.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new wu(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _A,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ne(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new N1(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new C1(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ba="SyncEngine";class P3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class O3{constructor(e){this.key=e,this.hu=!1}}class V3{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new cs((d=>yx(d)),dd),this.Iu=new Map,this.Eu=new Set,this.Ru=new ct(ce.comparator),this.Au=new Map,this.Vu=new hE,this.du={},this.mu=new Map,this.fu=Do.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k3(n,e,t=!0){const r=Pp(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await P1(r,e,t,!0),a}async function M3(n,e){const t=Pp(n);await P1(t,e,!0,!1)}async function P1(n,e,t,r){const a=await vu(n.localStore,Pn(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await RE(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&Dp(n.remoteStore,a),d}async function RE(n,e,t,r,a){n.pu=(v,b,R)=>(async function(z,F,ee,te){let X=F.view.ru(ee);X.Ss&&(X=await Xm(z.localStore,F.query,!1).then((({documents:x})=>F.view.ru(x,X))));const ge=te&&te.targetChanges.get(F.targetId),fe=te&&te.targetMismatches.get(F.targetId)!=null,de=F.view.applyChanges(X,z.isPrimaryClient,ge,fe);return Y_(z,F.targetId,de.au),de.snapshot})(n,v,b,R);const l=await Xm(n.localStore,e,!0),c=new D1(e,l.ks),d=c.ru(l.documents),m=gd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);Y_(n,t,g.au);const _=new P3(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function L3(n,e,t){const r=he(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!dd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Eu(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Tu(r.remoteStore,a.targetId),bu(r,a.targetId)})).catch(va)):(bu(r,a.targetId),await Eu(r.localStore,a.targetId,!0))}async function U3(n,e){const t=he(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Tu(t.remoteStore,r.targetId))}async function j3(n,e,t){const r=DE(n);try{const a=await(function(c,d){const m=he(c),g=Xe.now(),_=d.reduce(((R,M)=>R.add(M.key)),Ne());let v,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let M=Gn(),z=Ne();return m.xs.getEntries(R,_).next((F=>{M=F,M.forEach(((ee,te)=>{te.isValidDocument()||(z=z.add(ee))}))})).next((()=>m.localDocuments.getOverlayedDocuments(R,M))).next((F=>{v=F;const ee=[];for(const te of d){const X=aL(te,v.get(te.key).overlayedDocument);X!=null&&ee.push(new hs(te.key,X,lx(X.value.mapValue),Tt.exists(!0)))}return m.mutationQueue.addMutationBatch(R,g,ee,d)})).next((F=>{b=F;const ee=F.applyToLocalDocumentSet(v,z);return m.documentOverlayCache.saveOverlays(R,F.batchId,ee)}))})).then((()=>({batchId:b.batchId,changes:Tx(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.du[c.currentUser.toKey()];g||(g=new ct(Se)),g=g.insert(d,m),c.du[c.currentUser.toKey()]=g})(r,a.batchId,t),await ds(r,a.changes),await ju(r.remoteStore)}catch(a){const l=Bu(a,"Failed to persist write");t.reject(l)}}async function O1(n,e){const t=he(n);try{const r=await e3(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(_e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_e(c.hu,14607):a.removedDocuments.size>0&&(_e(c.hu,42227),c.hu=!1))})),await ds(t,r,e)}catch(r){await va(r)}}function wA(n,e,t){const r=he(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=he(c);m.onlineState=d;let g=!1;m.queries.forEach(((_,v)=>{for(const b of v.ba)b.va(d)&&(g=!0)})),g&&AE(m)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z3(n,e,t){const r=he(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new ct(ce.comparator);c=c.insert(l,ft.newNoDocument(l,Ee.min()));const d=Ne().add(l),m=new pd(Ee.min(),new Map,new ct(Se),c,d);await O1(r,m),r.Ru=r.Ru.remove(l),r.Au.delete(e),NE(r)}else await Eu(r.localStore,e,!1).then((()=>bu(r,e,t))).catch(va)}async function B3(n,e){const t=he(n),r=e.batch.batchId;try{const a=await ZL(t.localStore,e);CE(t,r,null),xE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ds(t,a)}catch(a){await va(a)}}async function F3(n,e,t){const r=he(n);try{const a=await(function(c,d){const m=he(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next((v=>(_e(v!==null,37113),_=v.keys(),m.mutationQueue.removeMutationBatch(g,v)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);CE(r,e,t),xE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ds(r,a)}catch(a){await va(a)}}async function q3(n,e){const t=he(n);wa(t.remoteStore)||se(ba,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(c){const d=he(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(t.localStore);if(r===ra)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=Bu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function xE(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function CE(n,e,t){const r=he(n);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function bu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||V1(n,r)}))}function V1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Tu(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),NE(n))}function Y_(n,e,t){for(const r of t)r instanceof C1?(n.Vu.addReference(r.key,e),H3(n,r)):r instanceof N1?(se(ba,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||V1(n,r.key)):pe(19791,{wu:r})}function H3(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(se(ba,"New document in limbo: "+t),n.Eu.add(r),NE(n))}function NE(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ce(Le.fromString(e)),r=n.fu.next();n.Au.set(r,new O3(t)),n.Ru=n.Ru.insert(t,r),Dp(n.remoteStore,new Xi(Pn(ku(t.path)),r,"TargetPurposeLimboResolution",qn.ce))}}async function ds(n,e,t){const r=he(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{c.push(r.pu(m,e,t).then((g=>{var _;if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=pE.Es(m.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.J_(a),await(async function(m,g){const _=he(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>H.forEach(g,(b=>H.forEach(b.Ts,(R=>_.persistence.referenceDelegate.addReference(v,b.targetId,R))).next((()=>H.forEach(b.Is,(R=>_.persistence.referenceDelegate.removeReference(v,b.targetId,R)))))))))}catch(v){if(!Ea(v))throw v;se(gE,"Failed to update sequence numbers: "+v)}for(const v of g){const b=v.targetId;if(!v.fromCache){const R=_.vs.get(b),M=R.snapshotVersion,z=R.withLastLimboFreeSnapshotVersion(M);_.vs=_.vs.insert(b,z)}}})(r.localStore,l))}async function G3(n,e){const t=he(n);if(!t.currentUser.isEqual(e)){se(ba,"User change. New user:",e.toKey());const r=await h1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new ie(Y.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ds(t,r.Ns)}}function K3(n,e){const t=he(n),r=t.Au.get(e);if(r&&r.hu)return Ne().add(r.key);{let a=Ne();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function $3(n,e){const t=he(n),r=await Xm(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Y_(t,e.targetId,a.au),a}async function Q3(n,e){const t=he(n);return p1(t.localStore,e).then((r=>ds(t,r)))}async function Y3(n,e,t,r){const a=he(n),l=await(function(d,m){const g=he(d),_=he(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(v=>_.Xn(v,m).next((b=>b?g.localDocuments.getDocuments(v,b):H.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await ju(a.remoteStore):t==="acknowledged"||t==="rejected"?(CE(a,e,r||null),xE(a,e),(function(d,m){he(he(d).mutationQueue).nr(m)})(a.localStore,e)):pe(6720,"Unknown batchState",{bu:t}),await ds(a,l)):se(ba,"Cannot apply mutation batch with id: "+e)}async function W3(n,e){const t=he(n);if(Pp(t),DE(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await bA(t,r.toArray());t.gu=!0,await $_(t.remoteStore,!0);for(const l of a)Dp(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(bu(t,c),Eu(t.localStore,c,!0)))),Tu(t.remoteStore,c)})),await a,await bA(t,r),(function(c){const d=he(c);d.Au.forEach(((m,g)=>{Tu(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new ct(ce.comparator)})(t),t.gu=!1,await $_(t.remoteStore,!1)}}async function bA(n,e,t){const r=he(n),a=[],l=[];for(const c of e){let d;const m=r.Iu.get(c);if(m&&m.length!==0){d=await vu(r.localStore,Pn(m[0]));for(const g of m){const _=r.Tu.get(g),v=await $3(r,_);v.snapshot&&l.push(v.snapshot)}}else{const g=await m1(r.localStore,c);d=await vu(r.localStore,g),await RE(r,k1(g),c,!1,d.resumeToken)}a.push(d)}return r.Pu.J_(l),a}function k1(n){return gx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function X3(n){return(function(t){return he(he(t).persistence).hs()})(he(n).localStore)}async function J3(n,e,t,r){const a=he(n);if(a.gu)return void se(ba,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await p1(a.localStore,_x(l[0])),d=pd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ct.EMPTY_BYTE_STRING);await ds(a,c,d);break}case"rejected":await Eu(a.localStore,e,!0),bu(a,e,r);break;default:pe(64155,t)}}async function Z3(n,e,t){const r=Pp(n);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){se(ba,"Adding an already active target "+a);continue}const l=await m1(r.localStore,a),c=await vu(r.localStore,l);await RE(r,k1(l),c.targetId,!1,c.resumeToken),Dp(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await Eu(r.localStore,a,!1).then((()=>{Tu(r.remoteStore,a),bu(r,a)})).catch(va)}}function Pp(n){const e=he(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z3.bind(null,e),e.Pu.J_=x3.bind(null,e.eventManager),e.Pu.yu=C3.bind(null,e.eventManager),e}function DE(n){const e=he(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F3.bind(null,e),e}function e6(n,e,t){const r=he(n);(async function(l,c,d){try{const m=await c.getMetadata();if(await(function(R,M){const z=he(R),F=Lt(M.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",(ee=>z.Pi.getBundleMetadata(ee,M.id))).then((ee=>!!ee&&ee.createTime.compareTo(F)>=0))})(l.localStore,m))return await c.close(),d._completeWith((function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}})(m)),Promise.resolve(new Set);d._updateProgress(x1(m));const g=new D3(m,c.serializer);let _=await c.Su();for(;_;){const b=await g.Ga(_);b&&d._updateProgress(b),_=await c.Su()}const v=await g.ja(l.localStore);return await ds(l,v.Ja,void 0),await(function(R,M){const z=he(R);return z.persistence.runTransaction("Save bundle","readwrite",(F=>z.Pi.saveBundleMetadata(F,M)))})(l.localStore,m),d._completeWith(v.progress),Promise.resolve(v.Ha)}catch(m){return Ai(ba,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return c1(this.persistence,new u1,e.initialUser,this.serializer)}Cu(e){return new dE(Np.Vi,this.serializer)}Du(e){return new E1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class t6 extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_e(this.persistence.referenceDelegate instanceof Wm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new r1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new dE((r=>Wm.Vi(r,t)),this.serializer)}}class M1 extends $h{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await DE(this.xu.syncEngine),await ju(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return c1(this.persistence,new u1,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new r1(r,e.asyncQueue,t)}Mu(e,t){const r=new i4(t,this.persistence);return new r4(e.asyncQueue,r)}Cu(e){const t=mE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new fE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,T1(),Am(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new E1}}class n6 extends M1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof d_&&(this.sharedClientState.syncEngine={So:Y3.bind(null,t),Do:J3.bind(null,t),Co:Z3.bind(null,t),hs:X3.bind(null,t),bo:Q3.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await W3(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=T1();if(!d_.v(t))throw new ie(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new d_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G3.bind(null,this.syncEngine),await $_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new R3})()}createDatastore(e){const t=yd(e.databaseInfo.databaseId),r=l3(e.databaseInfo);return f3(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new p3(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>wA(this.syncEngine,t,0)),(function(){return pA.v()?new pA:new i3})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,_){const v=new V3(a,l,c,d,m,g);return _&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=he(a);se(Po,"RemoteStore shutting down."),l.Ea.add(5),await Uu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Qh.provider={build:()=>new Qh};function IA(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new yn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Uu(r);return new N3(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i6=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const c=he(a),d={documents:l.map((v=>Gh(c.serializer,v)))},m=await c.jo("BatchGetDocuments",c.serializer.databaseId,Le.emptyPath(),d,l.length),g=new Map;m.forEach((v=>{const b=pL(c.serializer,v);g.set(b.key.toString(),b)}));const _=[];return l.forEach((v=>{const b=g.get(v.toString());_e(!!b,55234,{key:v}),_.push(b)})),_})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=ce.fromPath(r);this.mutations.push(new nE(a,this.precondition(a)))})),await(async function(r,a){const l=he(r),c={writes:a.map((d=>Kh(l.serializer,d)))};await l.Wo("Commit",l.serializer.databaseId,Le.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pe(50498,{Gu:e.constructor.name});t=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ie(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?Tt.exists(!1):Tt.updateTime(t):Tt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new ie(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tt.updateTime(t)}return Tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.zu=r.maxAttempts,this.M_=new _E(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new i6(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Zu(a)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!ud(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Dx(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class a6{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=Fv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{se(pa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(se(pa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Bu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function m_(n,e){n.asyncQueue.verifyOperationInProgress(),se(pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await h1(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function AA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PE(n);se(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>yA(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>yA(e.remoteStore,a))),n._onlineComponents=e}async function PE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(pa,"Using user provided OfflineComponentProvider");try{await m_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ai("Error using user provided cache. Falling back to memory cache: "+t),await m_(n,new $h)}}else se(pa,"Using default OfflineComponentProvider"),await m_(n,new t6(void 0));return n._offlineComponents}async function Vp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(pa,"Using user provided OnlineComponentProvider"),await AA(n,n._uninitializedComponentsProvider._online)):(se(pa,"Using default OnlineComponentProvider"),await AA(n,new Qh))),n._onlineComponents}function L1(n){return PE(n).then((e=>e.persistence))}function OE(n){return PE(n).then((e=>e.localStore))}function U1(n){return Vp(n).then((e=>e.remoteStore))}function VE(n){return Vp(n).then((e=>e.syncEngine))}function o6(n){return Vp(n).then((e=>e.datastore))}async function Iu(n){const e=await Vp(n),t=e.eventManager;return t.onListen=k3.bind(null,e.syncEngine),t.onUnlisten=L3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=M3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=U3.bind(null,e.syncEngine),t}function l6(n){return n.asyncQueue.enqueue((async()=>{const e=await L1(n),t=await U1(n);return e.setNetworkEnabled(!0),(function(a){const l=he(a);return l.Ea.delete(0),_d(l)})(t)}))}function u6(n){return n.asyncQueue.enqueue((async()=>{const e=await L1(n),t=await U1(n);return e.setNetworkEnabled(!1),(async function(a){const l=he(a);l.Ea.add(0),await Uu(l),l.Va.set("Offline")})(t)}))}function c6(n,e,t,r){const a=new Op(r),l=new SE(e,a,t);return n.asyncQueue.enqueueAndForget((async()=>bE(await Iu(n),l))),()=>{a.Nu(),n.asyncQueue.enqueueAndForget((async()=>IE(await Iu(n),l)))}}function h6(n,e){const t=new yn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await(function(g,_){const v=he(g);return v.persistence.runTransaction("read document","readonly",(b=>v.localDocuments.getDocument(b,_)))})(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ie(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=Bu(d,`Failed to get document '${l} from cache`);c.reject(m)}})(await OE(n),e,t))),t.promise}function j1(n,e,t={}){const r=new yn;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new Op({next:b=>{_.Nu(),c.enqueueAndForget((()=>IE(l,v)));const R=b.docs.has(d);!R&&b.fromCache?g.reject(new ie(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&m&&m.source==="server"?g.reject(new ie(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new SE(ku(d.path),_,{includeMetadataChanges:!0,Ka:!0});return bE(l,v)})(await Iu(n),n.asyncQueue,e,t,r))),r.promise}function d6(n,e){const t=new yn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await Xm(a,l,!0),m=new D1(l,d.ks),g=m.ru(d.documents),_=m.applyChanges(g,!1);c.resolve(_.snapshot)}catch(d){const m=Bu(d,`Failed to execute query '${l} against cache`);c.reject(m)}})(await OE(n),e,t))),t.promise}function z1(n,e,t={}){const r=new yn;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new Op({next:b=>{_.Nu(),c.enqueueAndForget((()=>IE(l,v))),b.fromCache&&m.source==="server"?g.reject(new ie(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new SE(d,_,{includeMetadataChanges:!0,Ka:!0});return bE(l,v)})(await Iu(n),n.asyncQueue,e,t,r))),r.promise}function f6(n,e){const t=new yn;return n.asyncQueue.enqueueAndForget((async()=>j3(await VE(n),e,t))),t.promise}function m6(n,e){const t=new Op(e);return n.asyncQueue.enqueueAndForget((async()=>(function(a,l){he(a).Ca.add(l),l.next()})(await Iu(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(a,l){he(a).Ca.delete(l)})(await Iu(n),t)))}}function p6(n,e,t){const r=new yn;return n.asyncQueue.enqueueAndForget((async()=>{const a=await o6(n);new s6(n.asyncQueue,a,t,e,r).ju()})),r.promise}function g6(n,e,t,r){const a=(function(c,d){let m;return m=typeof c=="string"?Ox().encode(c):c,(function(_,v){return new r6(_,v)})((function(_,v){if(_ instanceof Uint8Array)return IA(_,v);if(_ instanceof ArrayBuffer)return IA(new Uint8Array(_),v);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),d)})(t,yd(e));n.asyncQueue.enqueueAndForget((async()=>{e6(await VE(n),a,r)}))}function y6(n,e){return n.asyncQueue.enqueue((async()=>(function(r,a){const l=he(r);return l.persistence.runTransaction("Get named query","readonly",(c=>l.Pi.getNamedQuery(c,a)))})(await OE(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="ComponentProvider",SA=new Map;function v6(n,e,t,r,a){return new O4(n,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,B1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firestore.googleapis.com",RA=!0;class xA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F1,this.ssl=RA}else this.host=e.host,this.ssl=e.ssl??RA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VL)throw new ie(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new GM;switch(r.type){case"firstParty":return new YM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=SA.get(t);r&&(se(_6,"Removing Datastore"),SA.delete(t),r.terminate())})(this),Promise.resolve()}}function q1(n,e,t,r={}){var g;n=$e(n,vd);const a=Cu(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(cS(`https://${d}`),hS("Firestore",!0)),l.host!==F1&&l.host!==d&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:r};if(!sa(m,c)&&(n._setSettings(m),r.mockUserToken)){let _,v;if(typeof r.mockUserToken=="string")_=r.mockUserToken,v=on.MOCK_USER;else{_=oP(r.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new ie(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new on(b)}n._authCredentials=new KM(new PR(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On=class H1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new H1(this.firestore,e,this._query)}},ut=class dh{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dh(this.firestore,e,this._key)}toJSON(){return{type:dh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ld(t,dh._jsonSchema))return new dh(e,r||null,new ce(Le.fromString(t.referencePath)))}};ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:Wt("string",ut._jsonSchemaVersion),referencePath:Wt("string")};let ia=class G1 extends On{constructor(e,t,r){super(e,t,ku(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new ce(e))}withConverter(e){return new G1(this.firestore,e,this._path)}};function Fu(n,e,...t){if(n=be(n),qv("collection","path",e),n instanceof vd){const r=Le.fromString(e,...t);return gI(r),new ia(n,null,r)}{if(!(n instanceof ut||n instanceof ia))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Le.fromString(e,...t));return gI(r),new ia(n.firestore,null,r)}}function E6(n,e){if(n=$e(n,vd),qv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new On(n,null,(function(r){return new us(Le.emptyPath(),r)})(e))}function Oo(n,e,...t){if(n=be(n),arguments.length===1&&(e=Fv.newId()),qv("doc","path",e),n instanceof vd){const r=Le.fromString(e,...t);return pI(r),new ut(n,null,new ce(r))}{if(!(n instanceof ut||n instanceof ia))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Le.fromString(e,...t));return pI(r),new ut(n.firestore,n instanceof ia?n.converter:null,new ce(r))}}function K1(n,e){return n=be(n),e=be(e),(n instanceof ut||n instanceof ia)&&(e instanceof ut||e instanceof ia)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $1(n,e){return n=be(n),e=be(e),n instanceof On&&e instanceof On&&n.firestore===e.firestore&&dd(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="AsyncQueue";class NA{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _E(this,"async_queue_retry"),this._c=()=>{const r=Am();r&&se(CA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ea(e))throw e;se(CA,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Mt("INTERNAL UNHANDLED ERROR: ",DA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=wE.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&pe(47125,{Pc:DA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function DA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this._progressObserver={},this._taskCompletionResolver=new yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=-1;let Ut=class extends vd{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new NA,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NA(e),this._firestoreClient=void 0,await e}}};function b6(n,e){const t=typeof n=="object"?n:AS(),r=typeof n=="string"?n:qm,a=vv(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=iP("firestore");l&&q1(a,...l)}return a}function In(n){if(n._terminated)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Q1(n),n._firestoreClient}function Q1(n){var r,a,l,c;const e=n._freezeSettings(),t=v6(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(a=n._app)==null?void 0:a.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new a6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(n._componentsProvider))}function I6(n,e){Ai("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Y1(n,Qh.provider,{build:r=>new M1(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function A6(n){Ai("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Y1(n,Qh.provider,{build:t=>new n6(t,e.cacheSizeBytes)})}function Y1(n,e,t){if((n=$e(n,Ut))._firestoreClient||n._terminated)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ie(Y.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Q1(n)}function S6(n){if(n._initialized&&!n._terminated)throw new ie(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Ti.v())return Promise.resolve();const a=r+l1;await Ti.delete(a)})(mE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function R6(n){return(function(t){const r=new yn;return t.asyncQueue.enqueueAndForget((async()=>q3(await VE(t),r))),r.promise})(In(n=$e(n,Ut)))}function x6(n){return l6(In(n=$e(n,Ut)))}function C6(n){return u6(In(n=$e(n,Ut)))}function N6(n,e){const t=In(n=$e(n,Ut)),r=new T6;return g6(t,n._databaseId,e,r),r}function D6(n,e){return y6(In(n=$e(n,Ut)),e).then((t=>t?new On(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(Ct.fromBase64String(e))}catch(t){throw new ie(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ld(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:Wt("string",wn._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(ld(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Wt("string",zr._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ld(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Br(e.vectorValues);throw new ie(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:Wt("string",Br._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=/^__.*__$/;class O6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mu(e,this.data,t,this.fieldTransforms)}}class W1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function X1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{dataSource:n})}}class kp{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new kp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return tp(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(X1(this.dataSource)&&P6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class V6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yd(e)}createContext(e,t,r,a=!1){return new kp({dataSource:e,methodName:t,targetDoc:r,path:Et.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qo(n){const e=n._freezeSettings(),t=yd(n._databaseId);return new V6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mp(n,e,t,r,a,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,a);BE("Data must be an object, but it was:",c,r);const d=eC(r,c);let m,g;if(l.merge)m=new Hn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const v of l.mergeFields){const b=ko(e,v,t);if(!c.contains(b))throw new ie(Y.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);rC(_,b)||_.push(b)}m=new Hn(_),g=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,g=c.fieldTransforms;return new O6(new gn(d),m,g)}class Ed extends Fo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ed}}function J1(n,e,t){return new kp({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kE extends Fo{_toFieldTransform(e){return new md(e.path,new gu)}isEqual(e){return e instanceof kE}}class ME extends Fo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=J1(this,e,!0),r=this.Ac.map((l=>Ho(l,t))),a=new Ro(r);return new md(e.path,a)}isEqual(e){return e instanceof ME&&sa(this.Ac,e.Ac)}}class LE extends Fo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=J1(this,e,!0),r=this.Ac.map((l=>Ho(l,t))),a=new xo(r);return new md(e.path,a)}isEqual(e){return e instanceof LE&&sa(this.Ac,e.Ac)}}class UE extends Fo{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new yu(e.serializer,Ix(e.serializer,this.Vc));return new md(e.path,t)}isEqual(e){return e instanceof UE&&this.Vc===e.Vc}}function jE(n,e,t,r){const a=n.createContext(1,e,t);BE("Data must be an object, but it was:",a,r);const l=[],c=gn.empty();Ta(r,((m,g)=>{const _=nC(e,m,t);g=be(g);const v=a.childContextForFieldPath(_);if(g instanceof Ed)l.push(_);else{const b=Ho(g,v);b!=null&&(l.push(_),c.set(_,b))}}));const d=new Hn(l);return new W1(c,d,a.fieldTransforms)}function zE(n,e,t,r,a,l){const c=n.createContext(1,e,t),d=[ko(e,r,t)],m=[a];if(l.length%2!=0)throw new ie(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(ko(e,l[b])),m.push(l[b+1]);const g=[],_=gn.empty();for(let b=d.length-1;b>=0;--b)if(!rC(g,d[b])){const R=d[b];let M=m[b];M=be(M);const z=c.childContextForFieldPath(R);if(M instanceof Ed)g.push(R);else{const F=Ho(M,z);F!=null&&(g.push(R),_.set(R,F))}}const v=new Hn(g);return new W1(_,v,c.fieldTransforms)}function Z1(n,e,t,r=!1){return Ho(t,n.createContext(r?4:3,e))}function Ho(n,e){if(tC(n=be(n)))return BE("Unsupported field value:",e,n),eC(n,e);if(n instanceof Fo)return(function(r,a){if(!X1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let m=Ho(d,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ix(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Xe.fromDate(r);return{timestampValue:_u(a.serializer,l)}}if(r instanceof Xe){const l=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_u(a.serializer,l)}}if(r instanceof zr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wn)return{bytesValue:Mx(a.serializer,r._byteString)};if(r instanceof ut){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:oE(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Br)return(function(c,d){const m=c instanceof Br?c.toArray():c;return{mapValue:{fields:{[Wv]:{stringValue:Xv},[fu]:{arrayValue:{values:m.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return tE(d.serializer,_)}))}}}}}})(r,a);if(Qx(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${_p(r)}`)})(n,e)}function eC(n,e){const t={};return ZR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(n,((r,a)=>{const l=Ho(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function tC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof zr||n instanceof wn||n instanceof ut||n instanceof Fo||n instanceof Br||Qx(n))}function BE(n,e,t){if(!tC(t)||!kR(t)){const r=_p(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function ko(n,e,t){if((e=be(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return nC(n,e);throw tp("Field path arguments must be of type string or ",n,!1,void 0,t)}const k6=new RegExp("[~\\*/\\[\\]]");function nC(n,e,t){if(e.search(k6)>=0)throw tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vo(...e.split("."))._internalPath}catch{throw tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tp(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ie(Y.INVALID_ARGUMENT,d+n+m)}function rC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{convertValue(e,t="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ta(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[fu].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>yt(c.doubleValue)));return new Br(t)}convertGeoPoint(e){return new zr(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ip(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bh(e));default:return null}}convertTimestamp(e){const t=is(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Le.fromString(e);_e($x(r),9688,{name:e});const a=new ca(r.get(1),r.get(3)),l=new ce(r.popFirst(5));return a.isEqual(t)||Mt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends FE{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(){return new Ed("deleteField")}function L6(){return new kE("serverTimestamp")}function U6(...n){return new ME("arrayUnion",n)}function j6(...n){return new LE("arrayRemove",n)}function z6(n){return new UE("increment",n)}const PA="@firebase/firestore",OA="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(ko("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class B6 extends Yh{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ie(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qE{}class Td extends qE{}function Bn(n,e,...t){let r=[];e instanceof qE&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof HE)).length,d=l.filter((m=>m instanceof Lp)).length;if(c>1||c>0&&d>0)throw new ie(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Lp extends Td{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Lp(e,t,r)}_apply(e){const t=this._parse(e);return aC(e._query,t),new On(e.firestore,e.converter,L_(e._query,t))}_parse(e){const t=qo(e.firestore);return(function(l,c,d,m,g,_,v){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){kA(v,_);const M=[];for(const z of v)M.push(VA(m,l,z));b={arrayValue:{values:M}}}else b=VA(m,l,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||kA(v,_),b=Z1(d,c,v,_==="in"||_==="not-in");return ze.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Er(n,e,t){const r=e,a=ko("where",n);return Lp._create(a,r,t)}class HE extends qE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new HE(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:nt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)aC(c,m),c=L_(c,m)})(e._query,t),new On(e.firestore,e.converter,L_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class GE extends Td{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GE(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hh(l,c)})(e._query,this._field,this._direction);return new On(e.firestore,e.converter,$4(e._query,t))}}function F6(n,e="asc"){const t=e,r=ko("orderBy",n);return GE._create(r,t)}class Up extends Td{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Up(e,t,r)}_apply(e){return new On(e.firestore,e.converter,Km(e._query,this._limit,this._limitType))}}function q6(n){return MR("limit",n),Up._create("limit",n,"F")}function H6(n){return MR("limitToLast",n),Up._create("limitToLast",n,"L")}class jp extends Td{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jp(e,t,r)}_apply(e){const t=sC(e,this.type,this._docOrFields,this._inclusive);return new On(e.firestore,e.converter,Q4(e._query,t))}}function G6(...n){return jp._create("startAt",n,!0)}function K6(...n){return jp._create("startAfter",n,!1)}class zp extends Td{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new zp(e,t,r)}_apply(e){const t=sC(e,this.type,this._docOrFields,this._inclusive);return new On(e.firestore,e.converter,Y4(e._query,t))}}function $6(...n){return zp._create("endBefore",n,!1)}function Q6(...n){return zp._create("endAt",n,!0)}function sC(n,e,t,r){if(t[0]=be(t[0]),t[0]instanceof Yh)return(function(l,c,d,m,g){if(!m)throw new ie(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const v of eu(l))if(v.field.isKeyField())_.push(Ao(c,m.key));else{const b=m.data.field(v.field);if(bp(b))throw new ie(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const R=v.field.canonicalString();throw new ie(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(b)}return new fa(_,g)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=qo(n.firestore);return(function(c,d,m,g,_,v){const b=c.explicitOrderBy;if(_.length>b.length)throw new ie(Y.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let M=0;M<_.length;M++){const z=_[M];if(b[M].field.isKeyField()){if(typeof z!="string")throw new ie(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof z}`);if(!Zv(c)&&z.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${z}' contains a slash.`);const F=c.path.child(Le.fromString(z));if(!ce.isDocumentKey(F))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);const ee=new ce(F);R.push(Ao(d,ee))}else{const F=Z1(m,g,z);R.push(F)}}return new fa(R,v)})(n._query,n.firestore._databaseId,a,e,t,r)}}function VA(n,e,t){if(typeof(t=be(t))=="string"){if(t==="")throw new ie(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&t.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Le.fromString(t));if(!ce.isDocumentKey(r))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ao(n,new ce(r))}if(t instanceof ut)return Ao(n,t._key);throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(t)}.`)}function kA(n,e){if(!Array.isArray(n)||n.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aC(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Bp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Y6 extends FE{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}class yo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let wr=class oC extends Yh{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ko("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oC._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",wr._jsonSchema={type:Wt("string",wr._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};let Sh=class extends wr{data(e={}){return super.data(e)}},Fr=class lC{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new yo(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Sh(this._firestore,this._userDataWriter,r.key,r,new yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new Sh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new yo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Sh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new yo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:W6(d.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lC._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function W6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}function uC(n,e){return n instanceof wr&&e instanceof wr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fr&&e instanceof Fr&&n._firestore===e._firestore&&$1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr._jsonSchemaVersion="firestore/querySnapshot/1.0",Fr._jsonSchema={type:Wt("string",Fr._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};const X6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J6=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qo(e)}set(e,t,r){this._verifyNotCommitted();const a=Js(e,this._firestore),l=Bp(a.converter,t,r),c=Mp(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Tt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Js(e,this._firestore);let c;return c=typeof(t=be(t))=="string"||t instanceof Vo?zE(this._dataReader,"WriteBatch.update",l._key,t,r,a):jE(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Tt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Js(e,this._firestore);return this._mutations=this._mutations.concat(new Lu(t._key,Tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Js(n,e){if((n=be(n)).firestore!==e)throw new ie(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qo(e)}get(e){const t=Js(e,this._firestore),r=new Y6(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return pe(24041);const l=a[0];if(l.isFoundDocument())return new Yh(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Yh(this._firestore,r,t._key,null,t.converter);throw pe(18433,{doc:l})}))}set(e,t,r){const a=Js(e,this._firestore),l=Bp(a.converter,t,r),c=Mp(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(e,t,r,...a){const l=Js(e,this._firestore);let c;return c=typeof(t=be(t))=="string"||t instanceof Vo?zE(this._dataReader,"Transaction.update",l._key,t,r,a):jE(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Js(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eU=class extends Z6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Js(e,this._firestore),r=new Go(this._firestore);return super.get(e).then((a=>new wr(this._firestore,r,t._key,a._document,new yo(!1,!1),t.converter)))}};function KE(n,e,t){n=$e(n,Ut);const r={...X6,...t};(function(c){if(c.maxAttempts<1)throw new ie(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const a=In(n);return p6(a,(l=>e(new eU(n,l))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(n){n=$e(n,ut);const e=$e(n.firestore,Ut),t=In(e);return j1(t,n._key).then((r=>QE(e,n,r)))}function tU(n){n=$e(n,ut);const e=$e(n.firestore,Ut),t=In(e),r=new Go(e);return h6(t,n._key).then((a=>new wr(e,r,n._key,a,new yo(a!==null&&a.hasLocalMutations,!0),n.converter)))}function nU(n){n=$e(n,ut);const e=$e(n.firestore,Ut),t=In(e);return j1(t,n._key,{source:"server"}).then((r=>QE(e,n,r)))}function ga(n){n=$e(n,On);const e=$e(n.firestore,Ut),t=In(e),r=new Go(e);return iC(n._query),z1(t,n._query).then((a=>new Fr(e,r,n,a)))}function rU(n){n=$e(n,On);const e=$e(n.firestore,Ut),t=In(e),r=new Go(e);return d6(t,n._query).then((a=>new Fr(e,r,n,a)))}function iU(n){n=$e(n,On);const e=$e(n.firestore,Ut),t=In(e),r=new Go(e);return z1(t,n._query,{source:"server"}).then((a=>new Fr(e,r,n,a)))}function X_(n,e,t){n=$e(n,ut);const r=$e(n.firestore,Ut),a=Bp(n.converter,e,t),l=qo(r);return wd(r,[Mp(l,"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Tt.none())])}function Mo(n,e,t,...r){n=$e(n,ut);const a=$e(n.firestore,Ut),l=qo(a);let c;return c=typeof(e=be(e))=="string"||e instanceof Vo?zE(l,"updateDoc",n._key,e,t,r):jE(l,"updateDoc",n._key,e),wd(a,[c.toMutation(n._key,Tt.exists(!0))])}function sU(n){return wd($e(n.firestore,Ut),[new Lu(n._key,Tt.none())])}function hC(n,e){const t=$e(n.firestore,Ut),r=Oo(n),a=Bp(n.converter,e),l=qo(n.firestore);return wd(t,[Mp(l,"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Tt.exists(!1))]).then((()=>r))}function $E(n,...e){var g,_,v;n=be(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||W_(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(W_(e[r])){const b=e[r];e[r]=(g=b.next)==null?void 0:g.bind(b),e[r+1]=(_=b.error)==null?void 0:_.bind(b),e[r+2]=(v=b.complete)==null?void 0:v.bind(b)}let l,c,d;if(n instanceof ut)c=$e(n.firestore,Ut),d=ku(n._key.path),l={next:b=>{e[r]&&e[r](QE(c,n,b))},error:e[r+1],complete:e[r+2]};else{const b=$e(n,On);c=$e(b.firestore,Ut),d=b._query;const R=new Go(c);l={next:M=>{e[r]&&e[r](new Fr(c,R,b,M))},error:e[r+1],complete:e[r+2]},iC(n._query)}const m=In(c);return c6(m,d,a,l)}function aU(n,e){n=$e(n,Ut);const t=In(n),r=W_(e)?e:{next:e};return m6(t,r)}function wd(n,e){const t=In(n);return f6(t,e)}function QE(n,e,t){const r=t.docs.get(e._key),a=new Go(n);return new wr(n,a,e._key,r,new yo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){FM(ya),la(new bi("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Ut(new $M(r.getProvider("auth-internal")),new WM(c,r.getProvider("app-check-internal")),V4(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),jr(PA,OA,e),jr(PA,OA,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,t){this._delegate=e,this.firebase=t,Nh(e,new bi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wv(this._delegate)))}_getService(e,t=aa){var a;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((a=r.getComponent())==null?void 0:a.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=aa){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Nh(this._delegate,e)}_addOrOverwriteComponent(e){wS(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},MA=new zo("app-compat","Firebase",lU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(n){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:jr,setLogLevel:RS,onLog:SS,apps:null,SDK_VERSION:ya,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:DO}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(g){delete e[g]}function a(g){if(g=g||aa,!Ub(e,g))throw MA.create("no-app",{appName:g});return e[g]}a.App=n;function l(g,_={}){const v=Tv(g,_);if(Ub(e,v.name))return e[v.name];const b=new n(v,t);return e[v.name]=b,b}function c(){return Object.keys(e).map(g=>e[g])}function d(g){const _=g.name,v=_.replace("-compat","");if(la(g)&&g.type==="PUBLIC"){const b=(R=a())=>{if(typeof R[v]!="function")throw MA.create("invalid-app-argument",{appName:_});return R[v]()};g.serviceProps!==void 0&&Dm(b,g.serviceProps),t[v]=b,n.prototype[v]=function(...R){return this._getService.bind(this,_).apply(this,g.multipleInstances?R:[])}}return g.type==="PUBLIC"?t[v]:null}function m(g,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){const n=uU(oU);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:dC,extendNamespace:e,createSubscribe:yS,ErrorFactory:zo,deepExtend:Dm};function e(t){Dm(n,t)}return n}const cU=dC();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=new op("@firebase/app-compat"),hU="@firebase/app-compat",dU="0.5.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n){jr(hU,dU,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=mv();if(n.firebase!==void 0){LA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&LA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ia=cU;fU();var mU="firebase",pU="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ia.registerVersion(mU,pU,"app-compat");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=2e3;async function yU(n,e,t){const{BuildInfo:r}=Lo();qr(e.sessionId,"AuthEvent did not contain a session ID");const a=await wU(e.sessionId),l={};return rd()?l.ibi=r.packageName:nd()?l.apn=r.packageName:_n(n,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,I_(n,t,e.type,void 0,e.eventId??void 0,l)}async function _U(n){const{BuildInfo:e}=Lo(),t={};rd()?t.iosBundleId=e.packageName:nd()?t.androidPackageName=e.packageName:_n(n,"operation-not-supported-in-this-environment"),await bR(n,t)}function vU(n){const{cordova:e}=Lo();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,ZO()?"_blank":"_system","location=yes"),t(a)})})}async function EU(n,e,t){const{cordova:r}=Lo();let a=()=>{};try{await new Promise((l,c)=>{let d=null;function m(){var b;l();const v=(b=r.plugins.browsertab)==null?void 0:b.close;typeof v=="function"&&v(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function g(){d||(d=window.setTimeout(()=>{c(en(n,"redirect-cancelled-by-user"))},gU))}function _(){(document==null?void 0:document.visibilityState)==="visible"&&g()}e.addPassiveListener(m),document.addEventListener("resume",g,!1),nd()&&document.addEventListener("visibilitychange",_,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",_,!1),d&&window.clearTimeout(d)}})}finally{a()}}function TU(n){var t,r,a,l,c,d,m,g,_,v;const e=Lo();ae(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae(typeof((c=(l=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:l.browsertab)==null?void 0:c.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae(typeof((g=(m=(d=e==null?void 0:e.cordova)==null?void 0:d.plugins)==null?void 0:m.browsertab)==null?void 0:g.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae(typeof((v=(_=e==null?void 0:e.cordova)==null?void 0:_.InAppBrowser)==null?void 0:v.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function wU(n){const e=bU(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function bU(n){if(qr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=20;class AU extends TR{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function SU(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:CU(),postBody:null,tenantId:n.tenantId,error:en(n,"no-auth-event")}}function RU(n,e){return J_()._set(Z_(n),e)}async function UA(n){const e=await J_()._get(Z_(n));return e&&await J_()._remove(Z_(n)),e}function xU(n,e){var r,a;const t=DU(e);if(t.includes("/__/auth/callback")){const l=Sm(t),c=l.firebaseError?NU(decodeURIComponent(l.firebaseError)):null,d=(a=(r=c==null?void 0:c.code)==null?void 0:r.split("auth/"))==null?void 0:a[1],m=d?en(d):null;return m?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function CU(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<IU;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function J_(){return rr(Vv)}function Z_(n){return vo("authEvent",n.config.apiKey,n.name)}function NU(n){try{return JSON.parse(n)}catch{return null}}function DU(n){const e=Sm(n),t=e.link?decodeURIComponent(e.link):void 0,r=Sm(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Sm(a).link||a||r||t||n}function Sm(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Yl(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=500;class OU{constructor(){this._redirectPersistence=bo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yp,this._overrideRedirectResult=jv}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new AU(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){_n(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){TU(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),Zk(),await this._originValidation(e);const c=SU(e,r,a);await RU(e,c);const d=await yU(e,c,t),m=await vU(d);return EU(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_U(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=Lo(),c=setTimeout(async()=>{await UA(e),t.onEvent(jA())},PU),d=async _=>{clearTimeout(c);const v=await UA(e);let b=null;v&&(_!=null&&_.url)&&(b=xU(v,_.url)),t.onEvent(b||jA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,d);const m=a,g=`${l.packageName.toLowerCase()}://`;Lo().handleOpenURL=async _=>{if(_.toLowerCase().startsWith(g)&&d({url:_}),typeof m=="function")try{m(_)}catch(v){console.error(v)}}}}const VU=OU;function jA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(n,e){At(n)._logFramework(e)}var MU="@firebase/auth-compat",LU="0.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=1e3;function Rh(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function jU(){return Rh()==="http:"||Rh()==="https:"}function fC(n=It()){return!!((Rh()==="file:"||Rh()==="ionic:"||Rh()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function zU(){return gv()||ap()}function BU(){return mS()&&(document==null?void 0:document.documentMode)===11}function FU(n=It()){return/Edge\/\d+/.test(n)}function qU(n=It()){return BU()||FU(n)}function mC(){try{const n=self.localStorage,e=ad();if(n)return n.setItem(e,"1"),n.removeItem(e),qU()?Ch():!0}catch{return YE()&&Ch()}return!1}function YE(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function p_(){return(jU()||fS()||fC())&&!zU()&&mC()&&!YE()}function pC(){return fC()&&typeof document<"u"}async function HU(){return pC()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},UU);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function GU(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr={LOCAL:"local",NONE:"none",SESSION:"session"},ih=ae,gC="persistence";function KU(n,e){if(ih(Object.values(nr).includes(e),n,"invalid-persistence-type"),gv()){ih(e!==nr.SESSION,n,"unsupported-persistence-type");return}if(ap()){ih(e===nr.NONE,n,"unsupported-persistence-type");return}if(YE()){ih(e===nr.NONE||e===nr.LOCAL&&Ch(),n,"unsupported-persistence-type");return}ih(e===nr.NONE||mC(),n,"unsupported-persistence-type")}async function ev(n){await n._initializationPromise;const e=yC(),t=vo(gC,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function $U(n,e){const t=yC();if(!t)return[];const r=vo(gC,n,e);switch(t.getItem(r)){case nr.NONE:return[su];case nr.LOCAL:return[kh,bo];case nr.SESSION:return[bo];default:return[]}}function yC(){var n;try{return((n=GU())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=ae;class Zs{constructor(){this.browserResolver=rr(kM),this.cordovaResolver=rr(VU),this.underlyingResolver=null,this._redirectPersistence=bo,this._completeRedirectFn=yp,this._overrideRedirectResult=jv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return pC()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return QU(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await HU();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n){return n.unwrap()}function YU(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n){return vC(n)}function XU(n,e){var r;const t=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new JU(n,pk(n,e))}else if(t){const a=vC(e),l=e;a&&(l.credential=a,l.tenantId=t.tenantId||void 0,l.email=t.email||void 0,l.phoneNumber=t.phoneNumber||void 0)}}function vC(n){const{_tokenResponse:e}=n instanceof Dn?n.customData:n;if(!e)return null;if(!(n instanceof Dn)&&"temporaryProof"in e&&"phoneNumber"in e)return Io.credentialFromResult(n);const t=e.providerId;if(!t||t===Wc.PASSWORD)return null;let r;switch(t){case Wc.GOOGLE:r=pi;break;case Wc.FACEBOOK:r=mi;break;case Wc.GITHUB:r=gi;break;case Wc.TWITTER:r=yi;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:c,pendingToken:d,nonce:m}=e;return!l&&!c&&!a&&!d?null:d?t.startsWith("saml.")?au._create(t,d):Ii._fromParams({providerId:t,signInMethod:t,pendingToken:d,idToken:a,accessToken:l}):new Jl(t).credential({idToken:a,accessToken:l,rawNonce:m})}return n instanceof Dn?r.credentialFromError(n):r.credentialFromResult(n)}function Fn(n,e){return e.catch(t=>{throw t instanceof Dn&&XU(n,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:WU(t),additionalUserInfo:dk(t),user:Ji.getOrCreate(a)}})}async function tv(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Fn(n,t.confirm(r))}}class JU{constructor(e,t){this.resolver=t,this.auth=YU(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Fn(_C(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._delegate=e,this.multiFactor=_k(e)}static getOrCreate(e){return Ji.USER_MAP.has(e)||Ji.USER_MAP.set(e,new Ji(e)),Ji.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Fn(this.auth,nR(this._delegate,e))}async linkWithPhoneNumber(e,t){return tv(this.auth,Bk(this._delegate,e,t))}async linkWithPopup(e){return Fn(this.auth,Yk(this._delegate,e,Zs))}async linkWithRedirect(e){return await ev(At(this.auth)),iM(this._delegate,e,Zs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Fn(this.auth,rR(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return tv(this.auth,Fk(this._delegate,e,t))}reauthenticateWithPopup(e){return Fn(this.auth,Qk(this._delegate,e,Zs))}async reauthenticateWithRedirect(e){return await ev(At(this.auth)),nM(this._delegate,e,Zs)}sendEmailVerification(e){return nk(this._delegate,e)}async unlink(e){return await HV(this._delegate,e),this}updateEmail(e){return sk(this._delegate,e)}updatePassword(e){return ak(this._delegate,e)}updatePhoneNumber(e){return qk(this._delegate,e)}updateProfile(e){return oR(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return rk(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ji.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=ae;class nv{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;sh(r,"invalid-api-key",{appName:e.name}),sh(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?Zs:void 0;this._delegate=t.initialize({options:{persistence:ZU(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(OO),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ji.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){TV(this._delegate,e,t)}applyActionCode(e){return YV(this._delegate,e)}checkActionCode(e){return iR(this._delegate,e)}confirmPasswordReset(e,t){return QV(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Fn(this._delegate,sR(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return tk(this._delegate,e)}isSignInWithEmailLink(e){return JV(this._delegate,e)}async getRedirectResult(){sh(p_(),this._delegate,"operation-not-supported-in-this-environment");const e=await aM(this._delegate,Zs);return e?Fn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){kU(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:c}=zA(e,t,r);return this._delegate.onAuthStateChanged(a,l,c)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:c}=zA(e,t,r);return this._delegate.onIdTokenChanged(a,l,c)}sendSignInLinkToEmail(e,t){return XV(this._delegate,e,t)}sendPasswordResetEmail(e,t){return $V(this._delegate,e,t||void 0)}async setPersistence(e){KU(this._delegate,e);let t;switch(e){case nr.SESSION:t=bo;break;case nr.LOCAL:t=await rr(kh)._isAvailable()?kh:Vv;break;case nr.NONE:t=su;break;default:return _n("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Fn(this._delegate,qV(this._delegate))}signInWithCredential(e){return Fn(this._delegate,dp(this._delegate,e))}signInWithCustomToken(e){return Fn(this._delegate,KV(this._delegate,e))}signInWithEmailAndPassword(e,t){return Fn(this._delegate,aR(this._delegate,e,t))}signInWithEmailLink(e,t){return Fn(this._delegate,ZV(this._delegate,e,t))}signInWithPhoneNumber(e,t){return tv(this._delegate,zk(this._delegate,e,t))}async signInWithPopup(e){return sh(p_(),this._delegate,"operation-not-supported-in-this-environment"),Fn(this._delegate,yR(this._delegate,e,Zs))}async signInWithRedirect(e){return sh(p_(),this._delegate,"operation-not-supported-in-this-environment"),await ev(this._delegate),eM(this._delegate,e,Zs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return WV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}nv.Persistence=nr;function zA(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const a=r;return{next:c=>a(c&&Ji.getOrCreate(c)),error:e,complete:t}}function ZU(n,e){const t=$U(n,e);if(typeof self<"u"&&!t.includes(kh)&&t.push(kh),typeof window<"u")for(const r of[Vv,bo])t.includes(r)||t.push(r);return t.includes(su)||t.push(su),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{static credential(e,t){return Io.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Io(_C(Ia.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}WE.PHONE_SIGN_IN_METHOD=Io.PHONE_SIGN_IN_METHOD;WE.PROVIDER_ID=Io.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=ae;class t5{constructor(e,t,r=Ia.app()){var a;e5((a=r.options)==null?void 0:a.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Uk(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="auth-compat";function r5(n){n.INTERNAL.registerComponent(new bi(n5,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new nv(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ll.EMAIL_SIGNIN,PASSWORD_RESET:Ll.PASSWORD_RESET,RECOVER_EMAIL:Ll.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ll.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ll.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ll.VERIFY_EMAIL}},EmailAuthProvider:_a,FacebookAuthProvider:mi,GithubAuthProvider:gi,GoogleAuthProvider:pi,OAuthProvider:Jl,SAMLAuthProvider:km,PhoneAuthProvider:WE,PhoneMultiFactorGenerator:IR,RecaptchaVerifier:t5,TwitterAuthProvider:yi,Auth:nv,AuthCredential:Pu,Error:Dn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(MU,LU)}r5(Ia);const i5="@firebase/firestore-compat",s5="0.4.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function FA(){if(!D4())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Wh{constructor(e){this._delegate=e}static fromBase64String(e){return FA(),new Wh(wn.fromBase64String(e))}static fromUint8Array(e){return BA(),new Wh(wn.fromUint8Array(e))}toBase64(){return FA(),this._delegate.toBase64()}toUint8Array(){return BA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n){return a5(n,["next","error","complete"])}function a5(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{enableIndexedDbPersistence(e,t){return I6(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return A6(e._delegate)}clearIndexedDbPersistence(e){return S6(e._delegate)}}class EC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ca||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ai("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){q1(this._delegate,e,t,r)}enableNetwork(){return x6(this._delegate)}disableNetwork(){return C6(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return R6(this._delegate)}onSnapshotsInSync(e){return aU(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Au(this,Fu(this._delegate,e))}catch(t){throw Cn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Tr(this,Oo(this._delegate,e))}catch(t){throw Cn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xn(this,E6(this._delegate,e))}catch(t){throw Cn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return KE(this._delegate,t=>e(new TC(this,t)))}batch(){return In(this._delegate),new wC(new J6(this._delegate,e=>wd(this._delegate,e)))}loadBundle(e){return N6(this._delegate,e)}namedQuery(e){return D6(this._delegate,e).then(t=>t?new xn(this,t):null)}}class Fp extends FE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wh(new wn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Tr.forKey(t,this.firestore,null)}}function l5(n){qM(n)}class TC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}get(e){const t=_o(e);return this._delegate.get(t).then(r=>new Xh(this._firestore,new wr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=_o(e);return r?(XE("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=_o(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=_o(e);return this._delegate.delete(t),this}}class wC{constructor(e){this._delegate=e}set(e,t,r){const a=_o(e);return r?(XE("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=_o(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=_o(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Uo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Sh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Uo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Uo(e,new Fp(e),t),a.set(t,l)),l}}Uo.INSTANCES=new WeakMap;class Tr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Tr(t,new ut(t._delegate,r,new ce(e)))}static forKey(e,t,r){return new Tr(t,new ut(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Au(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Au(this.firestore,Fu(this._delegate,e))}catch(t){throw Cn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=be(e),e instanceof ut?K1(this._delegate,e):!1}set(e,t){t=XE("DocumentReference.set",t);try{return t?X_(this._delegate,e,t):X_(this._delegate,e)}catch(r){throw Cn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Mo(this._delegate,e):Mo(this._delegate,e,t,...r)}catch(a){throw Cn(a,"updateDoc()","DocumentReference.update()")}}delete(){return sU(this._delegate)}onSnapshot(...e){const t=bC(e),r=IC(e,a=>new Xh(this.firestore,new wr(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return $E(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=tU(this._delegate):(e==null?void 0:e.source)==="server"?t=nU(this._delegate):t=cC(this._delegate),t.then(r=>new Xh(this.firestore,new wr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Tr(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Cn(n,e,t){return n.message=n.message.replace(e,t),n}function bC(n){for(const e of n)if(typeof e=="object"&&!rv(e))return e;return{}}function IC(n,e){var r,a;let t;return rv(n[0])?t=n[0]:rv(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:l=>{t.next&&t.next(e(l))},error:(r=t.error)==null?void 0:r.bind(t),complete:(a=t.complete)==null?void 0:a.bind(t)}}class Xh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Tr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uC(this._delegate,e._delegate)}}class Jh extends Xh{data(e){const t=this._delegate.data(e);return this._delegate._converter||HM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class xn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}where(e,t,r){try{return new xn(this.firestore,Bn(this._delegate,Er(e,t,r)))}catch(a){throw Cn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xn(this.firestore,Bn(this._delegate,F6(e,t)))}catch(r){throw Cn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xn(this.firestore,Bn(this._delegate,q6(e)))}catch(t){throw Cn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xn(this.firestore,Bn(this._delegate,H6(e)))}catch(t){throw Cn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xn(this.firestore,Bn(this._delegate,G6(...e)))}catch(t){throw Cn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xn(this.firestore,Bn(this._delegate,K6(...e)))}catch(t){throw Cn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xn(this.firestore,Bn(this._delegate,$6(...e)))}catch(t){throw Cn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xn(this.firestore,Bn(this._delegate,Q6(...e)))}catch(t){throw Cn(t,"endAt()","Query.endAt()")}}isEqual(e){return $1(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=rU(this._delegate):(e==null?void 0:e.source)==="server"?t=iU(this._delegate):t=ga(this._delegate),t.then(r=>new iv(this.firestore,new Fr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=bC(e),r=IC(e,a=>new iv(this.firestore,new Fr(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return $E(this._delegate,t,r)}withConverter(e){return new xn(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class u5{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new u5(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Jh(this._firestore,r))})}isEqual(e){return uC(this._delegate,e._delegate)}}class Au extends xn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Tr(this.firestore,e):null}doc(e){try{return e===void 0?new Tr(this.firestore,Oo(this._delegate)):new Tr(this.firestore,Oo(this._delegate,e))}catch(t){throw Cn(t,"doc()","CollectionReference.doc()")}}add(e){return hC(this._delegate,e).then(t=>new Tr(this.firestore,t))}isEqual(e){return K1(this._delegate,e._delegate)}withConverter(e){return new Au(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _o(n){return $e(n,ut)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(...e){this._delegate=new Vo(...e)}static documentId(){return new JE(Et.keyField().canonicalString())}isEqual(e){return e=be(e),e instanceof Vo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static serverTimestamp(){const e=L6();return e._methodName="FieldValue.serverTimestamp",new mo(e)}static delete(){const e=M6();return e._methodName="FieldValue.delete",new mo(e)}static arrayUnion(...e){const t=U6(...e);return t._methodName="FieldValue.arrayUnion",new mo(t)}static arrayRemove(...e){const t=j6(...e);return t._methodName="FieldValue.arrayRemove",new mo(t)}static increment(e){const t=z6(e);return t._methodName="FieldValue.increment",new mo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5={Firestore:EC,GeoPoint:zr,Timestamp:Xe,Blob:Wh,Transaction:TC,WriteBatch:wC,DocumentReference:Tr,DocumentSnapshot:Xh,Query:xn,QueryDocumentSnapshot:Jh,QuerySnapshot:iv,CollectionReference:Au,FieldPath:JE,FieldValue:mo,setLogLevel:l5,CACHE_SIZE_UNLIMITED:w6};function h5(n,e){n.INTERNAL.registerComponent(new bi("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps({...c5}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n){h5(n,(e,t)=>new EC(e,t,new o5)),n.registerVersion(i5,s5)}d5(Ia);const f5={apiKey:"AIzaSyAOTt2uoaV5sPszXuAwqY2hVlSIP4mpE90",authDomain:"openfamilysafe.firebaseapp.com",projectId:"openfamilysafe",storageBucket:"openfamilysafe.firebasestorage.app",messagingSenderId:"355726338299",appId:"1:355726338299:web:5b8f5a3193fc005282685e",measurementId:"G-ZVVE0P3LGB"},m5=Ia.initializeApp(f5),Qi=Ia.auth(),Aa=b6(m5),p5=new Ia.auth.GoogleAuthProvider,Su=Fu(Aa,"users"),AC=Fu(Aa,"families");Fu(Aa,"approvalRequests");const Ri=n=>Oo(Aa,"users",n),SC=n=>Oo(Aa,"families",n);var xt=(n=>(n.SUPER_ADMIN="SUPER_ADMIN",n.PARENT="PARENT",n.CHILD="CHILD",n.PENDING_PARENT="PENDING_PARENT",n.PENDING_CHILD="PENDING_CHILD",n))(xt||{}),tt=(n=>(n.PENDING="PENDING",n.APPROVED="APPROVED",n.REJECTED="REJECTED",n.SUSPENDED="SUSPENDED",n))(tt||{}),wo=(n=>(n.STRICT="STRICT",n.MODERATE="MODERATE",n.NONE="NONE",n))(wo||{});async function g5(n,e,t){const r=Date.now(),a={uid:n.uid,email:n.email||"",displayName:n.displayName||"",role:e,filterLevel:wo.MODERATE,approvalStatus:tt.PENDING,createdAt:r,updatedAt:r};return e===xt.PENDING_CHILD&&t&&(a.parentEmail=t),await X_(Ri(n.uid),a),a}async function ZE(n){const e=await cC(Ri(n));return e.exists()?e.data():null}async function RC(n,e){await Mo(Ri(n),{...e,updatedAt:Date.now()})}async function y5(){return(await ga(Su)).docs.map(e=>e.data())}async function _5(n){const e=Bn(Su,Er("role","==",n));return(await ga(e)).docs.map(r=>r.data())}async function v5(){return _5(xt.PENDING_PARENT)}async function E5(n){const e=Bn(Su,Er("role","==",xt.PENDING_CHILD),Er("parentUid","==",n)),t=await ga(e);if(!t.empty)return t.docs.map(a=>a.data());const r=await ZE(n);if(r!=null&&r.email){const a=Bn(Su,Er("role","==",xt.PENDING_CHILD),Er("parentEmail","==",r.email));return(await ga(a)).docs.map(c=>c.data())}return[]}async function T5(n,e){const t=Date.now();await KE(Aa,async r=>{const a=Ri(e),l=await r.get(a);if(!l.exists())throw new Error("Parent user not found");const c=l.data(),d=Oo(AC),m={id:d.id,parentUid:e,childrenUids:[],createdAt:t,settings:{filterLevel:c.filterLevel||wo.MODERATE}};r.set(d,m),r.update(a,{role:xt.PARENT,approvalStatus:tt.APPROVED,familyId:d.id,approvedBy:n,approvedAt:t,updatedAt:t})})}async function w5(n,e,t){const r=Date.now();await Mo(Ri(e),{approvalStatus:tt.REJECTED,rejectedReason:t,approvedBy:n,approvedAt:r,updatedAt:r})}async function b5(n,e){const t=Date.now();await KE(Aa,async r=>{const a=Ri(n),l=await r.get(a);if(!l.exists())throw new Error("Parent not found");const c=l.data();if(!c.familyId)throw new Error("Parent does not have a valid Family ID");const d=Ri(e);if(!(await r.get(d)).exists())throw new Error("Child not found");const g=SC(c.familyId),_=await r.get(g);if(!_.exists())throw new Error("Family not found");const v=_.data();r.update(d,{role:xt.CHILD,approvalStatus:tt.APPROVED,parentUid:n,familyId:c.familyId,approvedBy:n,approvedAt:t,updatedAt:t});const b=[...c.childrenUids||[]];b.includes(e)||(b.push(e),r.update(a,{childrenUids:b,updatedAt:t}));const R=[...v.childrenUids];R.includes(e)||(R.push(e),r.update(g,{childrenUids:R}))})}async function I5(n,e,t){const r=Date.now();await Mo(Ri(e),{approvalStatus:tt.REJECTED,rejectedReason:t,approvedBy:n,approvedAt:r,updatedAt:r})}async function xC(n,e,t){const r=Date.now();await Mo(Ri(e),{approvalStatus:tt.SUSPENDED,rejectedReason:t,updatedAt:r})}function A5(n){return n.approvalStatus!==tt.APPROVED?!1:[xt.SUPER_ADMIN,xt.PARENT,xt.CHILD].includes(n.role)}const CC=B.createContext(void 0),S5=({children:n})=>{const[e,t]=B.useState(null),[r,a]=B.useState(null),[l,c]=B.useState(!0);B.useEffect(()=>{let te;const X=fk(Qi,async ge=>{if(t(ge),te&&(te(),te=void 0),ge){const fe=Ri(ge.uid);te=$E(fe,de=>{if(de.exists()){const x=de.data();a(x)}else a(null);c(!1)},de=>{console.error("Error fetching user profile:",de),c(!1)})}else a(null),c(!1)});return()=>{X(),te&&te()}},[]);const d=async(te,X)=>{await aR(Qi,te,X)},m=async(te,X,ge,fe)=>{try{const x=(await sR(Qi,te,X)).user,S=ge==="parent"?xt.PENDING_PARENT:xt.PENDING_CHILD;await g5(x,S,fe)}catch(de){throw console.error("Sign up error:",de),de}},g=async()=>{try{await mk(Qi)}catch(te){throw console.error("Error signing out:",te),te}},_=async()=>{if(e)try{const te=await ZE(e.uid);a(te)}catch(te){console.error("Error refreshing profile:",te)}},v=!!e,b=(r==null?void 0:r.approvalStatus)===tt.APPROVED,R=(r==null?void 0:r.approvalStatus)===tt.PENDING,M=(r==null?void 0:r.role)===xt.SUPER_ADMIN,z=(r==null?void 0:r.role)===xt.PARENT,F=(r==null?void 0:r.role)===xt.CHILD,ee={user:e,userProfile:r,loading:l,isAuthenticated:v,isApproved:b,isPending:R,isSuperAdmin:M,isParent:z,isChild:F,signIn:d,signUp:m,signOut:g,refreshProfile:_};return w.jsx(CC.Provider,{value:ee,children:!l&&n})},Ko=()=>{const n=B.useContext(CC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n};class g_ extends Error{constructor(e,t){super(t),this.reason=e,this.name="ProxyAccessDeniedError"}}const qA="https://open-family-safe-proxy.openfamilysafe.workers.dev",R5=async(n,e,t)=>{if(!e)throw new Error("User must be authenticated to use the proxy.");let r=t;if(!r)try{r=await ZE(e.uid)}catch(a){console.error("Error fetching user profile for proxy check:",a)}if(!r)throw new Error("User profile not found. Access denied.");if(!A5(r)){const a=r.approvalStatus;throw a===tt.PENDING?new g_("PENDING","Your account is pending approval. Please wait for admin/parent approval."):a===tt.REJECTED?new g_("REJECTED","Your account access has been denied."):a===tt.SUSPENDED?new g_("SUSPENDED","Your account has been suspended."):new Error("Access Denied: You are not authorized to use this service.")}n.startsWith("http")||(n=`https://${n}`);try{let a;const l=await e.getIdToken();try{const m=new URL(qA);m.searchParams.set("url",n),a=await fetch(m.toString(),{headers:{Authorization:`Bearer ${l}`,"X-Filter-Level":r.filterLevel||"MODERATE"}})}catch{throw new Error(`Invalid Worker Endpoint URL: ${qA}`)}if(a.status===403)throw new Error("Access Denied: Parental controls have blocked this site.");if(!a.ok)throw new Error(`Proxy connection failed: ${a.status} ${a.statusText}`);let c=await a.text();if(!c||c.trim().length===0)throw new Error("The website returned empty content.");const d=`<base href="${n}" target="_blank" />`;return c.toLowerCase().includes("<head>")?c=c.replace(/<head>/i,`<head>${d}`):c=`${d}${c}`,c}catch(a){throw console.error("Proxy Service Error:",a),new Error(a.message||"Failed to load the website. It might be blocking proxy access.")}},_t=({children:n,variant:e="primary",size:t="md",isLoading:r,className:a="",disabled:l,...c})=>{const d="inline-flex items-center justify-center border font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-150",m={primary:"border-transparent text-white bg-brand-600 hover:bg-brand-500 focus:ring-brand-500",secondary:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-brand-500",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500",ghost:"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"},g={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return w.jsxs("button",{className:`${d} ${m[e]} ${g[t]} ${r||l?"opacity-50 cursor-not-allowed":""} ${a}`,disabled:r||l,...c,children:[r&&w.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})},Yi=({label:n,error:e,className:t="",...r})=>w.jsxs("div",{className:"w-full",children:[n&&w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),w.jsx("input",{className:`appearance-none block w-full px-3 py-2 border ${e?"border-red-300":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-brand-500 focus:border-brand-500 sm:text-sm ${t}`,...r}),e&&w.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]}),Nn=({children:n,className:e=""})=>w.jsx("div",{className:`bg-white overflow-hidden shadow rounded-lg ${e}`,children:n}),Rm=({children:n,color:e="blue"})=>{const t={green:"bg-green-100 text-green-800",yellow:"bg-yellow-100 text-yellow-800",red:"bg-red-100 text-red-800",blue:"bg-blue-100 text-blue-800"};return w.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t[e]}`,children:n})},lm=({children:n})=>{const{currentUser:e,userProfile:t,logout:r,isAdmin:a,isParent:l,isDemo:c}=Ko(),d=as(),m=async()=>{try{await r()}catch(g){console.error("Failed to log out",g)}};return w.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[w.jsx("nav",{className:"bg-white shadow-sm z-10",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex justify-between h-16",children:[w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"flex-shrink-0 flex items-center",children:w.jsxs(lo,{to:"/",className:"flex items-center gap-2",children:[w.jsx("div",{className:"h-8 w-8 bg-brand-600 rounded-lg flex items-center justify-center text-white font-bold",children:"O"}),w.jsx("span",{className:"font-bold text-xl text-gray-900 tracking-tight",children:"OpenFamilySafe"})]})}),e&&w.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[w.jsx(lo,{to:"/",className:`${d.pathname==="/"?"border-brand-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Browse"}),l&&w.jsx(lo,{to:"/family",className:`${d.pathname==="/family"?"border-brand-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"My Family"}),a&&w.jsx(lo,{to:"/admin",className:`${d.pathname==="/admin"?"border-brand-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Admin Console"})]})]}),w.jsx("div",{className:"flex items-center",children:e?w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("div",{className:"text-right hidden sm:block",children:[w.jsx("div",{className:"text-sm font-medium text-gray-900",children:(t==null?void 0:t.displayName)||e.email}),w.jsx("div",{className:"text-xs text-gray-500 capitalize",children:t==null?void 0:t.role.toLowerCase()})]}),w.jsx(_t,{variant:"ghost",onClick:m,className:"text-sm",children:"Sign out"})]}):w.jsx(lo,{to:"/login",children:w.jsx(_t,{variant:"primary",children:"Sign in"})})})]})})}),w.jsx("main",{className:"flex-grow",children:w.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:n})}),w.jsx("footer",{className:"bg-gray-800 text-gray-300 py-8 mt-auto",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-100 tracking-wider uppercase",children:"Project Info"}),w.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Open Source Family Proxy Project.",w.jsx("br",{}),"Built with React, Firebase, and Cloudflare Workers.",w.jsx("br",{}),w.jsx("a",{href:"#",className:"underline hover:text-white",children:"View Source on GitHub"})]})]}),w.jsxs("div",{className:"col-span-2",children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-100 tracking-wider uppercase mb-2",children:"Legal Disclaimer"}),w.jsxs("div",{className:"text-xs text-gray-400 space-y-2 border-l-2 border-gray-600 pl-4",children:[w.jsxs("p",{children:[w.jsx("strong",{children:'1. "As Is" Basis:'}),' This software is provided "as is" without warranty of any kind. The developers assume no liability for damages or data loss resulting from the use of this software.']}),w.jsxs("p",{children:[w.jsx("strong",{children:"2. Compliance with Laws:"})," Users are solely responsible for ensuring that their use of this software complies with all applicable local, state, and federal laws, as well as the Terms of Service of their Internet Service Provider (ISP)."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"3. No Circumvention:"})," This tool should not be used for illegal activities, including but not limited to bypassing copyright protections or engaging in cyber-attacks. The project maintainers are not responsible for any misuse of this software."]})]})]})]}),w.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-8 flex flex-col md:flex-row justify-between items-center text-xs",children:[w.jsxs("p",{className:"mb-4 md:mb-0",children:[" ",new Date().getFullYear()," OpenFamilySafe Project. All rights reserved."]}),w.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-900 rounded-full border border-gray-700 shadow-sm",children:[w.jsx("div",{className:`h-2 w-2 rounded-full ${c?"bg-yellow-500":"bg-green-500"}`}),w.jsxs("span",{className:"text-gray-400 font-medium",children:["Auth: ",w.jsx("span",{className:c?"text-yellow-500":"text-green-500",children:c?"Simulated":"Firebase"})]})]}),w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-900 rounded-full border border-gray-700 shadow-sm",children:[w.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),w.jsxs("span",{className:"text-gray-400 font-medium",children:["Proxy: ",w.jsx("span",{className:"text-blue-500",children:"Cloudflare Worker"})]})]})]})]})]})})]})},x5=()=>{const{userProfile:n,currentUser:e}=Ko(),[t,r]=B.useState(""),[a,l]=B.useState(!1),[c,d]=B.useState(null),[m,g]=B.useState("preview"),[_,v]=B.useState(!1);B.useEffect(()=>{const R=M=>{M.key==="Escape"&&v(!1)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[]);const b=B.useCallback(async R=>{if(R&&R.preventDefault(),!t)return;let M=t;M.startsWith("http")||(M=`https://${M}`),l(!0),d(null),v(!1);try{const z=await R5(M,e);d(z)}catch(z){console.error(z);const F=`
        <div style="text-align: center; color: #dc2626; padding: 40px; font-family: sans-serif;">
          <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">Unable to Access Site</h2>
          <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">${z.message||"An unexpected error occurred."}</p>
          
          <div style="max-w-lg mx-auto text-left padding: 1.5rem; background-color: #fef2f2; border-radius: 0.5rem; border: 1px solid #fee2e2; padding: 20px;">
            
              <h3 style="font-weight: bold; color: #1e40af; margin-bottom: 0.5rem;"> Cloudflare Worker Error</h3>
              <p style="font-size: 0.9rem; color: #1e3a8a;">You are connected to your custom Worker, but it failed to retrieve the page.</p>
              <ul style="list-style-type: disc; margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.9rem; color: #1e3a8a;">
                <li>The target site might be blocking headless requests.</li>
                <li>Your Worker deployment might have hit a CPU/Memory limit.</li>
                <li>Check your Cloudflare Dashboard > Workers > Logs for details.</li>
              </ul>
            
          </div>
        </div>
      `;d(F)}finally{l(!1)}},[t,e]);return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"text-center py-8",children:[w.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl",children:"Secure Family Browsing"}),w.jsx("p",{className:"mt-3 max-w-2xl mx-auto text-xl text-gray-500 sm:mt-4",children:"Enter a website URL below to browse safely through the family filter."}),w.jsxs("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:["Current Safety Level: ",(n==null?void 0:n.filterLevel)||wo.MODERATE]})]}),w.jsx(Nn,{className:"max-w-4xl mx-auto p-6 bg-white shadow-lg border border-gray-100",children:w.jsxs("form",{onSubmit:b,className:"flex gap-4 items-end",children:[w.jsx("div",{className:"flex-grow",children:w.jsx(Yi,{placeholder:"e.g., wikipedia.org",value:t,onChange:R=>r(R.target.value),className:"text-lg",autoFocus:!0})}),w.jsx(_t,{type:"submit",size:"lg",className:"h-[42px] px-8",isLoading:a,children:"Go"})]})}),c&&w.jsxs("div",{className:_?"fixed inset-0 z-50 bg-white flex flex-col animate-in fade-in duration-200":"max-w-6xl mx-auto mt-8 animate-fade-in",children:[w.jsx("div",{className:`flex justify-between items-center ${_?"px-4 py-2 bg-gray-100 border-b border-gray-300 shadow-md":"mb-4 px-2"}`,children:_?w.jsxs("div",{className:"w-full flex justify-between items-center gap-4",children:[w.jsxs("div",{className:"flex-grow max-w-3xl mx-auto flex items-center bg-white border border-gray-300 rounded-md px-3 py-1.5 shadow-sm text-sm text-gray-700",children:[w.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),w.jsx("span",{className:"truncate",children:t})]}),w.jsx(_t,{variant:"secondary",onClick:()=>v(!1),size:"sm",className:"whitespace-nowrap",children:"Exit Full Screen (Esc)"})]}):w.jsxs(w.Fragment,{children:[w.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Result for: ",t]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("div",{className:"space-x-1 bg-white p-1 rounded-lg border shadow-sm flex",children:[w.jsx("button",{onClick:()=>g("preview"),className:`px-3 py-1 text-sm rounded-md transition-colors ${m==="preview"?"bg-brand-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Preview"}),w.jsx("button",{onClick:()=>g("code"),className:`px-3 py-1 text-sm rounded-md transition-colors ${m==="code"?"bg-brand-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Raw HTML"})]}),m==="preview"&&w.jsx("button",{onClick:()=>v(!0),className:"p-2 text-gray-500 hover:text-brand-600 hover:bg-gray-100 rounded-md transition-colors",title:"Enter Full Screen",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})}),w.jsx("div",{className:`bg-white overflow-hidden ${_?"flex-grow w-full h-full overflow-auto":"rounded-lg shadow-sm border border-gray-200 min-h-[500px]"}`,children:m==="preview"?w.jsx("div",{className:`w-full h-full bg-white ${_?"":"p-4"}`,dangerouslySetInnerHTML:{__html:c}}):w.jsx("pre",{className:`w-full overflow-auto p-4 bg-gray-900 text-green-400 text-xs font-mono ${_?"h-full":"h-[500px]"}`,children:c})})]}),!c&&!a&&w.jsx("div",{className:"max-w-4xl mx-auto mt-12 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[{title:"Educational",desc:"Wikipedia, Khan Academy, and verified educational resources are always allowed.",color:"green"},{title:"Social Media",desc:"Access to social platforms is restricted based on time of day and user role.",color:"yellow"},{title:"Blocked Content",desc:"Adult content, gambling, and malicious sites are strictly blocked.",color:"red"}].map((R,M)=>w.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg border-t-4",style:{borderColor:R.color==="green"?"#10b981":R.color==="yellow"?"#f59e0b":"#ef4444"},children:w.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[w.jsx("dt",{className:"text-base font-semibold text-gray-900",children:R.title}),w.jsx("dd",{className:"mt-1 text-sm text-gray-500",children:R.desc})]})},M))})]})},C5=()=>{const[n,e]=B.useState(!0),[t,r]=B.useState(""),[a,l]=B.useState(""),[c,d]=B.useState(""),[m,g]=B.useState(""),[_,v]=B.useState("parent"),[b,R]=B.useState(""),[M,z]=B.useState(""),[F,ee]=B.useState(""),[te,X]=B.useState(!1),ge=rp(),{signIn:fe,signUp:de}=Ko(),x=async()=>{z(""),X(!0);try{await yR(Qi,p5),ge("/")}catch(P){if(console.error("Google Login Error:",P),P.code==="auth/popup-closed-by-user"){X(!1);return}C(P)}finally{Qi.currentUser&&X(!1)}},S=async P=>{P.preventDefault(),z(""),ee(""),X(!0);try{if(n)await fe(a,c),ge("/");else{if(c!==m)throw new Error("Passwords do not match.");if(c.length<6)throw new Error("Password should be at least 6 characters.");if(_==="child"){if(!b.trim())throw new Error("Parent email is required for child registration.");if(b.trim().toLowerCase()===a.trim().toLowerCase())throw new Error("Parent email cannot be the same as your email.")}await de(a,c,_,_==="child"?b:void 0),t&&Qi.currentUser&&await oR(Qi.currentUser,{displayName:t}).catch(L=>console.error("Failed to update display name:",L)),ee(_==="parent"?"Registration successful! Please wait for admin approval.":"Registration successful! Please wait for your parent to approve your account.")}}catch(O){if(O.message==="Passwords do not match."||O.message.includes("characters")||O.message.includes("required")||O.message.includes("Parent email")){z(O.message),X(!1);return}C(O)}finally{!Qi.currentUser&&!F&&X(!1),F&&X(!1)}},C=P=>{console.error("Auth Error:",P);let O="Failed to authenticate.";P.code==="auth/wrong-password"&&(O="Incorrect password."),P.code==="auth/user-not-found"&&(O="No account found with this email."),P.code==="auth/email-already-in-use"&&(O="Email is already registered. Please sign in instead."),P.code==="auth/weak-password"&&(O="Password should be at least 6 characters."),z(O),X(!1)};return F?w.jsx("div",{className:"min-h-[90vh] flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-gray-50",children:w.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:w.jsxs(Nn,{className:"p-8 text-center shadow-xl",children:[w.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:w.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),w.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Registration Successful"}),w.jsx("p",{className:"text-gray-600 mb-6",children:F}),w.jsx(_t,{onClick:()=>{ee(""),e(!0),d(""),g("")},className:"w-full",children:"Go to Sign In"})]})})}):w.jsxs("div",{className:"min-h-[90vh] flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-gray-50",children:[w.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[w.jsx("div",{className:"flex justify-center mb-6",children:w.jsx("div",{className:"h-16 w-16 bg-brand-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl",children:"O"})}),w.jsx("h2",{className:"text-center text-3xl font-extrabold text-gray-900 tracking-tight",children:"Welcome to FamilySafe"}),w.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"The secure gateway for your family's browsing."})]}),w.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:w.jsxs(Nn,{className:"shadow-2xl sm:rounded-xl overflow-hidden",children:[w.jsxs("div",{className:"flex border-b border-gray-200",children:[w.jsx("button",{type:"button",onClick:()=>e(!0),className:`w-1/2 py-4 text-center text-sm font-medium transition-colors duration-200 ${n?"text-brand-600 border-b-2 border-brand-600 bg-brand-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:"Sign In"}),w.jsx("button",{type:"button",onClick:()=>e(!1),className:`w-1/2 py-4 text-center text-sm font-medium transition-colors duration-200 ${n?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-brand-600 border-b-2 border-brand-600 bg-brand-50"}`,children:"Create Account"})]}),w.jsxs("div",{className:"py-8 px-4 sm:px-10",children:[w.jsxs("form",{className:"space-y-5",onSubmit:S,children:[!n&&w.jsxs("div",{className:"animate-fade-in-down space-y-5",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I am a..."}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("label",{className:`cursor-pointer border rounded-lg p-3 text-center transition-all ${_==="parent"?"border-brand-600 bg-brand-50 text-brand-700 font-bold ring-1 ring-brand-600":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[w.jsx("input",{type:"radio",name:"role",value:"parent",checked:_==="parent",onChange:()=>v("parent"),className:"sr-only"}),"Parent"]}),w.jsxs("label",{className:`cursor-pointer border rounded-lg p-3 text-center transition-all ${_==="child"?"border-brand-600 bg-brand-50 text-brand-700 font-bold ring-1 ring-brand-600":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[w.jsx("input",{type:"radio",name:"role",value:"child",checked:_==="child",onChange:()=>v("child"),className:"sr-only"}),"Child"]})]})]}),w.jsx(Yi,{label:"Full Name",type:"text",required:!0,value:t,onChange:P=>r(P.target.value),placeholder:"e.g. Sarah Smith"})]}),w.jsx(Yi,{label:"Email address",type:"email",required:!0,value:a,onChange:P=>l(P.target.value),placeholder:"name@example.com"}),w.jsx(Yi,{label:"Password",type:"password",required:!0,value:c,onChange:P=>d(P.target.value),placeholder:""}),!n&&w.jsxs("div",{className:"animate-fade-in-down space-y-5",children:[w.jsx(Yi,{label:"Confirm Password",type:"password",required:!0,value:m,onChange:P=>g(P.target.value),placeholder:""}),_==="child"&&w.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[w.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Parent Approval Required"}),w.jsx(Yi,{label:"Parent's Email Address",type:"email",required:!0,value:b,onChange:P=>R(P.target.value),placeholder:"parent@example.com",className:"bg-white"}),w.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Your parent will need to approve your account before you can sign in."})]})]}),M&&w.jsx("div",{className:"rounded-md bg-red-50 p-3",children:w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"flex-shrink-0",children:w.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),w.jsx("div",{className:"ml-3",children:w.jsx("h3",{className:"text-sm font-medium text-red-800",children:M})})]})}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-brand-600 focus:ring-brand-500 border-gray-300 rounded"}),w.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),n&&w.jsx("div",{className:"text-sm",children:w.jsx("a",{href:"#",className:"font-medium text-brand-600 hover:text-brand-500",children:"Forgot password?"})})]}),w.jsx(_t,{type:"submit",className:"w-full",size:"lg",isLoading:te,children:n?"Sign In":"Create Account"})]}),w.jsxs("div",{className:"mt-8",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-gray-300"})}),w.jsx("div",{className:"relative flex justify-center text-sm",children:w.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),w.jsx("div",{className:"mt-6",children:w.jsxs("button",{onClick:x,type:"button",className:"w-full inline-flex justify-center items-center py-2.5 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500",children:[w.jsxs("svg",{className:"h-5 w-5 mr-3","aria-hidden":"true",viewBox:"0 0 24 24",children:[w.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),w.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),w.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),w.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})})]}),w.jsxs("div",{className:"mt-8 bg-gray-50 rounded-lg p-4 border border-gray-100",children:[w.jsx("p",{className:"text-xs text-gray-500 text-center uppercase tracking-wide font-semibold mb-3",children:"Demo Accounts"}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{onClick:()=>{l("parent@example.com"),d("pass123"),e(!0)},className:"cursor-pointer hover:bg-white p-2 rounded transition-colors text-center border border-transparent hover:border-gray-200",children:[w.jsx("div",{className:"text-xs font-bold text-gray-900",children:"Parent"}),w.jsx("div",{className:"text-[10px] text-gray-500",children:"parent@example.com"})]}),w.jsxs("div",{onClick:()=>{l("child@example.com"),d("pass123"),e(!0)},className:"cursor-pointer hover:bg-white p-2 rounded transition-colors text-center border border-transparent hover:border-gray-200",children:[w.jsx("div",{className:"text-xs font-bold text-gray-900",children:"Child"}),w.jsx("div",{className:"text-[10px] text-gray-500",children:"child@example.com"})]})]})]})]})]})})]})},N5=({isOpen:n,title:e,onClose:t,onSubmit:r,isLoading:a,children:l})=>n?w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:e}),w.jsx("div",{className:"mb-6",children:l}),w.jsxs("div",{className:"flex justify-end space-x-3",children:[w.jsx(_t,{variant:"secondary",onClick:t,disabled:a,children:"Cancel"}),w.jsx(_t,{variant:"danger",onClick:r,isLoading:a,children:"Confirm"})]})]})}):null,D5=()=>{const{userProfile:n,isSuperAdmin:e,loading:t}=Ko(),[r,a]=B.useState([]),[l,c]=B.useState([]),[d,m]=B.useState(!0),[g,_]=B.useState("pending"),[v,b]=B.useState(null),[R,M]=B.useState(""),[z,F]=B.useState(null),[ee,te]=B.useState(null),[X,ge]=B.useState(""),[fe,de]=B.useState(!1),[x,S]=B.useState(null);B.useEffect(()=>{e&&C()},[e]);const C=async()=>{try{m(!0);const[j,le]=await Promise.all([v5(),y5()]);a(j),c(le.sort((Te,Oe)=>Oe.createdAt-Te.createdAt))}catch(j){console.error("Error fetching admin data:",j),P("error","Failed to load data")}finally{m(!1)}},P=(j,le)=>{S({type:j,message:le}),setTimeout(()=>S(null),5e3)},O=async j=>{if(n!=null&&n.uid)try{b(j),await T5(n.uid,j),P("success","Parent approved successfully"),await C()}catch(le){console.error("Error approving parent:",le),P("error","Failed to approve parent")}finally{b(null)}},L=(j,le)=>{F(j),te(le),ge("")},N=async()=>{if(!(!ee||!(n!=null&&n.uid)||!z)){if(!X.trim()){P("error","Please provide a reason");return}try{de(!0),z==="reject"?(await w5(n.uid,ee.uid,X),P("success","Request rejected")):(await xC(n.uid,ee.uid,X),P("success","User suspended")),F(null),await C()}catch(j){console.error(`Error ${z}ing user:`,j),P("error",`Failed to ${z} user`)}finally{de(!1)}}},He=async j=>{try{b(j),await RC(j,{approvalStatus:tt.APPROVED}),P("success","User unsuspended"),await C()}catch(le){console.error("Error unsuspending user:",le),P("error","Failed to unsuspend user")}finally{b(null)}};if(t)return w.jsx("div",{className:"p-8 flex justify-center",children:"Loading..."});if(!e)return w.jsx(Cm,{to:"/",replace:!0});const bt=l.filter(j=>{var le;return j.email.toLowerCase().includes(R.toLowerCase())||((le=j.displayName)==null?void 0:le.toLowerCase().includes(R.toLowerCase()))});return w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[w.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Admin Console"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage approvals and user accounts."})]}),x&&w.jsx("div",{className:`mt-4 md:mt-0 p-3 rounded-md md:w-1/3 ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.message})]}),w.jsx("div",{className:"border-b border-gray-200",children:w.jsxs("nav",{className:"-mb-px flex space-x-8",children:[w.jsxs("button",{onClick:()=>_("pending"),className:`${g==="pending"?"border-brand-500 text-brand-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:["Pending Requests",r.length>0&&w.jsx("span",{className:"ml-2 bg-brand-100 text-brand-600 py-0.5 px-2.5 rounded-full text-xs font-semibold",children:r.length})]}),w.jsx("button",{onClick:()=>_("all"),className:`${g==="all"?"border-brand-500 text-brand-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"All Users"})]})}),d?w.jsx("div",{className:"flex justify-center py-12",children:w.jsxs("svg",{className:"animate-spin h-8 w-8 text-brand-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):g==="pending"?w.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length===0?w.jsx("p",{className:"text-gray-500 col-span-full text-center py-10",children:"No pending requests."}):r.map(j=>w.jsxs(Nn,{className:"p-5 flex flex-col justify-between",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",title:j.email,children:j.displayName||"Unnamed User"}),w.jsx(Rm,{color:"yellow",children:"Pending"})]}),w.jsx("p",{className:"text-sm text-gray-500 mt-1 mb-4",children:j.email}),w.jsx("dl",{className:"text-xs text-gray-500 space-y-1 mb-4",children:w.jsxs("div",{className:"flex justify-between",children:[w.jsx("dt",{children:"Registered:"}),w.jsx("dd",{children:new Date(j.createdAt).toLocaleDateString()})]})})]}),w.jsxs("div",{className:"flex space-x-3 mt-4",children:[w.jsx(_t,{variant:"primary",size:"sm",onClick:()=>O(j.uid),isLoading:v===j.uid,className:"flex-1",children:"Approve"}),w.jsx(_t,{variant:"danger",size:"sm",onClick:()=>L("reject",j),disabled:v===j.uid,className:"flex-1",children:"Reject"})]})]},j.uid))}):w.jsxs("div",{className:"space-y-4",children:[w.jsx(Yi,{placeholder:"Search by email or name...",value:R,onChange:j=>M(j.target.value),className:"max-w-md"}),w.jsx(Nn,{className:"overflow-hidden",children:w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Family ID"}),w.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),w.jsx("th",{scope:"col",className:"relative px-6 py-3",children:w.jsx("span",{className:"sr-only",children:"Actions"})})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:bt.map(j=>w.jsxs("tr",{children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsx("div",{className:"flex items-center",children:w.jsxs("div",{className:"ml-0",children:[w.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.displayName||"No Name"}),w.jsx("div",{className:"text-sm text-gray-500",children:j.email})]})})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:j.role})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.approvalStatus===tt.APPROVED?"bg-green-100 text-green-800":j.approvalStatus===tt.PENDING?"bg-yellow-100 text-yellow-800":j.approvalStatus===tt.REJECTED?"bg-red-100 text-red-800":(j.approvalStatus===tt.SUSPENDED,"bg-gray-100 text-gray-800")}`,children:j.approvalStatus})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.familyId||"-"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(j.createdAt).toLocaleDateString()}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:j.approvalStatus===tt.SUSPENDED?w.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>He(j.uid),isLoading:v===j.uid,className:"text-green-600 hover:text-green-900",children:"Unsuspend"}):w.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>L("suspend",j),disabled:j.role===xt.SUPER_ADMIN,className:"text-red-600 hover:text-red-900",children:"Suspend"})})]},j.uid))})]})})})]}),w.jsx(N5,{isOpen:!!z,title:z==="reject"?"Reject Request":"Suspend User",onClose:()=>F(null),onSubmit:N,isLoading:fe,children:w.jsxs("div",{className:"space-y-4",children:[w.jsx("p",{className:"text-sm text-gray-500",children:z==="reject"?`Are you sure you want to reject the request for ${ee==null?void 0:ee.email}?`:`Are you sure you want to suspend ${ee==null?void 0:ee.email}? This will prevent them from logging in.`}),w.jsx(Yi,{label:"Reason",value:X,onChange:j=>ge(j.target.value),placeholder:z==="reject"?"Reason for rejection...":"Reason for suspension..."})]})})]})},P5=Fu(Aa,"invites");async function O5(n){const e=Bn(AC,Er("parentUid","==",n)),t=await ga(e);return t.empty?null:t.docs[0].data()}async function V5(n,e){const t={};e&&e.filterLevel&&(t["settings.filterLevel"]=e.filterLevel),Object.keys(t).length>0&&await Mo(SC(n),t)}async function k5(n){const e=Bn(Su,Er("familyId","==",n),Er("role","==",xt.CHILD));return(await ga(e)).docs.map(r=>r.data())}async function M5(n){const e=Bn(Su,Er("parentUid","==",n),Er("approvalStatus","==",tt.APPROVED),Er("role","==",xt.CHILD));return(await ga(e)).docs.map(r=>r.data())}async function L5(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return await hC(P5,{code:t,familyId:n,createdAt:Date.now(),expiresAt:Date.now()+2880*60*1e3}),t}const U5=()=>{const{user:n,userProfile:e,isParent:t,isApproved:r}=Ko(),[a,l]=B.useState(!0),[c,d]=B.useState(null),[m,g]=B.useState(null),[_,v]=B.useState([]),[b,R]=B.useState([]),[M,z]=B.useState(null),[F,ee]=B.useState(null),[te,X]=B.useState(!1),[ge,fe]=B.useState(!1),[de,x]=B.useState(""),[S,C]=B.useState(null),[P,O]=B.useState(!1),[L,N]=B.useState(!1);B.useEffect(()=>{n&&t&&r?He():l(!1)},[n,t,r]);const He=async()=>{if(n){l(!0),d(null);try{const q=await E5(n.uid);v(q);const oe=await O5(n.uid);if(z(oe),oe){const me=await k5(oe.id);R(me)}else{const me=await M5(n.uid);R(me)}}catch(q){console.error("Error loading family data:",q),d("Failed to load family data.")}finally{l(!1)}}},bt=async q=>{if(n)try{await b5(n.uid,q),g("Child approved successfully"),He()}catch(oe){console.error("Error approving child:",oe),d("Failed to approve child request.")}},j=q=>{C(q),x(""),fe(!0)},le=async()=>{if(!(!n||!S)){if(!de.trim()){alert("Please provide a reason for rejection.");return}O(!0);try{await I5(n.uid,S,de),g("Child request rejected"),fe(!1),C(null),He()}catch(q){console.error("Error rejecting child:",q),d("Failed to reject child request.")}finally{O(!1)}}},Te=async q=>{if(n&&window.confirm("Are you sure you want to suspend this child's account?"))try{await xC(n.uid,q,"Suspended by parent"),g("Child account suspended"),He()}catch(oe){console.error("Error suspending child:",oe),d("Failed to suspend child.")}},Oe=async q=>{if(n)try{await RC(q,{approvalStatus:tt.APPROVED,rejectedReason:""}),g("Child account reactivated"),He()}catch(oe){console.error("Error unsuspending child:",oe),d("Failed to reactivate child.")}},Qe=async()=>{if(M){X(!0);try{const q=await L5(M.id);ee(q)}catch(q){console.error("Error generating code:",q),d("Failed to generate invite code.")}finally{X(!1)}}},k=async q=>{if(M){N(!0);try{await V5(M.id,{filterLevel:q}),z(oe=>oe?{...oe,settings:{...oe.settings,filterLevel:q}}:null),g(`Family default filter set to ${q}`)}catch(oe){console.error("Error updating settings:",oe),d("Failed to update family settings.")}finally{N(!1)}}};return n?t&&!r?w.jsx("div",{className:"p-8 text-center max-w-2xl mx-auto",children:w.jsxs(Nn,{className:"p-6",children:[w.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Account Pending Approval"}),w.jsx("p",{className:"text-gray-600",children:"Your parent account is currently pending approval by an administrator. Once approved, you will be able to access the dashboard and manage your family."})]})}):!t&&r?w.jsx("div",{className:"p-8 text-center",children:"Access Denied: Only parents can access this page."}):a?w.jsx("div",{className:"flex justify-center items-center min-h-screen",children:w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600"})}):w.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"mb-8",children:[w.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Family Management"}),w.jsx("p",{className:"text-gray-600",children:"Manage your children's access and family settings."})]}),c&&w.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-400 p-4",children:w.jsx("div",{className:"flex",children:w.jsx("div",{className:"ml-3",children:w.jsx("p",{className:"text-sm text-red-700",children:c})})})}),m&&w.jsx("div",{className:"mb-4 bg-green-50 border-l-4 border-green-400 p-4",children:w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"ml-3",children:w.jsx("p",{className:"text-sm text-green-700",children:m})}),w.jsx("div",{className:"ml-auto pl-3",children:w.jsx("div",{className:"-mx-1.5 -my-1.5",children:w.jsxs("button",{type:"button",onClick:()=>g(null),className:"inline-flex rounded-md p-1.5 text-green-500 hover:bg-green-100 focus:outline-none",children:[w.jsx("span",{className:"sr-only",children:"Dismiss"}),w.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[w.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[w.jsxs("section",{children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Pending Requests"}),_.length>0&&w.jsxs(Rm,{color:"yellow",children:[_.length," Pending"]})]}),_.length===0?w.jsx(Nn,{className:"p-6 text-center text-gray-500 bg-gray-50 border border-gray-100",children:"No pending requests at this time."}):w.jsx("div",{className:"space-y-4",children:_.map(q=>w.jsx(Nn,{className:"p-4",children:w.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-md font-medium text-gray-900",children:q.displayName||"No Name"}),w.jsx("p",{className:"text-sm text-gray-500",children:q.email}),w.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Registered: ",new Date(q.createdAt).toLocaleDateString()]})]}),w.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[w.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>j(q.uid),children:"Reject"}),w.jsx(_t,{variant:"primary",size:"sm",onClick:()=>bt(q.uid),children:"Approve"})]})]})},q.uid))})]}),w.jsxs("section",{children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Your Children"}),w.jsxs(Rm,{color:"blue",children:[b.length," Total"]})]}),b.length===0?w.jsxs(Nn,{className:"p-8 text-center",children:[w.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't added any children yet."}),w.jsx(_t,{variant:"secondary",onClick:()=>{var q;return(q=document.getElementById("invite-section"))==null?void 0:q.scrollIntoView({behavior:"smooth"})},children:"Setup Child Device"})]}):w.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:b.map(q=>w.jsxs(Nn,{className:`p-4 ${q.approvalStatus===tt.SUSPENDED?"bg-red-50":""}`,children:[w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsx(Rm,{color:q.approvalStatus===tt.APPROVED?"green":q.approvalStatus===tt.SUSPENDED?"red":"yellow",children:q.approvalStatus}),w.jsxs("span",{className:"text-xs text-gray-400",children:["Level: ",q.filterLevel]})]}),w.jsxs("div",{className:"mb-4",children:[w.jsx("h3",{className:"font-medium text-gray-900 truncate",children:q.displayName||"Child"}),w.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.email})]}),w.jsx("div",{className:"border-t pt-3 flex justify-end",children:q.approvalStatus===tt.SUSPENDED?w.jsx(_t,{variant:"secondary",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>Oe(q.uid),children:"Unsuspend"}):w.jsx(_t,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Te(q.uid),children:"Suspend"})})]},q.uid))})]})]}),w.jsxs("div",{className:"space-y-8",children:[w.jsxs("section",{id:"invite-section",children:[w.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Invite Children"}),w.jsxs(Nn,{className:"p-6",children:[w.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Ask your child to register using your email address:",w.jsx("br",{}),w.jsx("strong",{className:"text-gray-800",children:e==null?void 0:e.email})]}),w.jsxs("div",{className:"relative flex py-2 items-center",children:[w.jsx("div",{className:"flex-grow border-t border-gray-200"}),w.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-xs",children:"OR USE CODE"}),w.jsx("div",{className:"flex-grow border-t border-gray-200"})]}),w.jsxs("div",{className:"mt-4 text-center",children:[F?w.jsxs("div",{className:"mb-4",children:[w.jsx("div",{className:"text-3xl font-mono font-bold text-brand-600 tracking-wider mb-2",children:F}),w.jsx("p",{className:"text-xs text-brand-500",children:"Valid for 48 hours"})]}):w.jsx("div",{className:"mb-4 text-gray-400 text-sm italic",children:"No active code generated"}),w.jsx(_t,{onClick:Qe,isLoading:te,variant:"secondary",className:"w-full",children:F?"Generate New Code":"Generate Invite Code"})]})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Family Settings"}),w.jsxs(Nn,{className:"p-6",children:[w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family ID"}),w.jsx("code",{className:"block w-full bg-gray-50 px-3 py-2 rounded border border-gray-200 text-xs text-gray-600",children:(M==null?void 0:M.id)||"..."})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Filter Level"}),w.jsx("div",{className:"space-y-2",children:[wo.STRICT,wo.MODERATE,wo.NONE].map(q=>{var oe;return w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{id:`filter-${q}`,name:"filterLevel",type:"radio",checked:((oe=M==null?void 0:M.settings)==null?void 0:oe.filterLevel)===q,onChange:()=>k(q),disabled:L,className:"h-4 w-4 text-brand-600 border-gray-300 focus:ring-brand-500"}),w.jsx("label",{htmlFor:`filter-${q}`,className:"ml-3 block text-sm font-medium text-gray-700 capitalize",children:q.toLowerCase()})]},q)})})]})]})]})]})]}),ge&&w.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:w.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[w.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:w.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),w.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),w.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[w.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:w.jsxs("div",{className:"sm:flex sm:items-start",children:[w.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:w.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),w.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[w.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Reject Child Request"}),w.jsxs("div",{className:"mt-2",children:[w.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please provide a reason for rejecting this request."}),w.jsx(Yi,{value:de,onChange:q=>x(q.target.value),placeholder:"Reason for rejection (e.g. Unknown email)",autoFocus:!0})]})]})]})}),w.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[w.jsx(_t,{variant:"danger",onClick:le,isLoading:P,className:"w-full sm:ml-3 sm:w-auto",children:"Reject"}),w.jsx(_t,{variant:"secondary",onClick:()=>fe(!1),disabled:P,className:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto",children:"Cancel"})]})]})]})})]}):w.jsx("div",{className:"p-8 text-center",children:"Please log in to manage your family."})},j5=()=>{const{userProfile:n,refreshProfile:e,signOut:t}=Ko(),r=rp(),[a,l]=B.useState(!1);if(B.useEffect(()=>{(n==null?void 0:n.approvalStatus)===tt.APPROVED&&(n.role===xt.SUPER_ADMIN?r("/admin"):r("/dashboard"))},[n,r]),!n)return w.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600"})});const c=async()=>{l(!0),await e(),await new Promise(_=>setTimeout(_,500)),l(!1)},d=_=>new Date(_).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),m=()=>n.role===xt.PENDING_PARENT?"Parent":n.role===xt.PENDING_CHILD?"Child":n.role,g=()=>{const{approvalStatus:_}=n;if(_===tt.REJECTED)return w.jsxs(Nn,{className:"max-w-md w-full mx-auto",children:[w.jsx("div",{className:"bg-red-50 px-4 py-5 border-b border-red-100 sm:px-6",children:w.jsx("h3",{className:"text-lg leading-6 font-medium text-red-800",children:"Access Denied"})}),w.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:w.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Your Request Was Not Approved"}),n.rejectedReason&&w.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-md text-left",children:[w.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Reason:"}),w.jsx("p",{className:"text-sm text-gray-700",children:n.rejectedReason})]}),w.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"If you believe this is an error, please contact support."})]}),w.jsx("div",{className:"border-t border-gray-200 pt-5",children:w.jsx(_t,{variant:"secondary",className:"w-full justify-center",onClick:()=>t(),children:"Sign Out"})})]})]});if(_===tt.SUSPENDED)return w.jsxs(Nn,{className:"max-w-md w-full mx-auto",children:[w.jsx("div",{className:"bg-red-50 px-4 py-5 border-b border-red-100 sm:px-6",children:w.jsx("h3",{className:"text-lg leading-6 font-medium text-red-800",children:"Account Suspended"})}),w.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:w.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Your Account is Suspended"}),n.rejectedReason&&w.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-md text-left",children:[w.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Reason:"}),w.jsx("p",{className:"text-sm text-gray-700",children:n.rejectedReason})]}),w.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Please contact support for more information."})]}),w.jsx("div",{className:"border-t border-gray-200 pt-5",children:w.jsx(_t,{variant:"secondary",className:"w-full justify-center",onClick:()=>t(),children:"Sign Out"})})]})]});const v=n.role===xt.PENDING_PARENT;return w.jsxs(Nn,{className:"max-w-md w-full mx-auto",children:[w.jsx("div",{className:"bg-yellow-50 px-4 py-5 border-b border-yellow-100 sm:px-6",children:w.jsxs("h3",{className:"text-lg leading-6 font-medium text-yellow-800 flex items-center",children:[w.jsx("svg",{className:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pending Approval (Pending Phase 9)"]})}),w.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[w.jsx("div",{className:"mb-6",children:w.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-2",children:[w.jsxs("div",{className:"sm:col-span-2",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.email})]}),w.jsxs("div",{className:"sm:col-span-1",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:m()})]}),w.jsxs("div",{className:"sm:col-span-1",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Submitted"}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:d(n.createdAt)})]})]})}),w.jsx("div",{className:"rounded-md bg-blue-50 p-4 mb-6",children:w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"flex-shrink-0",children:w.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),w.jsx("div",{className:"ml-3 flex-1 md:flex md:justify-between",children:w.jsx("p",{className:"text-sm text-blue-700",children:v?"Your registration is pending admin approval. You will receive access once the administrator reviews your request.":"Your registration is pending parent approval. Ask your parent to approve your account from their Family Management page."})})]})}),w.jsxs("div",{className:"flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-3 justify-center",children:[w.jsx(_t,{onClick:c,isLoading:a,className:"w-full sm:w-auto",children:"Check Status"}),w.jsx(_t,{variant:"secondary",onClick:()=>t(),className:"w-full sm:w-auto",children:"Sign Out"})]})]})]})};return w.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[w.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md mb-8",children:w.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"OpenFamilySafe"})}),g()]})},um=({children:n,requireApproval:e=!0})=>{const{currentUser:t,userProfile:r,loading:a}=Ko();return a?w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600"})}):t?e&&(r==null?void 0:r.approvalStatus)!==tt.APPROVED?w.jsx(Cm,{to:"/pending",replace:!0}):w.jsx(w.Fragment,{children:n}):w.jsx(Cm,{to:"/login",replace:!0})},z5=()=>w.jsxs(p2,{children:[w.jsx(io,{path:"/login",element:w.jsx(lm,{children:w.jsx(C5,{})})}),w.jsx(io,{path:"/pending",element:w.jsx(um,{requireApproval:!1,children:w.jsx(j5,{})})}),w.jsx(io,{path:"/",element:w.jsx(um,{children:w.jsx(lm,{children:w.jsx(x5,{})})})}),w.jsx(io,{path:"/admin",element:w.jsx(um,{children:w.jsx(lm,{children:w.jsx(D5,{})})})}),w.jsx(io,{path:"/family",element:w.jsx(um,{children:w.jsx(lm,{children:w.jsx(U5,{})})})}),w.jsx(io,{path:"*",element:w.jsx(Cm,{to:"/",replace:!0})})]}),B5=()=>w.jsx(S5,{children:w.jsx(j2,{children:w.jsx(z5,{})})}),NC=document.getElementById("root");if(!NC)throw new Error("Could not find root element to mount to");const F5=_D.createRoot(NC);F5.render(w.jsx(cD.StrictMode,{children:w.jsx(B5,{})}));
